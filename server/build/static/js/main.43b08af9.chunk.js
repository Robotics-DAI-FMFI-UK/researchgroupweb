/*! For license information please see main.43b08af9.chunk.js.LICENSE.txt */
(this.webpackJsonpmcms=this.webpackJsonpmcms||[]).push([[0],{285:function(e,t,n){},424:function(e,t,n){},433:function(e,t,n){},435:function(e,t,n){},530:function(e,t,n){},531:function(e,t,n){},538:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(22),i=n.n(r),o=n(6),s=n(25),l=n(14),d=n.n(l),u=(n(285),n(167)),h=n(262),j=n(84),b=n(47),p=n(4),m=n(10),f=function(e){try{var t=e.response.data.message,n=t.lastIndexOf(":");return-1===n?t:t.substr(n+1).trim()}catch(e){return"Error occurred"}},O=function(e,t){return localStorage.setItem(e,t)},x=function(e){return JSON.parse(localStorage.getItem(e))},g=function(e){return localStorage.removeItem(e)},v=function(e){return O("auth",JSON.stringify(e))},y=function(){return x("auth")},w=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},k=function(e){return JSON.parse(JSON.stringify(e))},S=function(){function e(e){return Math.floor(e).toString(16)}return e(Date.now()/1e3)+" ".repeat(16).replace(/./g,(function(){return e(16*Math.random())}))},C=n(34),N=n(26),E=n(79),_=n(131),T=n(238),L=n(239),M=n(543),P=n(119),A=n(120),z=n(13),B=n.n(z),F=n(21),H=n(17),R=n(46),I=n(2),D=["defaultValues","children","onSubmit","handleChange","validationSchema"],U=["register","label","placeholder","type","prepend"],V=["register","options","label"],q=["register","label"],J=["register","label"],W=["register","variant"],G=function(e){var t=e.error;return t?Object(I.jsxs)("p",{style:{color:"red"},children:[Object(I.jsx)(N.b,{})," ",t]}):null};function Q(e){var t=e.defaultValues,n=e.children,r=e.onSubmit,i=e.handleChange,o=e.validationSchema,s=Object(C.a)(e,D),l=function(e){return Object(a.useCallback)(function(){var t=Object(H.a)(B.a.mark((function t(n){var a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validate(n,{abortEarly:!1});case 3:return a=t.sent,t.abrupt("return",{values:a,errors:{}});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{values:{},errors:t.t0.inner.reduce((function(e,t){var n;return Object(p.a)(Object(p.a)({},e),{},Object(F.a)({},t.path,{type:null!==(n=t.type)&&void 0!==n?n:"validation",message:t.message}))}),{})});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),[e])}(o||R.a({})),d=Object(E.a)({resolver:l,defaultValues:t}),u=d.handleSubmit,h=d.formState.errors,j=d.reset;Object(a.useEffect)((function(){j(t)}),[t]);return Object(I.jsx)(_.a,Object(p.a)(Object(p.a)({onSubmit:u(r)},s),{},{children:Array.isArray(n)?n.map((function(e){var t,n;if(!e)return null;var a=null===(t=e.props)||void 0===t?void 0:t.name,r=(null===(n=e.props)||void 0===n?void 0:n.onChange)||i;return Object(I.jsxs)(I.Fragment,{children:[a?c.a.createElement(e.type,Object(p.a)({},Object(p.a)(Object(p.a)({},e.props),{},{onChange:r,register:d.register,key:e.props.name}))):e,h[a]&&Object(I.jsx)(G,{error:h[a].message})]})})):n}))}function X(e){var t=e.register,n=e.label,a=e.placeholder,c=e.type,r=void 0===c?"text":c,i=e.prepend,o=Object(C.a)(e,U);return n=n||o.name,a=a||"Enter ".concat(n),Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:w(n)}),i?Object(I.jsxs)(M.a,{className:"mb-2",children:[Object(I.jsx)(M.a.Prepend,{children:Object(I.jsx)(M.a.Text,{children:i})}),Object(I.jsx)(P.a,Object(p.a)({type:r,placeholder:a,ref:t},o))]}):Object(I.jsx)(P.a,Object(p.a)({type:r,placeholder:a,ref:t},o))]})}function K(e){var t=e.register,n=e.options,a=e.label,c=Object(C.a)(e,V);a=a||c.name;return Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:w(a)}),Object(I.jsx)(P.a,Object(p.a)(Object(p.a)({as:"select",label:a,ref:t},c),{},{children:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("option",{hidden:!0,value:"",children:"Select option ..."}),n.map((function(e,t){return Object(I.jsx)("option",{value:e,children:e},"".concat(e,"_").concat(t))}))]})}))]})}function Y(e){var t=e.register,n=e.label,a=Object(C.a)(e,q);return n=n||a.name,Object(I.jsx)(T.a,{children:Object(I.jsx)(_.a.Switch,Object(p.a)({label:w(n),ref:t},a))})}function Z(e){var t=e.register,n=e.label,a=Object(C.a)(e,J);return n=n||a.name,Object(I.jsxs)(T.a,{children:[Object(I.jsx)("input",Object(p.a)({ref:t,type:"checkbox"},a)),Object(I.jsx)("span",{className:"px-2",children:n})]})}function $(e){e.register;var t=e.variant,n=void 0===t?"dark":t,a=Object(C.a)(e,W);return Object(I.jsx)(A.a,Object(p.a)({type:"submit",className:"btn-block",variant:n},a))}var ee=function(e){var t=e.handleSubmit,n=e.authError;return Object(I.jsxs)(Q,{onSubmit:t,className:"my-form",children:[Object(I.jsx)(X,{name:"email",required:!0}),Object(I.jsx)(X,{name:"password",type:"password",required:!0}),Object(I.jsx)(G,{error:n}),Object(I.jsx)($,{className:"btn-block",children:"Login"})]})},te=R.a({email:R.c().email(),password:R.c().min(4,"Use at least 4 characters"),confirmPassword:R.c().oneOf([R.b("password"),null],"Passwords must match")}),ne=function(e){var t=e.handleSubmit,n=e.authError;return Object(I.jsxs)(Q,{onSubmit:t,validationSchema:te,children:[Object(I.jsx)(X,{name:"name",required:!0}),Object(I.jsx)(X,{name:"email",required:!0}),Object(I.jsx)(X,{name:"password",type:"password",required:!0}),Object(I.jsx)(X,{name:"confirmPassword",type:"password",placeholder:"Confirm password",required:!0}),Object(I.jsx)(G,{error:n}),Object(I.jsx)($,{className:"btn-block",children:"Register"})]})},ae="https://kempelen.dai.fmph.uniba.sk:4000/api",ce=function(e){var t=e.action,n=e.onHide,c=e.setUsers,r=(e.path,Object(a.useState)()),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)(!0),h=Object(o.a)(u,2),j=h[0],O=h[1],x={handleSubmit:function(e){d.a.post("".concat(ae,"/auth/").concat(t),e).then((function(e){"login"===t?(v(e.data),window.location.reload(!1)):(c((function(t){return[].concat(Object(m.a)(t),[Object(p.a)(Object(p.a)({},e.data.user),{},{_id:e.data.user.id})])})),n())})).catch((function(e){l(f(e))}))},authError:s},g="".concat(w(t)," form");return Object(I.jsxs)(b.a,{show:j,onHide:n||function(){return O(!1)},centered:!0,children:[Object(I.jsx)(b.a.Header,{closeButton:!0,children:Object(I.jsx)(b.a.Title,{className:"text-center mx-0",children:g})}),Object(I.jsx)(b.a.Body,{children:"login"===t?Object(I.jsx)(ee,Object(p.a)({},x)):Object(I.jsx)(ne,Object(p.a)({},x))})]})},re=n(33),ie=["variant","className"],oe=function(e){var t=e.variant,n=void 0===t?"dark":t,a=e.className,c=Object(C.a)(e,ie);return Object(I.jsx)(A.a,Object(p.a)({variant:n,size:"sm",className:a},c))},se=n(20),le=n(64),de=n(0),ue=function(e){var t=e.onHide,n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],i=c[1],l=function(){t&&t()};return r?Object(I.jsx)(se.b,{to:"/"}):Object(I.jsx)(de.b.Provider,{value:{size:"20",color:"white"},children:Object(I.jsxs)(re.a,{className:"w-100",children:[Object(I.jsx)(oe,{onClick:function(){return l()},as:s.b,to:"/pages",title:"pages",children:Object(I.jsx)(N.d,{})}),Object(I.jsx)(oe,{onClick:function(){return l()},as:s.b,to:"/users",title:"users",children:Object(I.jsx)(N.f,{})}),Object(I.jsx)(oe,{onClick:function(){return l()},as:s.b,to:"/profile",title:"profile",children:Object(I.jsx)(N.g,{})}),Object(I.jsx)(oe,{onClick:function(){g("auth"),i(!0)},title:"logout",children:Object(I.jsx)(le.c,{style:{transform:"scaleX(-1)"}})})]})})},he=function(e){var t,n=e.onHide,a=e.showModal,c=null===(t=y())||void 0===t?void 0:t.user,r={marginTop:"2.4em",width:"15%",minWidth:"300px",right:"5px",left:"unset"},i=function(){return Object(I.jsx)(b.a,{show:a,onHide:n,style:r,backdropClassName:"user-modal",className:"d-none d-lg-block",children:Object(I.jsxs)(b.a.Body,{style:{backgroundColor:"#eee",boxShadow:"3px 3px 10px 0px gray"},children:[Object(I.jsx)("h2",{children:c.name}),Object(I.jsx)("p",{children:c.email}),Object(I.jsx)(ue,{onHide:n})]})})};return Object(I.jsx)(I.Fragment,{children:c?Object(I.jsx)(i,{}):Object(I.jsx)(ce,{action:"login"})})},je=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],r=function(){return c((function(e){return!e}))},i=function(){return Object(I.jsx)("div",{className:"text-center",onClick:r,children:Object(I.jsx)(le.b,{className:"login-btn",title:"login"})})},s=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"d-none d-lg-block",dataBackdrop:"false",onClick:r,children:Object(I.jsx)(j.a,{src:"/defaultAvatar.png",rounded:!0,className:"p-1",style:{width:"40px",height:"40px"}})}),Object(I.jsx)("div",{className:"d-lg-none",children:Object(I.jsx)(ue,{})})]})};return Object(I.jsxs)("div",{children:[y()?Object(I.jsx)(s,{}):Object(I.jsx)(i,{}),n&&Object(I.jsx)(he,{onHide:r,showModal:n})]})},be=n(35),pe=n.n(be),me=function(){var e=Object(se.h)();return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(h.a.Brand,{onClick:function(){return e.push("/")},className:"mr-0 mr-lg-2",style:{position:"absolute",left:"5px",top:"0px"},children:Object(I.jsx)(j.a,{alt:"logo",className:"img-logo",src:"/logo.png",width:"90",height:"90"})})})},fe=n(546),Oe=n(135),xe=Object(a.createContext)(),ge=function(e){var t=e.children,n=Object(a.useState)({status:"",message:""}),c=Object(o.a)(n,2),r=c[0],i=c[1],s=function(){var e="succeeded"===r.status?"#aeffad":"#ffabab",t="succeeded"===r.status?"#29a224":"#b12626";return Object(I.jsxs)(Oe.a,{className:"my-toast",onClose:function(){return i()},show:r,delay:3e3,autohide:!0,style:{backgroundColor:e},children:[Object(I.jsxs)(Oe.a.Header,{children:[Object(I.jsx)("strong",{className:"mr-auto",children:"Notification"}),Object(I.jsx)("small",{children:"just now"})]}),Object(I.jsx)(Oe.a.Body,{children:Object(I.jsx)("strong",{style:{color:t},children:r.message})})]})};return Object(I.jsxs)(xe.Provider,{value:{toast:r,setSuccessToast:function(e){i({status:"succeeded",message:e})},setErrorToast:function(e){i({status:"error",message:e})}},children:[(null===r||void 0===r?void 0:r.message)&&Object(I.jsx)(s,{}),t]})},ve=function(){return Object(a.useContext)(xe)},ye=function(e){var t,n=e.pages,c=Object(se.i)(),r=ve().setErrorToast,i=Object(a.useState)([]),l=Object(o.a)(i,2),j=l[0],b=l[1],p=null===(t=y())||void 0===t?void 0:t.user.isAdmin;Object(a.useEffect)((function(){d.a.get("".concat(ae,"/navbars/published")).then((function(e){var t=[];e.data.items.forEach((function(e){var a=[];e.pages.forEach((function(e){var t=n.find((function(t){return t._id===e&&(t.published||p)}));t&&a.push({path:t.path,title:t.title})})),a.length&&(e.pages=a,t.push(e))})),t.sort((function(e,t){return e.x-t.x})),b(t)})).catch((function(e){r("Failed to load navigation")}))}),[]);var m=function(){return j.map((function(e){return Object(I.jsx)("div",{children:1===e.pages.length?Object(I.jsx)(f,{navItem:e}):Object(I.jsx)(O,{navItem:e})},pe()())}))},f=function(e){var t=e.navItem,n=c.pathname===t.pages[0].path;return Object(I.jsx)(u.a.Link,{as:s.b,to:t.pages[0].path,className:"text-center ".concat(n&&"active-link"),children:t.pages[0].title})},O=function(e){var t=e.navItem,n=t.pages.find((function(e){return e.path===c.pathname}));return Object(I.jsx)(fe.a,{title:t.name||"Dropdown",id:t._id,className:"text-center ".concat(n&&"active-link"),children:t.pages.map((function(e){var t=e.path===(null===n||void 0===n?void 0:n.path);return Object(I.jsx)(fe.a.Item,{as:s.b,to:e.path,className:"text-center ".concat(t&&"active-drop-link"),children:e.title},e.path)}))},t._id)};return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(h.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",style:{zIndex:1001,justifyContent:"flex-end"},children:[Object(I.jsx)(me,{}),Object(I.jsx)("h6",{className:"d-none d-xl-block",style:{marginBottom:"0",marginLeft:"100px",color:"white"},children:"ROBOT GROUP, DAI FMFI UK"}),Object(I.jsx)(h.a.Toggle,{}),Object(I.jsx)(h.a.Collapse,{children:Object(I.jsxs)(u.a,{className:"ml-auto",navbar:!0,activeKey:c.pathname,children:[p&&Object(I.jsx)(oe,{as:s.b,to:"/nav",title:"edit navbar",className:"pt-2",children:Object(I.jsx)(N.e,{size:"15",color:"white"})}),Object(I.jsx)(m,{}),Object(I.jsx)(je,{})]})})]})})},we=n(241),ke=function(e){var t=e.activeModule,n=e.handleChange,c=Xn().pages.map((function(e){return{value:e._id,label:e.title}})),r=Object(a.useState)(function(){var e,n=null===t||void 0===t||null===(e=t.body)||void 0===e?void 0:e.reference;if(n){if("https"===n.substr(0,5))return{value:n,label:n};var a=c.find((function(e){return e.value===t.body.reference}));if(a)return{value:a._id,label:a.label}}}()),i=Object(o.a)(r,2),s=i[0],l=i[1];return Object(I.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(I.jsx)("hr",{}),Object(I.jsx)("label",{className:"form-label",children:"Page reference"}),Object(I.jsx)(we.a,{menuContainerStyle:{top:"auto",bottom:"100%"},isClearable:!0,value:s,onChange:function(e){console.log("ee",e),l(e),n({target:{name:"reference",value:e.value}})},options:c})]})},Se=function(e){var t=e.activeModule,n=e.handleChange,a=e.onSubmit;return Object(I.jsxs)(Q,{defaultValues:t.body,handleChange:n,onSubmit:a,children:[Object(I.jsx)(X,{name:"heading",as:"textarea"}),Object(I.jsx)(X,{name:"message",as:"textarea",rows:10}),Object(I.jsx)(K,{name:"variant",options:["primary","secondary","success","danger","warning","info","light","dark"]}),Object(I.jsx)(ke,{activeModule:t,handleChange:n})]})},Ce=function(e){var t=e.onUploadChange,n=e.setItems,a=ve().setErrorToast,c=function(){var e=Object(H.a)(B.a.mark((function e(c){var r,i,o,s,l;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.target.files){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,i=[],o=0;case 6:if(!(o<r.length)){e.next=16;break}return(s=new FormData).append("file",r[o]),e.next=11,d.a.post("".concat(ae,"/upload"),s,{headers:{"Content-Type":"image/*"}});case 11:l=e.sent,i.push(l.data.filePath);case 13:o++,e.next=6;break;case 16:n((function(e){e=e.filter((function(e){return"/img-placeholder.jpg"!==e}));var n=[].concat(Object(m.a)(e),i);return t({target:{name:"items",value:n}}),n})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),a(f(e.t0));case 22:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)(_.a.File,{multiple:!0,onChange:c,label:"Select local file",custom:!0,accept:"image/*"})},Ne=function(e){var t=e.activeModule,n=e.handleChange,c=e.onSubmit,r="/img-placeholder.jpg",i=Object(a.useState)(t.body.items),s=Object(o.a)(i,2),l=s[0],d=s[1];Object(a.useEffect)((function(){d(t.body.items)}),[t.body.items]);var u=Object(a.useRef)({indicators:t.body.indicators,controls:t.body.controls,allowPause:t.body.allowPause,fade:t.body.fade}),h=function(e){var t=e.target.name;n({target:{name:t,value:(u.current[t]=!u.current[t],u.current[t])}})};return Object(I.jsxs)(Q,{defaultValues:t.body,handleChange:n,onSubmit:c,children:[Object(I.jsx)(Z,{name:"indicators",onChange:h}),Object(I.jsx)(Z,{name:"controls",onChange:h}),Object(I.jsx)(Z,{name:"allowPause",label:"Pause on hover",onChange:h}),Object(I.jsx)(Z,{name:"fade",label:"Fade animation",onChange:h}),Object(I.jsx)("hr",{}),Object(I.jsx)(K,{name:"objectFit",options:["fill","contain","cover","none","scale-down"]}),Object(I.jsx)(X,{name:"interval",prepend:"in seconds",type:"number"}),Object(I.jsx)(X,{name:"backgroundColor"}),Object(I.jsx)(ke,{activeModule:t,handleChange:n}),Object(I.jsx)("hr",{}),Object(I.jsx)("label",{className:"form-label",children:"Upload images"}),Object(I.jsx)(Ce,{onUploadChange:n,setItems:d}),Object(I.jsx)("div",{className:"my-2",children:l.map((function(e){return Object(I.jsxs)("div",{className:"m-1 d-inline-block",children:[Object(I.jsx)(oe,{variant:"light",className:"position-absolute",onClick:function(){d((function(t){var a=t.filter((function(t){return t!==e}));return a.length||(a=[r,r]),n({target:{name:"items",value:a}}),a}))},children:"\xd7"}),Object(I.jsx)(j.a,{alt:e,src:e,style:{maxWidth:"118px",maxHeight:"118px"}})]})}))})]})},Ee=function(e){var t=e.activeModule,n=e.handleChange,c=e.onSubmit,r=Object(a.useRef)(t.body.embed);return Object(I.jsxs)(Q,{defaultValues:t.body,handleChange:n,onSubmit:c,children:[Object(I.jsx)(Z,{name:"embed",label:"Embedded (iframe)",onChange:function(){return n({target:{name:"embed",value:(r.current=!r.current,r.current)}})}}),Object(I.jsx)(X,{name:"html",label:"Paste html code",required:!0,as:"textarea",rows:20})]})},_e=c.a.memo((function(e){var t=e.activeModule,n=e.handleChange,c=e.onSubmit,r=ve().setErrorToast,i=Object(a.useState)("Select local file"),s=Object(o.a)(i,2),l=s[0],u=s[1],h=function(){var e=Object(H.a)(B.a.mark((function e(t){var a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return u(a.name),(c=new FormData).append("file",a),e.prev=6,e.next=9,d.a.post("".concat(ae,"/upload"),c,{headers:{"Content-Type":"image/*"}}).then((function(e){n({target:{name:"src",value:e.data.filePath}})})).catch((function(e){r(f(e))}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),r("Upload failed");case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(Q,{defaultValues:t.body,handleChange:n,onSubmit:c,children:[Object(I.jsx)(_.a.File,{custom:!0,label:l,onChange:h,className:"mb-3",accept:"image/*"}),Object(I.jsx)(X,{label:"Image source",name:"src",required:!0}),Object(I.jsx)(X,{name:"title"}),Object(I.jsx)(X,{name:"subtitle",as:"textarea"}),Object(I.jsx)(K,{name:"objectFit",options:["fill","contain","cover","none","scale-down"]}),Object(I.jsx)(X,{name:"backgroundColor",label:"Background color"}),Object(I.jsx)(ke,{activeModule:t,handleChange:n})]})})),Te=Object(a.createContext)(),Le=function(e){var t=e.children,n=e.setModules,c=e.setWarning,r=Object(a.useState)(),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)(),u=Object(o.a)(d,2),h=u[0],j=u[1];Object(a.useEffect)((function(){s&&!h&&j(JSON.stringify(s))}),[s]);var b=function(e){n((function(t){return t.map((function(t){return t._id===e._id?e:t}))}))};return Object(I.jsx)(Te.Provider,{value:{activeModule:s,toggleActiveModule:function(e){l((function(t){return t?(b(t),t._id===e._id?void 0:e):e}))},updateActiveModule:function(e){c(h!==JSON.stringify(e)),l(e)},closeActiveModule:function(){l((function(e){b(e)}))}},children:t})},Me=function(){return Object(a.useContext)(Te)},Pe=function(e){var t=e.activeModule,n=e.handleChange,c=e.onSubmit,r=ve().setErrorToast,i=Object(a.useState)(t.body.src||"Select local file"),s=Object(o.a)(i,2),l=s[0],u=s[1],h=function(){var e=Object(H.a)(B.a.mark((function e(t){var a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return u(a.name),(c=new FormData).append("file",a),e.prev=6,e.next=9,d.a.post("".concat(ae,"/upload"),c,{headers:{"Content-Type":"video/*"}}).then((function(e){n({target:{name:"src",value:e.data.filePath}})})).catch((function(e){r(f(e))}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),r("Upload failed");case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(Q,{defaultValues:t.body,handleChange:n,onSubmit:c,children:[Object(I.jsx)(_.a.File,{custom:!0,label:l,onChange:h,className:"mb-3"}),Object(I.jsx)(X,{name:"title"}),Object(I.jsx)(X,{name:"backgroundColor",label:"Background color"})]})},Ae=function(e){switch(e.type){case"alert":return Se;case"carousel":return Ne;case"html":return Ee;case"image":return _e;case"video":return Pe;default:return null}},ze=function(){var e=ve(),t=e.setSuccessToast,n=e.setErrorToast,c=Me(),r=c.activeModule,i=c.updateActiveModule,s=c.closeActiveModule,l=Object(a.useState)(r),u=Object(o.a)(l,1)[0],h={activeModule:r,handleChange:function(e){var t=e.target,n=t.name,a=t.value;i(Object(p.a)(Object(p.a)({},r),{},{body:Object(p.a)(Object(p.a)({},r.body),{},Object(F.a)({},n,a))}))},onSubmit:function(){d.a.patch("".concat(ae,"/modules/").concat(r._id),{body:r.body}).then((function(e){t("Module saved successfully")})).catch((function(e){n(f(e))}))}},j=Ae(r);return j?Object(I.jsxs)("div",{className:"m-4",children:[Object(I.jsx)("h1",{className:"text-center",children:w(r.type)}),Object(I.jsx)("hr",{}),Object(I.jsx)(j,Object(p.a)({},h)),Object(I.jsxs)(re.a,{className:"space-children w-100",children:[Object(I.jsx)(oe,{className:"ml-0",onClick:s,children:"close"}),Object(I.jsx)(oe,{className:"mr-0",onClick:function(){return i(u)},children:"reset"})]})]}):Object(I.jsxs)("div",{className:"m-4",children:[Object(I.jsx)("h1",{className:"text-center",children:w(r.type)}),Object(I.jsx)("h4",{className:"text-center",children:"Form not found"})]})},Be=Object(a.createContext)(),Fe=function(e){var t=e.children,n=Object(a.useState)(y()&&x("edit")),c=Object(o.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){r?O("edit","true"):g("edit")}),[r]),Object(I.jsx)(Be.Provider,{value:[r,i],children:t})},He=function(){return Object(a.useContext)(Be)},Re=function(){var e=He(),t=Object(o.a)(e,1)[0],n=Me().activeModule,c=Object(a.useState)("right"),r=Object(o.a)(c,2),i=r[0],s=r[1],l="right"===i?"left":"right",d=t&&n&&"editor-js"!==n.type,u={position:"fixed",top:"0px",paddingTop:"66px",right:"right"===i?"0":"",left:"left"===i?"0":"",width:d?"300px":"0",minHeight:"100vh",maxHeight:"100vh",overflowY:"scroll",transition:"ease .3s",backgroundColor:"#eee",zIndex:"103",boxShadow:"".concat("right"===i?"-":"","5px 0 10px #1C1C1C")};return Object(I.jsx)("div",{style:u,children:d?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(oe,{onClick:function(){return s(l)},variant:"link",title:"swap to ".concat(l),className:"position-absolute ml-2",children:Object(I.jsx)(N.a,{size:"25"})}),Object(I.jsx)(ze,{})]}):null})},Ie=function(e){var t=e.page,n=e.setPage,c=e.onHide,r=Object(a.useState)(),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(se.h)(),h=Xn().setPages,j=Object(a.useState)(""),m=Object(o.a)(j,2),O=m[0],x=m[1];return O?Object(I.jsx)(se.b,{to:O}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(b.a,{show:!0,onHide:c,centered:!0,children:[Object(I.jsx)(b.a.Header,{closeButton:!0,className:"px-5",children:Object(I.jsx)(b.a.Title,{children:"Page settings"})}),Object(I.jsx)(b.a.Body,{className:"px-5",children:Object(I.jsxs)(Q,{onSubmit:function(e){return d.a.patch("/pages/".concat(t._id),e).then((function(a){var r=Object(p.a)(Object(p.a)({},t),e);n(r),h((function(e){return e.map((function(e){return e._id!==t._id?e:r}))})),t.path!==e.path&&(console.log("here"),x(e.path),u.push(e.path)),c()})).catch((function(e){l(f(e))}))},defaultValues:t,children:[Object(I.jsx)(X,{name:"title",required:!0}),Object(I.jsx)(X,{name:"path",required:!0}),Object(I.jsx)(X,{name:"description"}),Object(I.jsx)(Y,{id:pe()(),name:"published",checked:t.published,onChange:function(){n((function(e){return Object(p.a)(Object(p.a)({},e),{},{published:!t.published})}))}}),Object(I.jsx)(G,{error:s}),Object(I.jsx)($,{children:"save"})]})}),Object(I.jsxs)(b.a.Footer,{className:"px-5",children:[Object(I.jsxs)("p",{className:"d-flex mr-auto",children:["Author: ",t.created_by.name]}),Object(I.jsx)(oe,{variant:"outline-danger",onClick:function(){d.a.delete("".concat(ae,"/pages/").concat(t._id)).then((function(e){x(t.path),h((function(e){return e.filter((function(e){return e._id!==t._id}))})),x(t.path)})).catch((function(e){l(f(e))}))},children:"remove"})]})]})})},De=n(128),Ue=n(242),Ve=n(56),qe=["title","body","footer"],Je=function(e){var t=e.title,n=e.body,a=e.footer,c=Object(C.a)(e,qe);return Object(I.jsxs)(b.a,Object(p.a)(Object(p.a)({show:!0,centered:!0},c),{},{children:[t&&Object(I.jsx)(b.a.Header,{closeButton:!0,children:Object(I.jsx)(b.a.Title,{children:t})}),n&&Object(I.jsx)(b.a.Body,{children:n}),a&&Object(I.jsx)(b.a.Footer,{children:a})]}))},We=R.a({path:R.c().notOneOf(["/users","/profile","/nav","/pages"],"The path name is reserved").matches(/^[/.a-zA-Z0-9-]*$/,"Not valid url path.")}),Ge=function(e){var t=e.onHide,n=e.page,c=e.path,r=e.redirect,i=void 0===r||r,s=Xn().setPages,l=Object(a.useState)(),u=Object(o.a)(l,2),h=u[0],j=u[1],b=Object(a.useState)("Create from local file"),O=Object(o.a)(b,2),x=O[0],g=O[1],v=Object(a.useState)(""),k=Object(o.a)(v,2),S=k[0],C=k[1],N=function(e,a){var c;a.preventDefault(),console.log("data",e);var r="".concat(ae,"/pages");e.copy&&(r+="/with-layouts",e.layouts=n.layouts),d.a.post(r,Object(p.a)(Object(p.a)({},e),{},{path:"/".concat(e.path),created_by:null===(c=y())||void 0===c?void 0:c.user.id})).then((function(e){var n=e.data,a=n.newPage,c=n.newModules;t&&!i&&t(),C(a.path),s((function(e){return[].concat(Object(m.a)(e),[Object(p.a)(Object(p.a)({},a),{},{modules:c||[],created_by:{_id:y().user.id,name:y().user.name}})])}))})).catch((function(e){j(f(e))}))},E=function(e){var t;return d.a.post("pages",{created_by:null===(t=y())||void 0===t?void 0:t.user.id}).then((function(e){console.log(e)})).catch((function(e){j(f(e))}))},T=function(e){d.a.patch("".concat(ae,"/pages/with-grid/").concat(e._id),{}).then((function(e){console.log(e)})).catch((function(e){j(f(e)),console.log(e)}))},L=function(){var e=Object(H.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return g(n.name),(a=new FormData).append("file",n),e.prev=6,e.next=9,d.a.post("".concat(ae,"/pages/import"),a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data.readFile;console.log("importData",t),t._id?T(t):E()})).catch((function(e){console.log("err",e),j(f(e))}));case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(6),console.log("err",e.t0),j("Upload failed");case 15:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),M={title:c&&w(c.substr(1)),path:c&&c.substr(1),template:"grid"},P=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Q,{onSubmit:N,validationSchema:We,children:[Object(I.jsx)(X,{name:"title",required:!0,defaultValue:M.title}),Object(I.jsx)(X,{name:"path",label:"url path",prepend:"/",defaultValue:M.path||""}),Object(I.jsx)(X,{name:"description",as:"textarea"}),n&&Object(I.jsx)(Y,{id:pe()(),name:"copy",label:"copy current page layouts"}),Object(I.jsx)(G,{error:h}),Object(I.jsx)($,{children:"Create"})]}),Object(I.jsx)("hr",{}),Object(I.jsx)(_.a.File,{custom:!0,label:x,onChange:L}),Object(I.jsx)("hr",{})]})};return S?(console.log("redirect"),Object(I.jsx)(se.b,{to:S})):Object(I.jsx)(Je,{onHide:t,size:"sm",title:"Create new page",body:Object(I.jsx)(P,{})})},Qe=function(e){var t=e.page,n=e.setPage,c=e.warning,r=e.setWarning,i=e.layouts,s=e.modules,l=Me().activeModule,u=ve(),h=u.setSuccessToast,j=u.setErrorToast,b=He(),p=Object(o.a)(b,2),m=p[0],O=p[1],x=function(){return O((function(e){return!e}))},g=Object(a.useState)(),v=Object(o.a)(g,2),y=v[0],w=v[1],k=function(e){return w(e)};return Object(I.jsxs)("div",{className:"page-toolbar",style:{position:"fixed",top:"5px",left:"5px",paddingTop:"124px",zIndex:"102"},children:[Object(I.jsx)("div",{children:Object(I.jsx)(de.b.Provider,{value:{size:"18",color:"white"},children:m?Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(re.a,{vertical:!0,children:[Object(I.jsx)(oe,{title:"preview",onClick:x,children:Object(I.jsx)(Ue.a,{})}),Object(I.jsx)(oe,{onClick:function(){return k("settings")},title:"settings",children:Object(I.jsx)(De.b,{})}),Object(I.jsx)(oe,{onClick:function(){return k("newPage")},title:"create new page",children:Object(I.jsx)(N.c,{})}),Object(I.jsx)(oe,{title:"export",href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t,null,2))),download:"data.json",children:Object(I.jsx)(Ve.a,{})}),Object(I.jsx)(oe,{onClick:function(){var e={lg:i.lg.filter((function(e){return"addButton"!==e.i})),md:i.md.filter((function(e){return"addButton"!==e.i})),sm:i.sm.filter((function(e){return"addButton"!==e.i}))},n=function(e,t){var n=[],a=[];return e.forEach((function(e){if(e.isRemoved)a.push(e._id);else{var c=(null===t||void 0===t?void 0:t._id)===e._id;n.push(c?t:e)}})),{updatedModules:n,removeIds:a}}(s,l),a=n.updatedModules,c=n.removeIds;d.a.patch("".concat(ae,"/pages/with-grid/").concat(t._id),{layouts:e,modules:a,removeIds:c}).then((function(e){h("Page saved successfully"),r(!1)})).catch((function(e){j(f(e))}))},title:"save",disabled:!c,children:Object(I.jsx)(le.d,{})})]})}):Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(oe,{onClick:x,title:"edit",children:Object(I.jsx)(Ve.c,{})})})})}),"settings"===y&&Object(I.jsx)(Ie,{page:t,setPage:n,onHide:k}),"newPage"===y&&Object(I.jsx)(Ge,{onHide:k,page:t})]})},Xe=n(134),Ke=n(129),Ye=["children","compactType","animated","isResizable","margin","isDraggable","setWarning","simulateBreakpoints","hasEditPermission","breakpoints"],Ze=Object(Xe.WidthProvider)(Xe.Responsive),$e=function(e){var t=e.children,n=e.compactType,c=void 0===n?"horizontal":n,r=e.animated,i=void 0!==r&&r,s=e.isResizable,l=void 0===s||s,d=(e.margin,e.isDraggable),u=e.setWarning,h=e.simulateBreakpoints,j=e.hasEditPermission,b=e.breakpoints,m=Object(C.a)(e,Ye),f=He(),O=Object(o.a)(f,1)[0];j&&(Ze=Xe.Responsive);var x=Object(a.useState)({width:0}),g=Object(o.a)(x,2),v=g[0],y=g[1],w=Object(a.useState)(b.lg+1),k=Object(o.a)(w,2),S=k[0],N=k[1];d=void 0===d?O&&j:d,l=l&&O&&j;var E=function(e,t){return"addButton"!==e.i&&JSON.stringify(e)!==JSON.stringify(t)},_=function(e,t,n){u&&E(t,n)&&u(!0)},T=function(e,t,n){u&&E(t,n)&&u(!0)},L=function(){var e=function(e){var t=e.breakpoint,n=e.active,a=e.disabled,c=e.children;return Object(I.jsxs)(oe,{variant:"outline-dark",active:n,disabled:a,onClick:function(){return N(b[t]+1)},children:[c," "]})};return Object(I.jsx)("div",{className:"d-flex justify-content-center pb-4",children:Object(I.jsxs)(re.a,{children:[Object(I.jsx)(oe,{style:{fontWeight:"bold"},variant:"dark",disabled:!0,children:"Device views:"}),Object(I.jsx)(e,{breakpoint:"sm",active:S<=b.md,disabled:!1,children:"Mobile"}),Object(I.jsx)(e,{breakpoint:"md",active:b.md+1<=S&&S<=b.lg,disabled:v.width<b.md,children:"Tablet"}),Object(I.jsx)(e,{breakpoint:"lg",active:S>=b.lg+1,disabled:v.width<b.lg,children:"Desktop"})]})})};return Object(I.jsxs)("div",{children:[h&&Object(I.jsx)(L,{}),Object(I.jsx)(Ke.SizeMe,{children:function(e){return function(e){v.width!==e.width&&(N(e.width),y(e))}(e.size),Object(I.jsx)(Ze,Object(p.a)(Object(p.a)({width:S,breakpoints:b,compactType:c,measureBeforeMount:!i,useCSSTransforms:i,isResizable:l,isDraggable:d,onDragStop:_,onResizeStop:T,rowHeight:150},m),{},{children:t}))}})]})},et=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(I.jsx)(se.a,{when:n,message:"Changes you made may not be saved."});return Object(a.useEffect)((function(){return window.onbeforeunload=n&&function(){return"message"},function(){return window.onbeforeunload=null}}),[n]),[n,c,r]},tt=function(e){var t=e.module,n=e.position,a=e.onPin,c=e.onRemove,r=(e.onShrink,e.showToolbar),i=e.copyCardToClipboard,o=e.createCardCopy,s=e.toggleActiveModule,l=n.static,d={backgroundColor:"#343a40",paddingTop:".25rem",paddingBottom:".25rem",marginLeft:".5rem",marginRight:".5rem",cursor:l?"not-allowed":"grab"};return Object(I.jsx)("div",{style:{position:"absolute",top:"-30px",left:"0",zIndex:"101",width:"100%"},children:r&&Object(I.jsx)(re.a,{className:"w-100",style:{backgroundColor:"#343a40"},children:Object(I.jsxs)(de.b.Provider,{value:{size:"20",color:"white"},children:[Object(I.jsx)(oe,{onClick:function(){return s(t)},title:"edit",children:Object(I.jsx)(N.e,{})}),Object(I.jsx)(oe,{onClick:function(){return i(t)},onDoubleClick:function(){return o(t,n)},title:"copy to clipboard",children:Object(I.jsx)(le.a,{})}),Object(I.jsx)(oe,{onClick:a,title:l?"unpin":"pin",children:l?Object(I.jsx)(Ve.d,{}):Object(I.jsx)(Ve.e,{})}),Object(I.jsx)(Ve.b,{className:l?"":"handle",size:32,style:d,title:"move"}),Object(I.jsx)(oe,{onClick:c,title:"remove",children:Object(I.jsx)(N.h,{})})]})})})},nt=n(243),at=n(246),ct=n.n(at),rt=n(247),it=n.n(rt),ot=n(248),st=n.n(ot),lt=n(249),dt=n.n(lt),ut=n(250),ht=n.n(ut),jt=n(15),bt=n(16);n(424).toString();var pt=function(){function e(t){var n=t.data,a=t.config,c=t.api,r=t.readOnly;Object(jt.a)(this,e),this.api=c,this.readOnly=r,this.placeholder=this.api.i18n.t(a.placeholder||e.DEFAULT_PLACEHOLDER),this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-code",textarea:"ce-code__textarea",select:"ce-code__languagecode"},this.languageList=[{name:"Select Language",code:""},{name:"HTML",code:"html"},{name:"CSS",code:"css"},{name:"JavaScript",code:"js"},{name:"ABAP",code:"abap"},{name:"Augmented Backus-Naur form",code:"abnf"},{name:"ActionScript",code:"actionscript"},{name:"Ada",code:"ada"},{name:"AL",code:"al"},{name:"ANTLR4",code:"antlr4"},{name:"Apache Configuration",code:"apacheconf"},{name:"APL",code:"apl"},{name:"AppleScript",code:"applescript"},{name:"AQL",code:"aql"},{name:"Arduino",code:"arduino"},{name:"ARFF",code:"arff"},{name:"AsciiDoc",code:"asciidoc"},{name:"6502 Assembly",code:"asm6502"},{name:"ASP.NET (C#)",code:"aspnet"},{name:"AutoHotkey",code:"autohotkey"},{name:"AutoIt",code:"autoit"},{name:"Bash",code:"bash"},{name:"BASIC",code:"basic"},{name:"Batch",code:"batch"},{name:"BBcode",code:"bbcode"},{name:"Bison",code:"bison"},{name:"Backus\u2013Naur form",code:"bnf"},{name:"Brainfuck",code:"brainfuck"},{name:"BrightScript",code:"brightscript"},{name:"Bro",code:"bro"},{name:"C",code:"c"},{name:"Concurnas",code:"concurnas"},{name:"C#",code:"csharp"},{name:"C++",code:"cpp"},{name:"CIL",code:"cil"},{name:"CoffeeScript",code:"coffeescript"},{name:"CMake",code:"cmake"},{name:"Clojure",code:"clojure"},{name:"Crystal",code:"crystal"},{name:"Content-Security-Policy",code:"csp"},{name:"CSS Extras",code:"css-extras"},{name:"D",code:"d"},{name:"Dart",code:"dart"},{name:"DAX",code:"dax"},{name:"Diff",code:"diff"},{name:"DNS zone file",code:"dns-zone-file"},{name:"Docker",code:"docker"},{name:"Extended Backus\u2013Naur form",code:"ebnf"},{name:"Eiffel",code:"eiffel"},{name:"EJS",code:"ejs"},{name:"Elixir",code:"elixir"},{name:"Elm",code:"elm"},{name:"Embedded Lua templating",code:"etlua"},{name:"ERB",code:"erb"},{name:"Erlang",code:"erlang"},{name:"Excel Formula",code:"xlsx"},{name:"F#",code:"fsharp"},{name:"Factor",code:"factor"},{name:"Firestore security rules",code:"firestore-security-rules"},{name:"Flow",code:"flow"},{name:"Fortran",code:"fortran"},{name:"FreeMarker Template Language",code:"ftl"},{name:"G-code",code:"gcode"},{name:"GDScript",code:"gdscript"},{name:"GEDCOM",code:"gedcom"},{name:"Gherkin",code:"gherkin"},{name:"Git",code:"git"},{name:"GLSL",code:"glsl"},{name:"GameMaker Language",code:"gml"},{name:"Go",code:"go"},{name:"GraphQL",code:"graphql"},{name:"Groovy",code:"groovy"},{name:"Haml",code:"haml"},{name:"Handlebars",code:"handlebars"},{name:"Haskell",code:"haskell"},{name:"Haxe",code:"haxe"},{name:"HCL",code:"hcl"},{name:"HLSL",code:"hlsl"},{name:"HTTP",code:"http"},{name:"HTTP Public-Key-Pins",code:"hpkp"},{name:"HTTP Strict-Transport-Security",code:"hsts"},{name:"IchigoJam",code:"ichigojam"},{name:"Icon",code:"icon"},{name:"Structured Text (IEC 61131-3)",code:"iecst"},{name:"Inform 7",code:"inform7"},{name:"Ini",code:"ini"},{name:"Io",code:"io"},{name:"J",code:"j"},{name:"Java",code:"java"},{name:"JavaDoc",code:"javadoc"},{name:"JavaDoc-like",code:"javadoclike"},{name:"Java stack trace",code:"javastacktrace"},{name:"Jinja2",code:"jinja2"},{name:"Jolie",code:"jolie"},{name:"JQ",code:"jq"},{name:"JSDoc",code:"jsdoc"},{name:"JS Extras",code:"js-extras"},{name:"JS Templates",code:"js-templates"},{name:"JSON",code:"json"},{name:"JSONP",code:"jsonp"},{name:"JSON5",code:"json5"},{name:"Julia",code:"julia"},{name:"Keyman",code:"keyman"},{name:"Kotlin",code:"kotlin"},{name:"LaTeX",code:"latex"},{name:"Latte",code:"latte"},{name:"Less",code:"less"},{name:"LilyPond",code:"lilypond"},{name:"Liquid",code:"liquid"},{name:"Lisp",code:"lisp"},{name:"LiveScript",code:"livescript"},{name:"LLVM IR",code:"llvm"},{name:"LOLCODE",code:"lolcode"},{name:"Lua",code:"lua"},{name:"Makefile",code:"makefile"},{name:"Markdown",code:"markdown"},{name:"Markup templating",code:"markup-templating"},{name:"MATLAB",code:"matlab"},{name:"MEL",code:"mel"},{name:"Mizar",code:"mizar"},{name:"Monkey",code:"monkey"},{name:"MoonScript",code:"moonscript"},{name:"N1QL",code:"n1ql"},{name:"N4JS",code:"n4js"},{name:"Nand To Tetris HDL",code:"nand2tetris-hdl"},{name:"NASM",code:"nasm"},{name:"NEON",code:"neon"},{name:"nginx",code:"nginx"},{name:"Nim",code:"nim"},{name:"Nix",code:"nix"},{name:"NSIS",code:"nsis"},{name:"Objective-C",code:"objectivec"},{name:"OCaml",code:"ocaml"},{name:"OpenCL",code:"opencl"},{name:"Oz",code:"oz"},{name:"PARI/GP",code:"parigp"},{name:"Parser",code:"parser"},{name:"Pascal",code:"pascal"},{name:"Pascaligo",code:"pascaligo"},{name:"PC-Axis",code:"pcaxis"},{name:"PeopleCode",code:"peoplecode"},{name:"Perl",code:"perl"},{name:"PHP",code:"php"},{name:"PHPDoc",code:"phpdoc"},{name:"PHP Extras",code:"php-extras"},{name:"PL/SQL",code:"plsql"},{name:"PowerQuery",code:"powerquery"},{name:"PowerShell",code:"powershell"},{name:"Processing",code:"processing"},{name:"Prolog",code:"prolog"},{name:".properties",code:"properties"},{name:"Protocol Buffers",code:"protobuf"},{name:"Pug",code:"pug"},{name:"Puppet",code:"puppet"},{name:"Pure",code:"pure"},{name:"PureBasic",code:"purebasic"},{name:"Python",code:"python"},{name:"Q (kdb+ database)",code:"q"},{name:"QML",code:"qml"},{name:"Qore",code:"qore"},{name:"R",code:"r"},{name:"Racket",code:"racket"},{name:"React JSX",code:"jsx"},{name:"React TSX",code:"tsx"},{name:"Ren'py",code:"renpy"},{name:"Reason",code:"reason"},{name:"Regex",code:"regex"},{name:"reST (reStructuredText)",code:"rest"},{name:"Rip",code:"rip"},{name:"Roboconf",code:"roboconf"},{name:"Robot Framework",code:"robotframework"},{name:"Ruby",code:"ruby"},{name:"Rust",code:"rust"},{name:"SAS",code:"sas"},{name:"Sass (Sass)",code:"sass"},{name:"Sass (Scss)",code:"scss"},{name:"Scala",code:"scala"},{name:"Scheme",code:"scheme"},{name:"Shell session",code:"shell-session"},{name:"Smalltalk",code:"smalltalk"},{name:"Smarty",code:"smarty"},{name:"Solidity (Ethereum)",code:"solidity"},{name:"Solution file",code:"solution-file"},{name:"Soy (Closure Template)",code:"soy"},{name:"SPARQL",code:"sparql"},{name:"Splunk SPL",code:"splunk-spl"},{name:"SQF: Status Quo Function (Arma 3)",code:"sqf"},{name:"SQL",code:"sql"},{name:"Stylus",code:"stylus"},{name:"Swift",code:"swift"},{name:"TAP",code:"tap"},{name:"Tcl",code:"tcl"},{name:"Textile",code:"textile"},{name:"TOML",code:"toml"},{name:"Template Toolkit 2",code:"tt2"},{name:"Turtle",code:"turtle"},{name:"Twig",code:"twig"},{name:"TypeScript",code:"typescript"},{name:"T4 Text Templates (C#)",code:"t4-cs"},{name:"T4 Text Templates (VB)",code:"t4-vb"},{name:"T4 templating",code:"t4-templating"},{name:"UnrealScript",code:"unrealscript"},{name:"Vala",code:"vala"},{name:"VB.Net",code:"vbnet"},{name:"Velocity",code:"velocity"},{name:"Verilog",code:"verilog"},{name:"VHDL",code:"vhdl"},{name:"vim",code:"vim"},{name:"Visual Basic",code:"visual-basic"},{name:"WarpScript",code:"warpscript"},{name:"WebAssembly",code:"wasm"},{name:"Wiki markup",code:"wiki"},{name:"Xeora",code:"xeora"},{name:"XML doc (.net)",code:"xml-doc"},{name:"Xojo (REALbasic)",code:"xojo"},{name:"XQuery",code:"xquery"},{name:"YAML",code:"yaml"},{name:"Zig",code:"zig"}],this.nodes={holder:null,textarea:null,picker:null},this.data={code:n.code||"",languageCode:n.languageCode||""},this.nodes.holder=this.drawView()}return Object(bt.a)(e,[{key:"drawView",value:function(){var e=document.createElement("div"),t=document.createElement("textarea"),n=document.createElement("select");for(var a in this.languageList)if(this.languageList.hasOwnProperty(a)){var c=document.createElement("option");c.text=this.languageList[a].name,c.value=this.languageList[a].code,n.appendChild(c)}return e.classList.add(this.CSS.baseClass,this.CSS.wrapper),n.classList.add(this.CSS.select),t.classList.add(this.CSS.textarea,this.CSS.input),t.textContent=this.data.code,n.value=this.data.languageCode,t.placeholder=this.placeholder,t.disabled=this.readOnly,n.disabled=this.readOnly,e.appendChild(n),e.appendChild(t),this.nodes.textarea=t,this.nodes.picker=n,e}},{key:"render",value:function(){return this.nodes.holder}},{key:"save",value:function(e){return{code:e.querySelector("textarea").value,languageCode:e.querySelector("select").value}}},{key:"onPaste",value:function(e){var t=e.detail.data;this.data={code:t.textContent}}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.nodes.textarea&&(this.nodes.textarea.textContent=e.code),this.nodes.picker&&(this.nodes.picker.value=e.languageCode)}}],[{key:"enableLineBreaks",get:function(){return!0}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg width="14" height="14" viewBox="0 -1 14 14" xmlns="http://www.w3.org/2000/svg" > <path d="M3.177 6.852c.205.253.347.572.427.954.078.372.117.844.117 1.417 0 .418.01.725.03.92.02.18.057.314.107.396.046.075.093.117.14.134.075.027.218.056.42.083a.855.855 0 0 1 .56.297c.145.167.215.38.215.636 0 .612-.432.934-1.216.934-.457 0-.87-.087-1.233-.262a1.995 1.995 0 0 1-.853-.751 2.09 2.09 0 0 1-.305-1.097c-.014-.648-.029-1.168-.043-1.56-.013-.383-.034-.631-.06-.733-.064-.263-.158-.455-.276-.578a2.163 2.163 0 0 0-.505-.376c-.238-.134-.41-.256-.519-.371C.058 6.76 0 6.567 0 6.315c0-.37.166-.657.493-.846.329-.186.56-.342.693-.466a.942.942 0 0 0 .26-.447c.056-.2.088-.42.097-.658.01-.25.024-.85.043-1.802.015-.629.239-1.14.672-1.522C2.691.19 3.268 0 3.977 0c.783 0 1.216.317 1.216.921 0 .264-.069.48-.211.643a.858.858 0 0 1-.563.29c-.249.03-.417.076-.498.126-.062.04-.112.134-.139.291-.031.187-.052.562-.061 1.119a8.828 8.828 0 0 1-.112 1.378 2.24 2.24 0 0 1-.404.963c-.159.212-.373.406-.64.583.25.163.454.342.612.538zm7.34 0c.157-.196.362-.375.612-.538a2.544 2.544 0 0 1-.641-.583 2.24 2.24 0 0 1-.404-.963 8.828 8.828 0 0 1-.112-1.378c-.009-.557-.03-.932-.061-1.119-.027-.157-.077-.251-.14-.29-.08-.051-.248-.096-.496-.127a.858.858 0 0 1-.564-.29C8.57 1.401 8.5 1.185 8.5.921 8.5.317 8.933 0 9.716 0c.71 0 1.286.19 1.72.574.432.382.656.893.671 1.522.02.952.033 1.553.043 1.802.009.238.041.458.097.658a.942.942 0 0 0 .26.447c.133.124.364.28.693.466a.926.926 0 0 1 .493.846c0 .252-.058.446-.183.58-.109.115-.281.237-.52.371-.21.118-.377.244-.504.376-.118.123-.212.315-.277.578-.025.102-.045.35-.06.733-.013.392-.027.912-.042 1.56a2.09 2.09 0 0 1-.305 1.097c-.2.323-.486.574-.853.75a2.811 2.811 0 0 1-1.233.263c-.784 0-1.216-.322-1.216-.934 0-.256.07-.47.214-.636a.855.855 0 0 1 .562-.297c.201-.027.344-.056.418-.083.048-.017.096-.06.14-.134a.996.996 0 0 0 .107-.396c.02-.195.031-.502.031-.92 0-.573.039-1.045.117-1.417.08-.382.222-.701.427-.954z" /> </svg>',title:"Code"}}},{key:"DEFAULT_PLACEHOLDER",get:function(){return"Write or Paste Code here"}},{key:"pasteConfig",get:function(){return{tags:["pre"]}}},{key:"sanitize",get:function(){return{code:!0}}}]),e}(),mt=n(251),ft=n.n(mt),Ot=n(252),xt=n.n(Ot),gt=n(253),vt=n.n(gt),yt=n(254),wt=n.n(yt),kt=n(255),St=n.n(kt),Ct=n(256),Nt=n.n(Ct),Et=function(){function e(t){var n=t.config,a=t.onUpload,c=t.onError;Object(jt.a)(this,e),this.config=n,this.onUpload=a,this.onError=c}return Object(bt.a)(e,[{key:"uploadSelectedFile",value:function(e){var t=this,n=e.onPreview;Nt.a.transport({url:this.config.endpoint,accept:this.config.types,beforeSend:function(){return n()},fieldName:this.config.field}).then((function(e){t.onUpload(e)})).catch((function(e){var n=e&&e.message?e.message:t.config.errorMessage;t.onError(n)}))}}]),e}(),_t=(n(433),'<svg width="12" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M4.109 2.08H2.942a.862.862 0 0 0-.862.862v8.116c0 .476.386.862.862.862h5.529a.862.862 0 0 0 .862-.862V7.695H4.11V2.08zm1.905.497v3.29h3.312l-3.312-3.29zM2.942 0h2.74c.326.02.566.076.719.165.153.09.484.413.992.973l3.21 3.346c.347.413.557.683.631.811.111.193.179.446.179.579v5.184A2.942 2.942 0 0 1 8.471 14H2.942A2.942 2.942 0 0 1 0 11.058V2.942A2.942 2.942 0 0 1 2.942 0z" fill-rule="nonzero"/></svg>'),Tt=function(){function e(t){var n=this,a=t.data,c=t.config,r=t.api,i=t.readOnly;Object(jt.a)(this,e),this.api=r,this.readOnly=i,this.nodes={wrapper:null,button:null,title:null},this._data={file:{},title:""},this.config={endpoint:c.endpoint||"",field:c.field||"file",types:c.types||"*",buttonText:c.buttonText||"Select file to upload",errorMessage:c.errorMessage||"File upload failed"},this.data=a,this.uploader=new Et({config:this.config,onUpload:function(e){return n.onUpload(e)},onError:function(e){return n.uploadingFailed(e)}}),this.enableFileUpload=this.enableFileUpload.bind(this)}return Object(bt.a)(e,[{key:"CSS",get:function(){return{baseClass:this.api.styles.block,apiButton:this.api.styles.button,loader:this.api.styles.loader,wrapper:"cdx-attaches",wrapperWithFile:"cdx-attaches--with-file",wrapperLoading:"cdx-attaches--loading",button:"cdx-attaches__button",title:"cdx-attaches__title",size:"cdx-attaches__size",downloadButton:"cdx-attaches__download-button",fileInfo:"cdx-attaches__file-info",fileIcon:"cdx-attaches__file-icon"}}},{key:"EXTENSIONS",get:function(){return{doc:"#3e74da",docx:"#3e74da",odt:"#3e74da",pdf:"#d47373",rtf:"#656ecd",tex:"#5a5a5b",txt:"#5a5a5b",pptx:"#e07066",ppt:"#e07066",mp3:"#eab456",mp4:"#f676a6",xls:"#3f9e64",html:"#2988f0",htm:"#2988f0",png:"#f676a6",jpg:"#f67676",jpeg:"#f67676",gif:"#f6af76",zip:"#4f566f",rar:"#4f566f",exe:"#e26f6f",svg:"#bf5252",key:"#e07066",sketch:"#df821c",ai:"#df821c",psd:"#388ae5",dmg:"#e26f6f",json:"#2988f0",csv:"#3f9e64"}}},{key:"save",value:function(e){if(this.pluginHasData()){var t=e.querySelector(".".concat(this.CSS.title)).innerHTML;Object.assign(this.data,{title:t})}return this.data}},{key:"render",value:function(){var e=this.make("div",this.CSS.baseClass);return this.nodes.wrapper=this.make("div",this.CSS.wrapper),this.pluginHasData()?this.showFileData():this.prepareUploadButton(),e.appendChild(this.nodes.wrapper),e}},{key:"prepareUploadButton",value:function(){this.nodes.button=this.make("div",[this.CSS.apiButton,this.CSS.button]),this.nodes.button.innerHTML="".concat(_t," ").concat(this.config.buttonText),this.nodes.button.addEventListener("click",this.enableFileUpload),this.nodes.wrapper.appendChild(this.nodes.button)}},{key:"appendCallback",value:function(){this.nodes.button.click()}},{key:"pluginHasData",value:function(){return""!==this.data.title||Object.values(this.data.file).some((function(e){return void 0!==e}))}},{key:"enableFileUpload",value:function(){var e=this;this.uploader.uploadSelectedFile({onPreview:function(){e.nodes.wrapper.classList.add(e.CSS.wrapperLoading,e.CSS.loader)}})}},{key:"onUpload",value:function(e){var t=e.body;if(t.success&&t.file){var n=t.file,a=n.url,c=n.name,r=n.size;this.data={file:{url:a,extension:c.split(".").pop(),name:c,size:r},title:c},this.nodes.button.remove(),this.showFileData(),this.moveCaretToEnd(this.nodes.title),this.nodes.title.focus(),this.removeLoader()}else this.uploadingFailed(this.config.errorMessage)}},{key:"appendFileIcon",value:function(){var e=this.data.file.extension||"",t=this.EXTENSIONS[e],n=this.make("div",this.CSS.fileIcon,{innerHTML:t?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40">\n  <path d="M17 0l15 14V3v34a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h20-6zm0 2H3a1 1 0 0 0-1 1v34a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V14H17V2zm2 10h7.926L19 4.602V12z"/>\n</svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40">\n  <g fill="#A8ACB8" fill-rule="evenodd">\n    <path fill-rule="nonzero" d="M17 0l15 14V3v34a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h20-6zm0 2H3a1 1 0 0 0-1 1v34a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V14H17V2zm2 10h7.926L19 4.602V12z"/>\n    <path d="M7 22h18v2H7zm0 4h18v2H7zm0 4h18v2H7z"/>\n  </g>\n</svg>'});t&&(n.style.color=t,n.setAttribute("data-extension",e)),this.nodes.wrapper.appendChild(n)}},{key:"removeLoader",value:function(){var e=this;setTimeout((function(){return e.nodes.wrapper.classList.remove(e.CSS.wrapperLoading,e.CSS.loader)}),500)}},{key:"showFileData",value:function(){this.nodes.wrapper.classList.add(this.CSS.wrapperWithFile);var e=this.data,t=e.file,n=t.size,a=t.url,c=e.title;this.appendFileIcon();var r=this.make("div",this.CSS.fileInfo);if(c&&(this.nodes.title=this.make("div",this.CSS.title,{contentEditable:!this.readOnly}),this.nodes.title.textContent=c,r.appendChild(this.nodes.title)),n){var i,o,s=this.make("div",this.CSS.size);Math.log10(+n)>=6?(i="MB",o=n/Math.pow(2,20)):(i="KB",o=n/Math.pow(2,10)),s.textContent=o.toFixed(1)+i,s.setAttribute("data-size",i),r.appendChild(s)}this.nodes.wrapper.appendChild(r);var l=this.make("a",this.CSS.downloadButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="17pt" height="17pt" viewBox="0 0 17 17">\n  <path d="M9.457 8.945V2.848A.959.959 0 0 0 8.5 1.89a.959.959 0 0 0-.957.957v6.097L4.488 5.891a.952.952 0 0 0-1.351 0 .952.952 0 0 0 0 1.351l4.687 4.688a.955.955 0 0 0 1.352 0l4.687-4.688a.952.952 0 0 0 0-1.351.952.952 0 0 0-1.351 0zM3.59 14.937h9.82a.953.953 0 0 0 .953-.957.952.952 0 0 0-.953-.953H3.59a.952.952 0 0 0-.953.953c0 .532.425.957.953.957zm0 0" fill-rule="evenodd"/>\n</svg>',href:a,target:"_blank",rel:"nofollow noindex noreferrer"});this.nodes.wrapper.appendChild(l)}},{key:"uploadingFailed",value:function(e){this.api.notifier.show({message:e,style:"error"}),this.removeLoader()}},{key:"data",get:function(){return this._data},set:function(e){var t=e.file,n=e.title;this._data=Object.assign({},{file:{url:t&&t.url||this._data.file.url,name:t&&t.name||this._data.file.name,extension:t&&t.extension||this._data.file.extension,size:t&&t.size||this._data.file.size},title:n||this._data.title})}},{key:"moveCaretToEnd",value:function(e){var t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n.removeAllRanges(),n.addRange(t)}},{key:"make",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=document.createElement(e);Array.isArray(n)?(t=c.classList).add.apply(t,Object(m.a)(n)):n&&c.classList.add(n);for(var r in a)c[r]=a[r];return c}}],[{key:"toolbox",get:function(){return{icon:_t,title:"Attaches"}}},{key:"isReadOnlySupported",get:function(){return!0}}]),e}(),Lt=n(257),Mt=n.n(Lt),Pt=n(258),At=n.n(Pt),zt=(n(434),n(89),n(259)),Bt=n.n(zt),Ft=(n(435),function(){return{events:[{time:"Time",description:"Description"}]}}),Ht=function(e){var t=c.a.useState(e.data.events.length>0?e.data:Ft),n=Object(o.a)(t,2),a=n[0],r=n[1],i=function(t){r(t),e.onDataChange&&e.onDataChange(t)},s=function(e,t){return function(n){var c=Object(p.a)({},a);c.events[e][t]=n.currentTarget.textContent,i(c)}};return Object(I.jsx)("div",{className:"container mb-2",children:Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"col",children:[Object(I.jsx)("ul",{className:"timeline",children:a.events.map((function(t,n){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("li",{children:[Object(I.jsx)("p",{onBlur:s(n,"time"),contentEditable:!e.readOnly,children:t.time}),Object(I.jsx)("p",{onBlur:s(n,"description"),contentEditable:!e.readOnly,children:t.description})]}),!e.readOnly&&Object(I.jsx)(oe,{style:{position:"relative",left:"-50px",top:"-100px",fontSize:"25px"},variant:"link",color:"#0088a9",onClick:function(){return function(e){var t=Object(p.a)({},a);t.events.splice(e,1),i(t)}(n)},children:"\xd7"})]})}))}),!e.readOnly&&Object(I.jsx)("li",{style:{position:"relative",top:"-29px",zIndex:"2",listStyle:"none",marginLeft:"18px",fontSize:"25px"},children:Object(I.jsx)(De.a,{color:"#0088a9",onClick:function(e){var t=Object(p.a)({},a);t.events.push({time:"Time",description:"Description"}),i(t)}})})]})})})},Rt=function(){function e(t){var n=t.data,a=(t.config,t.api),c=t.readOnly;Object(jt.a)(this,e),this.api=a,this.readOnly=c,this.data={events:n.events||[]},this.CSS={wrapper:"walkthrough-custom-timeline"},this.nodes={holder:null}}return Object(bt.a)(e,[{key:"render",value:function(){var e=this,t=document.createElement("div");t.setAttribute("class",this.CSS.wrapper),this.nodes.holder=t;return i.a.render(Object(I.jsx)(Ht,{onDataChange:function(t){e.data=Object(p.a)({},t)},readOnly:this.readOnly,data:this.data}),t),this.nodes.holder}},{key:"save",value:function(){return this.data}}],[{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 18.5c-.82 0-1.5-.67-1.5-1.5s.68-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM19 5v4H5V5h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 8.5c-.82 0-1.5-.67-1.5-1.5S6.18 5.5 7 5.5s1.5.68 1.5 1.5S7.83 8.5 7 8.5z"/></svg>',title:"Timeline"}}},{key:"isReadOnlySupported",get:function(){return!0}}]),e}();function It(e){switch(e.level){case 1:return"# ".concat(e.text,"\n");case 2:return"## ".concat(e.text,"\n");case 3:return"### ".concat(e.text,"\n");case 4:return"#### ".concat(e.text,"\n");case 5:return"##### ".concat(e.text,"\n");case 6:return"###### ".concat(e.text,"\n")}}function Dt(e){var t={};switch(e.depth){case 1:return e.children.forEach((function(e){t={data:{level:1,text:e.value},type:"header"}})),t;case 2:return e.children.forEach((function(e){t={data:{level:2,text:e.value},type:"header"}})),t;case 3:return e.children.forEach((function(e){t={data:{level:3,text:e.value},type:"header"}})),t;case 4:return e.children.forEach((function(e){t={data:{level:4,text:e.value},type:"header"}})),t;case 5:return e.children.forEach((function(e){t={data:{level:5,text:e.value},type:"header"}})),t;case 6:return e.children.forEach((function(e){t={data:{level:6,text:e.value},type:"header"}})),t}}function Ut(e){var t={};return"paragraph"===e.type&&e.children.forEach((function(e){"text"===e.type&&(t={data:{text:e.value},type:"paragraph"}),"image"===e.type&&(t={data:{caption:e.title,stretched:!1,url:e.url,withBackground:!1,withBorder:!1},type:"image"})})),t}function Vt(e){switch(e.style){case"unordered":return e.items.map((function(e){return"* ".concat(e)}));case"ordered":return e.items.map((function(e,t){return"".concat(t+1," ").concat(e)}))}}function qt(e){var t=[];return e.children.forEach((function(e){e.children.forEach((function(e){e.children.forEach((function(e){t.push(e.value)}))}))})),{data:{items:t,style:e.ordered?"ordered":"unordered"},type:"list"}}function Jt(e){return"![".concat(e.caption,"](").concat(e.url,' "').concat(e.caption,'")').concat("\n")}function Wt(e){return e.items.map((function(e){return!0===e.checked?"- [x] ".concat(e.text):"- [ ] ".concat(e.text)})).join("\n")}function Gt(e){return"> ".concat(e.text,"\n")}function Qt(e){var t={};return e.children.forEach((function(e){e.children.forEach((function(e){"text"===e.type&&(t={data:{alignment:"left",caption:"",text:e.value},type:"quote"})}))})),t}function Xt(e){return"```\n".concat(e.code,"\n```\n")}function Kt(e,t){var n=new File([e],{type:"text/markdown",endings:"transparent"}),a=URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.href=a,c.download=t,c.click(),window.URL.revokeObjectURL(a),document.body.removeChild(c)}var Yt=function(){function e(t){var n=t.data,a=t.api,c=t.readOnly;Object(jt.a)(this,e),this.data=n,this.api=a,this.readOnly=c}return Object(bt.a)(e,[{key:"render",value:function(){var e=document.createElement("div");return this.getContent(),e}},{key:"getContent",value:function(){var e=Object(H.a)(B.a.mark((function e(){var t,n,a,c,r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear(),r={},e.next=7,this.api.saver.save();case 7:i=e.sent,r.content=i.blocks,Kt(r.content.map((function(e){switch(e.type){case"header":return It(e.data);case"paragraph":return t=e.data,"".concat(t.text,"\n");case"list":return Vt(e.data);case"delimiter":return"---".concat("\n");case"image":return Jt(e.data);case"quote":return Gt(e.data);case"checkbox":return Wt(e.data);case"code":return Xt(e.data);case"checklist":return Wt(e.data)}var t})).join("\n"),"entry_".concat(n,"-").concat(a,"-").concat(c,".md"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){return{message:"Downloading Markdown"}}}],[{key:"toolbox",get:function(){return{title:"Download Markdown",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="rgb(112, 118, 132)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-download"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'}}},{key:"isReadOnlySupported",get:function(){return!0}}]),e}(),Zt=n(166),$t=[],en=Yt,tn=function(){function e(t){var n=t.data,a=t.api,c=t.readOnly;Object(jt.a)(this,e),this.data=n,this.api=a,this.readOnly=c}return Object(bt.a)(e,[{key:"render",value:function(){var e=document.createElement("input");return e.setAttribute("id","file-upload"),e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("name","files[]"),e.setAttribute("onload",this.parseMarkdown()),e}},{key:"parseMarkdown",value:function(){var e=Object(H.a)(B.a.mark((function e(){var t,n,a,c=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t.length=0,t={},e.next=4,this.api.saver.save();case 4:n=e.sent,t.content=n.blocks,(a=document.getElementById("file-upload")).onchange=function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=function(e){var t=e.target.result;return Zt().parse(t).children.forEach((function(e,t){switch(e.type){case"heading":return $t.push(Dt(e));case"paragraph":return $t.push(Ut(e));case"list":return $t.push(qt(e));case"thematicBreak":return $t.push({data:{items:[]},type:"delimiter"});case"code":return $t.push({data:{code:e.value},type:"code"});case"blockquote":return $t.push(Qt(e))}})),c.api.blocks.clear(),c.api.blocks.render({blocks:$t.filter((function(e){return 0!==Object.keys(e).length}))}),Zt().parse(t)}},a.click();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){return{message:"Uploading Markdown"}}}],[{key:"toolbox",get:function(){return{title:"Import Markdown",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="rgb(112, 118, 132)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-fileUpload"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>'}}},{key:"isReadOnlySupported",get:function(){return!0}}]),e}();n(530);function nn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=document.createElement(e);Array.isArray(n)?(t=c.classList).add.apply(t,Object(m.a)(n)):n&&c.classList.add(n);for(var r in a)c[r]=a[r];return c}var an=function(){function e(t){var n=t.api,a=t.data,c=t.settings,r=t.block;Object(jt.a)(this,e),this.api=n,this.block=r,this.settings=c,this.data=a||{alignment:this.getAlignment()},this.alignmentSettings=[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"right",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg>'}],this._CSS={alignment:{left:"ce-tune-alignment--left",center:"ce-tune-alignment--center",right:"ce-tune-alignment--right"}}}return Object(bt.a)(e,[{key:"getAlignment",value:function(){var t,n;return(null===(t=this.settings)||void 0===t?void 0:t.blocks)&&this.settings.blocks.hasOwnProperty(this.block.name)?this.settings.blocks[this.block.name]:(null===(n=this.settings)||void 0===n?void 0:n.default)?this.settings.default:e.DEFAULT_ALIGNMENT}},{key:"wrap",value:function(e){return this.wrapper=nn("div"),this.wrapper.classList.toggle(this._CSS.alignment[this.data.alignment]),this.wrapper.append(e),this.wrapper}},{key:"render",value:function(){var e=this,t=nn("div");return this.alignmentSettings.map((function(n){var a=document.createElement("button");return a.classList.add(e.api.styles.settingsButton),a.innerHTML=n.icon,a.classList.toggle(e.api.styles.settingsButtonActive,n.name===e.data.alignment),t.appendChild(a),a})).forEach((function(t,n,a){t.addEventListener("click",(function(){e.data={alignment:e.alignmentSettings[n].name},a.forEach((function(t,n){var a=e.alignmentSettings[n].name;t.classList.toggle(e.api.styles.settingsButtonActive,a===e.data.alignment),e.wrapper.classList.toggle(e._CSS.alignment[a],a===e.data.alignment)}))}))})),t}},{key:"save",value:function(){return this.data}}],[{key:"DEFAULT_ALIGNMENT",get:function(){return"left"}},{key:"isTune",get:function(){return!0}}]),e}(),cn={codeBox:pt,attaches:{class:Tt,config:{endpoint:"http://localhost:4000/upload"}},checkList:ht.a,delimiter:ft.a,alignTune:an,marker:Mt.a,inlineCode:At.a,paragraph:{class:st.a,inlineToolbar:!0},list:{class:xt.a,inlineToolbar:!0},header:{class:dt.a,inlineToolbar:!0,tunes:["alignTune"]},embed:St.a,table:vt.a,alert:wt.a,markdownParser:en,markdownImporter:tn,timeline:Rt,image:{class:Bt.a,config:{endpoints:{byFile:"http://localhost:4000/upload",byUrl:"http://localhost:8008/fetchUrl"}}}},rn=function(e){var t=e.module,n=e.hasEditPermission,c=He(),r=Object(o.a)(c,1)[0],i=Object(a.useRef)(),s=Me(),l=s.activeModule,d=s.updateActiveModule,u=s.toggleActiveModule;Object(a.useEffect)((function(){console.log("Editor REF",i)}),[i]);var h=function(){var e=Object(H.a)(B.a.mark((function e(){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.current.save();case 2:n=e.sent,a=Object(p.a)(Object(p.a)({},t),{},{body:n}),console.log("saved data",n),l&&l._id===t._id||u(a),d(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=!r||!n;return Object(I.jsx)(nt.a,{placeholder:"Let`s write an awesome story!",instanceRef:function(e){return i.current=e},data:t.body,tools:cn,readOnly:j,onChange:h,onReady:function(){!j&&i&&r.current&&(new it.a({editor:i.current}),new ct.a(i.current))}})},on=n(544),sn={heading:"Alert header!",message:"A long text message of the alert",variant:"warning"},ln=function(e){var t=e.module;t.body||(t.body=sn);var n=t.body,a=n.heading,c=n.message,r=n.variant;return Object(I.jsxs)(on.a,{style:{height:"100%",marginBottom:"0"},variant:r,children:[Object(I.jsx)(on.a.Heading,{children:a}),Object(I.jsx)("p",{children:c})]})},dn=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,566))})),un=Object(a.lazy)((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,567))})),hn=Object(a.lazy)((function(){return n.e(7).then(n.bind(null,569))})),jn=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,570))})),bn=function(e){var t=e.module,n=e.setUnsavedWarning,c=e.hasEditPermission,r=function(){return Object(I.jsx)("div",{children:"Loading..."})};switch(t.type){case"alert":return Object(I.jsx)(ln,{module:t});case"editor-js":return Object(I.jsx)(rn,{module:t,setUnsavedWarning:n,hasEditPermission:c});case"carousel":return Object(I.jsx)(a.Suspense,{fallback:Object(I.jsx)(r,{}),children:Object(I.jsx)(jn,{module:t})});case"html":return Object(I.jsx)(a.Suspense,{fallback:Object(I.jsx)(r,{}),children:Object(I.jsx)(un,{module:t})});case"image":return Object(I.jsx)(a.Suspense,{fallback:Object(I.jsx)(r,{}),children:Object(I.jsx)(dn,{module:t})});case"video":return Object(I.jsx)(a.Suspense,{fallback:Object(I.jsx)(r,{}),children:Object(I.jsx)(hn,{module:t})});default:return Object(I.jsx)(ln,{module:{body:{heading:"Module was not found."}}})}},pn=function(e){var t=e.module,n=e.setModules,c=e.position,r=e.setLayouts,i=e.addIntoLayouts,s=e.warning,l=e.setWarning,d=e.breakpoint,u=e.hasEditPermission,h=Xn().pages,j=Me(),b=j.activeModule,f=j.toggleActiveModule,O=He(),x=Object(o.a)(O,1)[0],g=Object(a.useState)(),v=Object(o.a)(g,2),y=v[0],w=v[1],C=Object(a.useState)("#fff"),N=Object(o.a)(C,2),E=N[0],_=N[1],T=Object(a.useState)(),L=Object(o.a)(T,2),M=L[0],P=L[1];if(!t)return null;var A=t._id===(null===b||void 0===b?void 0:b._id),z=function(e){var t;if("https"===e.substr(0,5))window.open(e,"_blank");else{var n=null===(t=h.find((function(t){return t._id===e})))||void 0===t?void 0:t.path;n&&P(n)}},B={height:"100%",borderRadius:"4px",border:"1px solid ".concat(A&&x&&u?"red":E)},H=t&&"editor-js"===t.type;return M?Object(I.jsx)(se.b,{to:M}):Object(I.jsxs)("div",{style:B,className:"div-card ".concat(x&&!H&&"handle"),onMouseEnter:function(){x&&u&&(w(!0),_("#cce5ff"))},onMouseLeave:function(){w(!1),_("#fff")},children:[Object(I.jsxs)("div",{onClick:function(e){var n;if(x&&u)f(t);else{var a=null===t||void 0===t||null===(n=t.body)||void 0===n?void 0:n.reference;a&&!s&&z(a)}},style:B,children:[x&&!H&&Object(I.jsx)("div",{style:{position:"absolute",zIndex:100,width:"100%",height:"100%",cursor:"pointer"}}),Object(I.jsx)(Ke.SizeMe,{monitorHeight:!0,children:function(e){return e.size.height,Object(I.jsx)(bn,{module:A?b:t,hasEditPermission:u})}})]}),Object(I.jsx)(tt,{position:c,module:t,onPin:function(){l(!0),r((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(F.a)({},d,e[d].map((function(e){return e.i!==t._id?e:Object(p.a)(Object(p.a)({},e),{},{static:!c.static})}))))}))},onRemove:function(){n((function(e){return e.map((function(e){return e._id!==t._id?e:Object(p.a)(Object(p.a)({},e),{},{isRemoved:!0})}))})),l(!0),r((function(e){return{lg:e.lg.filter((function(e){return e.i!==t._id})),md:e.md.filter((function(e){return e.i!==t._id})),sm:e.sm.filter((function(e){return e.i!==t._id}))}}))},showToolbar:y,copyCardToClipboard:function(e){navigator.clipboard.writeText(JSON.stringify(e._id))},createCardCopy:function(e,t){var a=S(),c=k(t);c.i=a,i(c,!0),n((function(t){return[].concat(Object(m.a)(t),[Object(p.a)(Object(p.a)({},e),{},{_id:a})])})),l(!0)},toggleActiveModule:f})]})},mn=function(e){var t=e.showModal,n=e.modules,c=e.addNewModule,r=e.toggleModal,i=Object(a.useState)(),s=Object(o.a)(i,2),l=s[0],u=s[1],h=Object(a.useState)(!1),j=Object(o.a)(h,2),p=j[0],m=j[1],O=function(){var e=Object(H.a)(B.a.mark((function e(){var t,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:if(t=e.sent){e.next=6;break}return u("Your clipboard is empty"),e.abrupt("return");case 6:if(t=t.replaceAll('"',""),!(a=n.find((function(e){return e._id===t})))){e.next=15;break}if(!p){e.next=12;break}return u("Cannot create hard copy, module is already at the page"),e.abrupt("return");case 12:return c(a,p),r(),e.abrupt("return");case 15:d.a.get("".concat(ae,"/modules/").concat(t)).then((function(e){c(e.data,p),r()})).catch((function(e){u(f(e))}));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("hr",{}),Object(I.jsx)("p",{className:"pl-5",children:l?Object(I.jsxs)("span",{style:{color:"red"},children:[Object(I.jsx)(N.b,{})," ",l]}):Object(I.jsx)("em",{children:"or"})}),Object(I.jsx)("hr",{})]})};return Object(I.jsxs)(b.a,{show:t,centered:!0,onHide:r,children:[Object(I.jsx)(b.a.Header,{closeButton:!0,children:Object(I.jsx)(b.a.Title,{children:"New Module"})}),Object(I.jsxs)(b.a.Body,{children:[Object(I.jsx)(T.a,{children:Object(I.jsx)(P.a,{as:"select",onChange:function(e){c({type:e.target.value}),r()},children:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("option",{hidden:!0,value:"",children:"Select type to create empty module"}),["alert","carousel","editor-js","html","image","video"].map((function(e,t){return Object(I.jsx)("option",{value:e,children:e},"".concat(e,"_").concat(t))}))]})})}),Object(I.jsx)(x,{}),Object(I.jsx)(T.a,{children:Object(I.jsx)(_.a.Check,{checked:p,onChange:function(){return m((function(e){return!e}))},label:"hard copy of module (with same id)",type:"checkbox"})}),Object(I.jsx)(oe,{className:"btn-block p-2 mb-2 pl-3 text-left",onClick:O,children:"Click to paste id of module from clipboard"})]})]})},fn={lg:3,md:2,sm:1},On={lg:1199,md:799,sm:599},xn=Object(p.a)({i:"addButton",w:1,h:1,x:0,y:0},{}),gn=function(e){var t=k(e.layouts);return vn(t.lg),Object(p.a)(Object(p.a)({},t),{},{lg:[].concat(Object(m.a)(t.lg),[xn])})},vn=function(e){var t=0,n=0,a=Math.max.apply(Math,[0].concat(Object(m.a)(e.map((function(e){return e.y})))));e.filter((function(e){return e.y===a})).forEach((function(e){e.x>=n&&(n=e.x,t=e.w)})),(n+=t)%3<n&&(a+=1),n%=3,xn.x=n,xn.y=a},yn=function(e){var t=e.initPage;document.title="RG | ".concat(t.title);var n=He(),c=Object(o.a)(n,1)[0],r=function(e){var t,n;return(null===(t=y())||void 0===t?void 0:t.user.isAdmin)||e.created_by._id===(null===(n=y())||void 0===n?void 0:n.user.id)}(t),i=Object(a.useState)(t),s=Object(o.a)(i,2),l=s[0],d=s[1],u=Object(a.useState)(t.modules),h=Object(o.a)(u,2),j=h[0],b=h[1],f=Object(a.useState)(),O=Object(o.a)(f,2),x=O[0],g=O[1],v=et(),w=Object(o.a)(v,3),C=w[0],N=w[1],E=w[2],_=Object(a.useState)(),T=Object(o.a)(_,2),L=T[0],M=T[1],P=function(){return M((function(e){return!e}))},A=Object(a.useState)("lg"),z=Object(o.a)(A,2),R=z[0],D=z[1],U=Object(a.useState)((function(){return gn(t)})),V=Object(o.a)(U,2),q=V[0],J=V[1];console.log(q),Object(a.useEffect)((function(){x&&(b((function(e){return[].concat(Object(m.a)(e),[x])})),N(!0),g())}),[x]);function W(){return(W=Object(H.a)(B.a.mark((function e(t,n){var a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n?t._id:S(),(c=k(xn)).i=a,g(Object(p.a)(Object(p.a)({},t),{},{_id:a})),G(c,void 0!==n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=q[R].find((function(e){return e.i===xn.i}));if(t){var a=n.y,c=(n.x+1)%fn[R];c<n.x&&(a+=1),e.x=c,e.y=a,n.x=c,n.y=a}var r=n.y,i=(n.x+1)%fn[R];return i<n.x&&(r+=1),xn.x=i,xn.y=r,J((function(t){return{sm:[e].concat(Object(m.a)(t.sm)),md:[e].concat(Object(m.a)(t.md)),lg:[e].concat(Object(m.a)(t.lg))}})),e}var Q=function(){return Object(I.jsx)(oe,{className:"add-item-button",onClick:P,children:Object(I.jsx)("span",{children:"+"})})};return q?(console.log("render PAGE"),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(Le,{setModules:b,setWarning:N,children:[y()&&r&&Object(I.jsx)(Qe,{page:l,setPage:d,modules:j,layouts:q,warning:C,setWarning:N}),Object(I.jsxs)($e,{breakpoints:On,cols:fn,layouts:q,compactType:"vertical",onLayoutChange:function(e,t){J(t)},draggableHandle:".handle",onBreakpointChange:function(e){console.log("BREAKPOINT",e),q[e]||function(e,t){var n=fn[e];t||(t=q.lg.sort((function(e,t){return e.y===t.y?e.x-t.x:e.y-t.y})));console.log("---- START (".concat(e,") ---- "));for(var a=[],c=0,r=0,i=0;i<t.length;i++){var o=t[i],s=o.w,l=o.h,d=o.i;s>n&&(s=n);var u=(c+s)%n;u<=c?(0===u?(console.log(d,">> FIT TO THE END"),a.push({x:c,y:r,w:s,h:l,i:d}),u=0):(console.log(d,">> SHIFT TO NEW ROW"),a.push({x:0,y:r,w:s,h:l,i:d})),r+=1):(console.log(d,">> SHIFT TO LEFT"),a.push({x:c,y:r,w:s,h:l,i:d})),c=u}a.forEach((function(e){var t=e.i,n=e.x,a=e.y,c=e.w;return console.log("".concat(t,". [").concat(n,", ").concat(a,"]: ").concat(c))})),console.log("---- END (".concat(e,") ----")),J(Object(p.a)(Object(p.a)({},q),{},Object(F.a)({},e,a)))}(e),D(e)},setWarning:N,isBounded:!0,simulateBreakpoints:r,hasEditPermission:r,style:{backgroundColor:"#eee"},autoSize:!0,children:[q[R].slice(0,-1).map((function(e){var t=j.find((function(t){return t._id===e.i}));return Object(I.jsx)("div",{children:Object(I.jsx)(pn,{module:t,setModules:b,position:e,layouts:q,addIntoLayouts:function(e,t){return G(e,t)},setLayouts:J,warning:C,setWarning:N,breakpoint:R,hasEditPermission:r})},e.i)})),Object(I.jsx)("div",{style:{display:c&&r?"inline":"none"},children:Object(I.jsx)(Q,{})},xn.i)]}),Object(I.jsx)(Re,{}),Object(I.jsx)(mn,{showModal:L,modules:j,addNewModule:function(e,t){return W.apply(this,arguments)},toggleModal:P}),E]})})):null},wn=function(){var e=Object(se.i)().pathname,t=Xn().pages,n=Object(a.useState)(),c=Object(o.a)(n,2),r=c[0],i=c[1],s=function(){return i((function(e){return!e}))};return t.find((function(t){return t.path===e}))?null:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h2",{className:"pt-5",children:"Page not found"}),Object(I.jsxs)("h5",{className:"pb-3",children:["Not match for ",Object(I.jsx)("code",{children:e})]}),y()&&Object(I.jsx)(oe,{onClick:s,children:"Create new page with the path"}),r&&Object(I.jsx)(Ge,{onHide:s,path:e})]})},kn=function(e){var t=Object(E.a)({defaultValues:e.defaultValues}),n=t.register,a=t.handleSubmit;return Object(I.jsxs)("form",{onSubmit:a(e.onSubmit),children:[Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:"Current password"}),Object(I.jsx)(P.a,{type:"password",name:"password",placeholder:"Enter current password",ref:n,required:!0})]}),Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:"New password"}),Object(I.jsx)(P.a,{type:"password",name:"newPassword",placeholder:"Enter new password",ref:n,required:!0})]}),Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:"Confirm new password"}),Object(I.jsx)(P.a,{type:"password",name:"confirmPassword",placeholder:"Confirm new password",ref:n,required:!0})]}),Object(I.jsx)(G,{error:e.error}),Object(I.jsx)($,{className:"btn-block",children:"Save"})]})},Sn=function(e){var t=Object(E.a)({defaultValues:e.defaultValues}),n=t.register,a=t.handleSubmit;return Object(I.jsxs)("form",{onSubmit:a(e.onSubmit),children:[Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:"Name"}),Object(I.jsx)(P.a,{type:"text",name:"name",placeholder:"Enter name",ref:n,required:!0})]}),Object(I.jsxs)(T.a,{children:[Object(I.jsx)(L.a,{children:"Email"}),Object(I.jsx)(P.a,{type:"text",name:"email",placeholder:"Enter email",ref:n,required:!0})]}),Object(I.jsx)(G,{error:e.error}),Object(I.jsx)($,{className:"btn-block",children:"Save"})]})},Cn=function(){var e=Object(a.useState)("profile"),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),i=Object(o.a)(r,2),s=i[0],l=i[1],u=ve().setSuccessToast,h=y(),j=h.user,b=function(e,t){return d.a.patch("".concat(ae,"/").concat(e,"/").concat(j.id),t).then((function(e){return l(null),u("Update succeed"),{ok:!0,data:e}})).catch((function(e){return l(f(e)),{ok:!1,data:e}}))},m={defaultValues:j,onSubmit:"profile"===n?function(e){b("users",e).then((function(t){t.ok&&v(Object(p.a)(Object(p.a)({},h),{},{user:Object(p.a)(Object(p.a)({},j),e)}))}))}:function(e){b("users/password",e).then()},error:s},O=function(e){return n===e?"active":""};return Object(I.jsx)("div",{className:"d-flex align-items-end justify-content-center mt-5",children:Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Profile settings"}),Object(I.jsxs)(re.a,{className:"my-3 btn-block",onClick:function(e){l(null),c(e.target.id)},children:[Object(I.jsx)(oe,{id:"profile",className:O("profile"),children:"Change name"}),Object(I.jsx)(oe,{id:"passwd",className:O("passwd"),children:"Change pass"})]}),"profile"===n?Object(I.jsx)(Sn,Object(p.a)({},m)):Object(I.jsx)(kn,Object(p.a)({},m))]})})},Nn=n(130),En=function(e){var t=e.field,n=e.page,c=e.setPage,r=ve(),i=r.setErrorToast,s=r.setSuccessToast,l=Object(a.useState)(n[t]),u=Object(o.a)(l,1)[0],h=Object(a.useRef)(n[t]);return Object(I.jsx)("td",{style:{maxWidth:"200px",wordWrap:"normal",overflowX:"auto"},id:t,onInput:function(e){h.current=e.currentTarget.textContent},onBlur:function(e){var a=e.currentTarget.textContent;d.a.patch("".concat(ae,"/pages/").concat(n._id),Object(F.a)({},t,a)).then((function(e){s("".concat(t," successfully updated")),c((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(F.a)({},t,a))}))})).catch((function(e){i(f(e)),h.current=u}))},contentEditable:!0,children:h.current},pe()())},_n=function(e){var t,n=e.page,c=e.setPages,r=e.fields,i=Object(a.useState)(n),l=Object(o.a)(i,2),u=l[0],h=l[1],j=ve().serErrorToast,b=null===(t=y())||void 0===t?void 0:t.user.isAdmin,m=b||y().user.id===n.created_by._id,O=["title","path","description"];Object(a.useEffect)((function(){JSON.stringify(n)!==JSON.stringify(u)&&c((function(e){return e.map((function(e){return e._id!==u._id?e:u}))}))}),[u]);var x=function(){d.a.delete("".concat(ae,"/pages/").concat(u._id)).then((function(e){c((function(e){return e.filter((function(e){return e._id!==u._id}))}))})).catch((function(e){j&&j(f(e))}))},g=function(){var e=u.published;return Object(I.jsx)(_.a.Switch,{id:pe()(),checked:e,label:"".concat(e),disabled:!b,onChange:function(){d.a.patch("".concat(ae,"/pages/").concat(u._id),{published:!e}).then((function(t){h((function(t){return Object(p.a)(Object(p.a)({},t),{},{published:!e})}))})).catch((function(e){j(f(e))}))}})},v=function(e){var t,n=e.field,a=u[n];if(function(e){return O.includes(e)}(n)&&m)return Object(I.jsx)(En,{field:n,page:u,setPage:h});("published"===n&&(a=Object(I.jsx)(g,{})),"created_by"===n)&&(a=Object(I.jsx)("span",{children:(null===(t=a)||void 0===t?void 0:t.name)||"unknown"}));return"export"===n&&(a=Object(I.jsx)(oe,{id:"export",variant:"outline-primary",href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(u,null,2))),download:"data.json",children:"Export"})),"remove"===n&&(a=Object(I.jsx)(oe,{id:"remove",variant:"outline-danger",onClick:x,disabled:!m,children:"remove"})),"open"===n&&(a=Object(I.jsx)(oe,{as:s.b,to:u.path,variant:"link",children:"open"})),Object(I.jsx)("td",{id:"".concat(n,"_").concat(u._id),children:a},"".concat(n,"_").concat(u._id))};return Object(I.jsx)("tr",{style:{maxWidth:"200px",wordWrap:"normal",overflowX:"auto"},children:r.map((function(e){return Object(I.jsx)(v,{field:e})}))},u.title)},Tn=function(){var e=Xn(),t=e.pages,n=e.setPages,c=Object(a.useState)(!1),r=Object(o.a)(c,2),i=r[0],s=r[1],l=function(){return s((function(e){return!e}))},d=new Map([["title","Title"],["path","Path"],["description","Description"],["created_by","Author"],["published","Published"],["remove","Remove"],["export","Export"],["open",""]]),u=Object(m.a)(d.values()),h=Object(m.a)(d.keys());return Object(I.jsxs)("div",{style:{margin:"16px"},children:[Object(I.jsx)("h1",{className:"d-inline-block",children:"Pages table"}),Object(I.jsx)(oe,{className:"mb-3 mx-3",onClick:l,children:"Create new Page"}),Object(I.jsxs)(Nn.a,{responsive:!0,children:[Object(I.jsx)("thead",{children:Object(I.jsx)("tr",{children:u.map((function(e){return Object(I.jsx)("th",{children:e},e)}))})}),Object(I.jsx)("tbody",{children:t.map((function(e){return Object(I.jsx)(_n,{page:e,setPages:n,fields:h})}))})]}),Object(I.jsx)(oe,{onClick:l,children:"Create new Page"}),i&&Object(I.jsx)(Ge,{onHide:l,setPages:n,redirect:!1})]})},Ln=function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){console.log("url",e),d.a.get("".concat(ae).concat(e)).then((function(e){r({isLoaded:!0,data:e.data})})).catch((function(e){r({isLoaded:!1,error:e})}))}),[e]),c},Mn=n(260),Pn=function(){return Object(I.jsx)(Mn.a,{animation:"border",className:"m-5"})},An=function(e){var t=e.e;return Object(I.jsx)("h6",{className:"p-5",children:"Error: ".concat(t)})},zn=function(e){var t=e.user,n=e.setUsers,c=e.fields,r=Object(a.useState)(t),i=Object(o.a)(r,2),s=i[0],l=i[1],u=s.isAdmin,h=ve().serErrorToast,b=Object(a.useState)(!1),m=Object(o.a)(b,2),O=m[0],x=m[1],g=function(){return x((function(e){return!e}))},v=function(){var e;return Object(I.jsx)(_.a.Switch,{id:pe()(),checked:u,label:"".concat(u),disabled:!(null===(e=y())||void 0===e?void 0:e.user.isAdmin),onChange:function(){d.a.patch("".concat(ae,"/users/").concat(s._id),{isAdmin:!u}).then((function(e){l((function(e){return Object(p.a)(Object(p.a)({},e),{},{isAdmin:!u})}))})).catch((function(e){h(f(e))}))}})},w=function(){d.a.delete("".concat(ae,"/users/").concat(s._id)).then((function(e){n((function(e){return e.filter((function(e){return e._id!==s._id}))}))})).catch((function(e){h(f(e))}))},k=function(e){var t,n=e.field,a=s[n];return"pages"===n&&(a=Object(I.jsx)(oe,{variant:"outline-primary",onClick:g,disabled:!0,children:"pages"})),"isAdmin"===n&&(a=Object(I.jsx)(v,{})),"avatar"===n&&(a=Object(I.jsx)(j.a,{src:"/".concat(s.avatar,".png"),width:"30",height:"30"})),"register_date"===n&&(a=Object(I.jsx)("p",{children:(t=a,t.substr(0,10).split("-").reverse().join("."))})),"remove"===n&&(a=Object(I.jsx)(oe,{id:"remove",variant:"outline-danger",onClick:w,children:"remove"})),Object(I.jsx)("td",{children:a},n)};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("tr",{children:c.map((function(e){return Object(I.jsx)(k,{field:e})}))},s._id),O&&Object(I.jsx)(Ge,{onHide:g})]})},Bn=function(){var e,t=Ln("/users"),n=t.data,c=t.isLoaded,r=t.error,i=Object(a.useState)(!1),s=Object(o.a)(i,2),l=s[0],d=s[1],u=function(){return d((function(e){return!e}))},h=Object(a.useState)([]),j=Object(o.a)(h,2),b=j[0],p=j[1];if(Object(a.useEffect)((function(){n&&p(n)}),[n]),r)return Object(I.jsx)(An,{e:r.message});if(!c||!n)return Object(I.jsx)(Pn,{});var f=new Map([["avatar",""],["name","Name"],["email","email"],["isAdmin","Admin"],["register_date","Register"],["remove","Remove"]]),O=null===(e=y())||void 0===e?void 0:e.user.isAdmin;O||f.delete("remove");var x=Object(m.a)(f.values()),g=Object(m.a)(f.keys());return Object(I.jsxs)("div",{style:{margin:"16px"},children:[Object(I.jsx)("h1",{children:"Users table"}),Object(I.jsxs)(Nn.a,{responsive:!0,children:[Object(I.jsx)("thead",{children:Object(I.jsx)("tr",{children:x.map((function(e){return Object(I.jsx)("th",{children:e},e)}))})}),Object(I.jsx)("tbody",{children:b.map((function(e){return Object(I.jsx)(zn,{user:e,fields:g,setUsers:p,hasEditPermission:O})}))})]}),O&&Object(I.jsx)(oe,{onClick:u,children:"Create new user"}),l&&Object(I.jsx)(ce,{action:"register",onHide:u,setUsers:p})]})},Fn=n(261),Hn=(n(531),function(e){var t=e.item,n=e.setNavItems,c=e.options,r=e.setWarning,i=Object(a.useState)(t),s=Object(o.a)(i,2),l=s[0],d=s[1];return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"text-center",children:Object(I.jsx)(N.a,{color:"black",className:"handle",size:"20"})}),(null===l||void 0===l?void 0:l.pages.length)>1&&Object(I.jsx)(P.a,{onBlur:function(e){var t=e.target.value;n((function(e){return e.map((function(e){return e._id!==l._id?e:Object(p.a)(Object(p.a)({},e),{},{name:t})}))})),d((function(e){return Object(p.a)(Object(p.a)({},e),{},{name:t})})),r(!0)},onChange:function(e){r(!0)},defaultValue:l.name,placeholder:"Enter dropdown name"}),Object(I.jsx)(Fn.a,{isMulti:!0,isClearable:!1,value:null===l||void 0===l?void 0:l.pages,options:c,onChange:function(e){n((function(t){return t.map((function(t){return t._id!==l._id?t:Object(p.a)(Object(p.a)({},t),{},{pages:e})}))})),d((function(t){return Object(p.a)(Object(p.a)({},t),{},{pages:e})})),r(!0)}})]})}),Rn=n(545),In=n(240),Dn="horizontal",Un=!0,Vn=8,qn={w:1,h:1,y:0},Jn=function(){var e=ve(),t=e.setSuccessToast,n=e.setErrorToast,c=et(),r=Object(o.a)(c,2),i=r[0],s=r[1],l=Xn().pages,u=l.map((function(e){return{value:e._id,label:e.title}})),h=Object(a.useState)({lg:[]}),j=Object(o.a)(h,2),b=j[0],O=j[1],x=Object(a.useState)(),g=Object(o.a)(x,2),v=g[0],w=g[1],k=Object(a.useState)(),C=Object(o.a)(k,2),N=C[0],E=C[1],T=Object(a.useState)("Import local file"),L=Object(o.a)(T,2),M=L[0],P=L[1],A=Object(a.useState)(),z=Object(o.a)(A,2),F=z[0],R=z[1],D=Object(a.useState)(),U=Object(o.a)(D,2),V=U[0],q=U[1],J=Object(a.useState)([]),W=Object(o.a)(J,2),G=W[0],Q=W[1],X=function(e){console.log("data",e);var t=[],n=[];e.items.forEach((function(e){var a=[];e.pages.forEach((function(e){var t=l.find((function(t){return t._id===e}));t&&a.push({value:t._id,label:t.title})})),t.push(Object(p.a)(Object(p.a)({},e),{},{pages:a})),n.push(Object(p.a)({i:e._id,x:e.x},qn))})),t.sort((function(e,t){return e.x-t.x})),console.log("load_items",t),console.log("load_layout",n),q(e._id),w(t),O({lg:n})};Object(a.useEffect)((function(){d.a.get("".concat(ae,"/navbars")).then((function(e){Q(e.data)})).catch((function(e){console.log("error",e)})),d.a.get("".concat(ae,"/navbars/published")).then((function(e){X(e.data),R(e.data._id)})).catch((function(e){console.log("error",e)}))}),[]),Object(a.useEffect)((function(){b.lg.length&&v&&E(K())}),[b,v]);var K=function(){var e=b.lg;return e.sort((function(e,t){return e.x-t.x})),e.map((function(e){var t=Y(e.i);if(!t)return"";if(0===t.pages.length)return"";if(1===t.pages.length)return Z(t.pages[0].value);var n=t.pages.map((function(e){return Z(e.value)}));return[t.name].concat(Object(m.a)(n))})).filter((function(e){return e}))},Y=function(e){return v.find((function(t){return t._id===e}))},Z=function(e){return l.find((function(t){return t._id===e})).title},$=function(e){console.log(e),O({lg:[]});for(var t=[],n=[],a=function(a){if(a>e.length-1){var c=S();return t.push({_id:c,name:"",pages:[]}),n.push(Object(p.a)({i:c,x:a},qn)),"continue"}var r=e[a];if("string"===typeof r){var i=l.find((function(e){return e.title===r})),o=[{value:i._id,label:i.title}],s=S();t.push({_id:s,name:"",pages:o}),n.push(Object(p.a)({i:s,x:a},qn))}else{for(var d=[],u=function(e){var t=l.find((function(t){return t.title===r[e]}));d.push({value:t._id,label:t.title})},h=1;h<r.length;h++)u(h);var j=S();t.push({_id:j,name:r[0],pages:d}),n.push(Object(p.a)({i:j,x:a},qn))}},c=0;c<Vn;c++)a(c);console.log("import_items",t),console.log("import_layout",n),w(t),O({lg:n}),s(!0)},ee=function(){var e=Object(H.a)(B.a.mark((function e(t){var a,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0],console.log("file",a),a){e.next=4;break}return e.abrupt("return");case 4:return P(a.name),(c=new FormData).append("file",a),e.prev=7,e.next=10,d.a.post("".concat(ae,"/navbars/import"),c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){$(e.data.readFile)})).catch((function(e){console.log("err",e),n(f(e))}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),console.log("err",e.t0),n("Upload failed");case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}();function te(){return(te=Object(H.a)(B.a.mark((function e(a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(a),s(!1),R(a._id),e.next=5,d.a.patch("".concat(ae,"/navbars"),{currentId:a._id,prevId:F}).then((function(e){t("change published navbar")})).catch((function(e){console.log("err",e),n(f(e))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(H.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(t),s(!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(H.a)(B.a.mark((function e(a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a._id!==F){e.next=3;break}return n("cannot remove current version"),e.abrupt("return");case 3:return e.next=5,d.a.delete("".concat(ae,"/navbars/")+a._id).then((function(e){t("remove versions succeeded"),Q((function(e){return e.filter((function(e){return e._id!==a._id}))}))})).catch((function(e){n(f(e))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie={borderRadius:"4px",backgroundImage:"linear-gradient( 180deg, rgb(238, 238, 238), white)"},le={backgroundColor:"#fff",flexDirection:"column",margin:"20px",border:"1px solid rgb(33, 37, 41, 30%)",borderRadius:"4px"};return Object(I.jsxs)("div",{className:"",children:[Object(I.jsx)("div",{className:"d-xl-none ml-3",children:Object(I.jsx)("h6",{children:"You have to use larger display to be able to modify content of navigation bar"})}),Object(I.jsx)(Rn.a,{style:{minWidth:"800px"},className:"d-none d-xl-block",children:Object(I.jsx)(In.a,{children:Object(I.jsxs)(Rn.a,{className:"mb-5",children:[Object(I.jsxs)(In.a,{className:"p-5",xs:4,style:ie,children:[Object(I.jsx)(Rn.a,{className:"mb-4",children:Object(I.jsx)(In.a,{children:Object(I.jsxs)(re.a,{style:{width:"100%"},children:[Object(I.jsx)(oe,{onClick:function(){var e,a=b.lg;a.sort((function(e,t){return e.x-t.x}));var c=a.map((function(e){var t,n=Y(e.i);return{x:e.x,pages:(null===n||void 0===n||null===(t=n.pages)||void 0===t?void 0:t.map((function(e){return e.value})))||[],name:null===n||void 0===n?void 0:n.name}}));console.log("updatedItems",c),d.a.post("".concat(ae,"/navbars"),{created_by:null===(e=y())||void 0===e?void 0:e.user._id,items:c}).then((function(e){t("Navbar saved successfully"),Q((function(t){return[].concat(Object(m.a)(t),[e.data])})),s(!1),q(e.data._id),console.log(e)})).catch((function(e){n(f(e))}))},disabled:!i,className:"mr-4 text-black",variant:"success",children:"Save navbar"}),Object(I.jsx)(oe,{title:"export",href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(N))),download:"data.json",children:Object(I.jsx)(Ve.a,{size:"18",color:"white"})})]})})}),Object(I.jsx)(Rn.a,{children:Object(I.jsx)(In.a,{children:Object(I.jsx)(_.a.File,{className:"d-inline-block ",custom:!0,label:M,onChange:ee})})})]}),Object(I.jsx)(In.a,{xs:1}),Object(I.jsx)(In.a,{className:"p-2",xs:7,style:ie,children:Object(I.jsx)(Rn.a,{children:G.map((function(e,t){return Object(I.jsxs)(re.a,{className:"d-flex",style:le,children:[Object(I.jsx)(oe,{onClick:function(){return function(e){return ce.apply(this,arguments)}(e)},variant:"link",children:Object(I.jsx)("span",{children:"\xd7"})}),Object(I.jsx)(oe,{onClick:function(){return function(e){return ne.apply(this,arguments)}(e)},variant:"link",children:Object(I.jsx)("span",{style:{color:e._id===V?"red":"blue"},children:e.create_date.substr(0,16).replace("T",", ")})}),e._id===F?Object(I.jsx)(oe,{variant:"danger",disabled:!0,children:"ACTIVE"}):Object(I.jsx)(oe,{onClick:function(){return function(e){return te.apply(this,arguments)}(e)},variant:"primary",children:"Publish"})]})}))})})]})})}),Object(I.jsx)(Rn.a,{style:{minWidth:"800px"},className:"d-none d-xl-block",children:Object(I.jsx)(In.a,{style:ie,className:"h-100",children:Object(I.jsx)($e,{setWarning:s,breakpoints:{lg:1200},cols:{lg:8},layouts:b,onLayoutChange:function(e,t){O(t)},compactType:Dn,preventCollision:!Dn,measureBeforeMount:!Un,useCSSTransforms:Un,draggableHandle:".handle",isBounded:!0,isResizable:!1,isDraggable:!0,style:{background:"transparent"},children:b.lg.map((function(e){return Object(I.jsx)("div",{style:{background:"transparent"},children:Object(I.jsx)(Hn,{setWarning:s,item:Y(e.i),setNavItems:w,options:u})},e.i)}))})})}),Object(I.jsx)(se.a,{when:i,message:"Changes you made may not be saved."})]})},Wn=["component","onlyAdmin","path"];var Gn=function(e){var t=e.pages,n=e.auth,a=n?t:t.filter((function(e){return e.published})),c=function(e){var t=e.component,a=e.onlyAdmin,c=e.path,r=Object(C.a)(e,Wn),i=n;return a&&(i=null===n||void 0===n?void 0:n.user.isAdmin),Object(I.jsx)(se.c,Object(p.a)({render:function(e){return i?Object(I.jsx)(t,Object(p.a)({},e)):Object(I.jsx)(ce,{action:"login",path:c})}},r))};return Object(I.jsxs)(se.e,{children:[Object(I.jsx)(c,{exact:!0,path:"/profile",component:Cn}),Object(I.jsx)(c,{exact:!0,path:"/pages",component:Tn}),Object(I.jsx)(c,{exact:!0,path:"/users",component:Bn}),Object(I.jsx)(c,{exact:!0,path:"/nav",component:Jn,onlyAdmin:!0}),a.map((function(e){var t={exact:!0,path:e.path,key:pe()(),component:function(){return Object(I.jsx)(yn,{initPage:e})}};return e.published?Object(I.jsx)(se.c,Object(p.a)({},t)):Object(I.jsx)(c,Object(p.a)({},t))})),Object(I.jsx)(se.c,{path:"*",component:wn})]})},Qn=Object(a.createContext)();var Xn=function(){return Object(a.useContext)(Qn)},Kn=function(){var e=Object(a.useState)(y()),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),i=Object(o.a)(r,2),l=i[0],u=i[1],h=Object(a.useState)(),j=Object(o.a)(h,2),b=j[0],p=j[1],m=Object(a.useState)(),f=Object(o.a)(m,2),O=f[0],x=f[1];return Object(a.useEffect)((function(){d.a.get("".concat(ae,"/pages")).then((function(e){x(!0),u(e.data)})).catch((function(e){x(!0),p(e)}))}),[]),b?Object(I.jsx)(An,{e:b.message}):O&&l?Object(I.jsx)(Qn.Provider,{value:{pages:l,setPages:u,setPagesAuth:c,auth:n},children:Object(I.jsx)(Fe,{children:Object(I.jsx)(ge,{children:Object(I.jsxs)(s.a,{children:[Object(I.jsx)(ye,{pages:l}),Object(I.jsx)("div",{className:"main-container",children:Object(I.jsx)(Gn,{pages:l,auth:n})})]})})})}):Object(I.jsx)(Pn,{})};n(537);i.a.render(Object(I.jsxs)(c.a.StrictMode,{children:[Object(I.jsx)(Kn,{}),","]}),document.getElementById("root"))}},[[538,1,2]]]);
//# sourceMappingURL=main.43b08af9.chunk.js.map