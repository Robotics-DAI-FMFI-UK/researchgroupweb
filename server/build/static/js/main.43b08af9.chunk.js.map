{"version":3,"sources":["utils/functions.js","components/forms/MyForm.jsx","utils/hooks/useYupResolver.js","authorization/forms/LoginForm.jsx","authorization/forms/RegisterForm.jsx","config.js","authorization/AuthModal.jsx","components/buttons/SmallButton.jsx","navigation/NavActionBtns.jsx","navigation/user-icon/UserModal.jsx","navigation/user-icon/UserIcon.jsx","navigation/NavBrand.jsx","providers/ToastProvider.js","navigation/Navbar.jsx","custom-page/module/forms/ReferenceField.jsx","custom-page/module/forms/AlertForm.jsx","components/upload/UploadFileMultiple.jsx","custom-page/module/forms/CarouselForm.jsx","custom-page/module/forms/HtmlForm.jsx","custom-page/module/forms/ImageForm.jsx","custom-page/ActiveModuleProvider.jsx","custom-page/module/forms/VideoForm.jsx","custom-page/module/forms/EditForm.jsx","providers/ModeProvider.js","custom-page/Sidebar.jsx","custom-page/Settings.jsx","components/modals/MyModal.jsx","components/modals/NewPageModal.jsx","custom-page/Toolbar.jsx","components/MyGridLayout.jsx","utils/hooks/useWarning.js","custom-page/module/ModuleToolbar.jsx","custom-page/module/types/editor-js/codebox/index.js","custom-page/module/types/editor-js/attaches/uploader.js","custom-page/module/types/editor-js/attaches/index.js","custom-page/module/types/editor-js/custom-timeline/eventTimeline.js","custom-page/module/types/editor-js/custom-timeline/tool.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/HeaderTypeParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/ParagraphTypeParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/ListTypeParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/ImageTypeParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/CheckboxTypeParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/QuoteTypeParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/CodeTypeParser.js","custom-page/module/types/editor-js/markdown/FileHandler.js","custom-page/module/types/editor-js/markdown/MarkdownParser.js","custom-page/module/types/editor-js/markdown/BlockTypeParsers/DelimiterTypeParser.js","custom-page/module/types/editor-js/markdown/MarkdownImporter.js","custom-page/module/types/editor-js/markdown/index.js","custom-page/module/types/editor-js/align-tune/utils.js","custom-page/module/types/editor-js/align-tune/index.js","custom-page/module/types/editor-js/tools.js","custom-page/module/types/editor-js/EditorJS.jsx","custom-page/module/types/Alert.jsx","custom-page/module/ModuleBuilder.jsx","custom-page/module/Module.jsx","custom-page/module/NewModuleModal.jsx","custom-page/CustomPage.jsx","Page404.jsx","profile-settings/forms/UserPassForm.jsx","profile-settings/forms/UserInfoForm.jsx","profile-settings/ProfilePage.jsx","administration/pages/EditableCell.jsx","administration/pages/PageRow.jsx","administration/pages/PagesTable.jsx","utils/hooks/useGetAxios.js","components/Fetchers.jsx","administration/users/UserRow.jsx","administration/users/UsersTable.jsx","navigation/NavSloth.jsx","navigation/NavSloths.jsx","Routes.jsx","App.js","index.js"],"names":["getErrorMsg","err","msg","response","data","message","index","lastIndexOf","substr","trim","setLocaleStorage","key","value","localStorage","setItem","getLocaleStorage","JSON","parse","getItem","delLocaleStorage","removeItem","setAuth","a","stringify","getAuth","upperFirst","str","charAt","toUpperCase","slice","cloneObj","obj","objectId","hex","Math","floor","toString","Date","now","repeat","replace","random","Error","error","style","color","Form","defaultValues","children","onSubmit","handleChange","validationSchema","rest","resolver","useCallback","validate","abortEarly","values","errors","inner","reduce","allErrors","currentError","path","type","useYupResolver","Yup","methods","useForm","handleSubmit","formState","reset","useEffect","Array","isArray","map","child","childName","props","name","onChange","React","createElement","register","Input","label","placeholder","prepend","FormGroup","FormLabel","InputGroup","className","Prepend","Text","FormControl","ref","Select","options","as","hidden","i","Switch","Check","Submit","variant","Button","LoginForm","authError","required","email","password","min","confirmPassword","oneOf","RegisterForm","URL_PREFIX","AuthModal","action","onHide","setUsers","useState","setAuthError","show","setShow","axios","post","then","res","window","location","reload","prev","user","_id","id","catch","title","Modal","centered","Header","closeButton","Title","Body","SmallButton","size","NavActionBtns","loggedOut","setLoggedOut","handleClick","to","Provider","ButtonGroup","onClick","Link","transform","UserModal","showModal","marginTop","width","minWidth","right","left","LoginUser","backdropClassName","backgroundColor","boxShadow","UserIcon","setShowModal","toggleModal","LogoutIcon","LoggedIcon","dataBackdrop","src","rounded","height","NavBrand","history","useHistory","Brand","push","position","top","alt","ToastContext","createContext","ToastProvider","status","toast","setToast","MyToast","Toast","onClose","delay","autohide","setSuccessToast","setErrorToast","useToastContext","useContext","Navbar","pages","useLocation","navItems","setNavItems","hasEditPermission","isAdmin","get","items","forEach","item","itemPages","pageId","page","find","p","published","length","sort","b","x","e","CustomNavs","navItem","SingleNavLink","DropDown","uuid","isActive","pathname","Nav","hasActive","NavDropdown","Item","collapseOnSelect","expand","bg","zIndex","justifyContent","marginBottom","marginLeft","Toggle","Collapse","navbar","activeKey","ReferenceField","activeModule","usePagesContext","reference","body","refPage","defaultSelected","selected","setSelected","menuContainerStyle","bottom","isClearable","option","console","log","target","AlertForm","rows","UploadFileMultiple","onUploadChange","setItems","files","uploadFiles","formData","FormData","append","headers","filePath","filter","img","File","multiple","custom","accept","CarouselForm","defaultItem","checkValues","useRef","indicators","controls","allowPause","fade","onCheckChange","current","image","update","maxWidth","maxHeight","HtmlForm","embed","ImageForm","memo","filename","setFilename","file","ActiveModuleContext","ActiveModuleProvider","setModules","setWarning","setActiveModule","originModule","setOriginModule","updateModules","module","m","toggleActiveModule","undefined","updateActiveModule","closeActiveModule","useActiveModuleContext","VideoFrom","formFactory","VideoForm","EditForm","origin","patch","ModuleForm","ModeContext","ModeProvider","editMode","setEditMode","useModeContext","Sidebar","side","setSide","oppositeSide","openSidebar","paddingTop","minHeight","overflowY","transition","Settings","setPage","setError","setPages","addedPath","setAddedPath","updatedPage","checked","Footer","created_by","delete","MyModal","footer","notOneOf","matches","NewPageModal","redirect","preventDefault","endPoint","copy","layouts","newPage","newModules","modules","createFromImport","rawPage","updateFromImport","importData","readFile","template","NewPageForm","defaultValue","Toolbar","warning","toggleMode","modal","vertical","href","encodeURIComponent","download","layoutsWithoutAddBtn","lg","md","sm","updatedModules","removeIds","isRemoved","splitModules","disabled","ResponsiveGridLayout","WidthProvider","Responsive","MyGridLayout","compactType","animated","isResizable","isDraggable","margin","simulateBreakpoints","breakpoints","prevSize","setPrevSize","setWidth","isChanged","oldItem","newItem","onDragStop","layout","onResizeStop","ViewToolbar","ViewButton","breakpoint","active","fontWeight","handleSizeChange","measureBeforeMount","useCSSTransforms","rowHeight","useWarning","Prompt","when","onbeforeunload","ModuleToolbar","onPin","onRemove","showToolbar","onShrink","copyCardToClipboard","createCardCopy","isPinned","static","styleDragButton","paddingBottom","marginRight","cursor","onDoubleClick","require","CodeBox","config","api","readOnly","this","i18n","t","DEFAULT_PLACEHOLDER","CSS","baseClass","styles","block","input","wrapper","textarea","select","languageList","code","nodes","holder","picker","languageCode","drawView","document","language","hasOwnProperty","text","appendChild","classList","add","textContent","codeWrapper","querySelector","event","content","detail","_data","icon","tags","Uploader","onUpload","onError","onPreview","ajax","transport","url","endpoint","types","beforeSend","fieldName","field","errorMessage","Icon","AttachesTool","button","buttonText","uploader","uploadingFailed","enableFileUpload","bind","apiButton","loader","wrapperWithFile","wrapperLoading","downloadButton","fileInfo","fileIcon","doc","docx","odt","pdf","rtf","tex","txt","pptx","ppt","mp3","mp4","xls","html","htm","png","jpg","jpeg","gif","zip","rar","exe","svg","sketch","ai","psd","dmg","json","csv","toolsContent","pluginHasData","innerHTML","Object","assign","make","showFileData","prepareUploadButton","addEventListener","click","some","uploadSelectedFile","success","extension","split","pop","remove","moveCaretToEnd","focus","removeLoader","extensionColor","EXTENSIONS","setAttribute","setTimeout","appendFileIcon","contentEditable","sizePrefix","formattedSize","fileSize","log10","pow","toFixed","downloadIcon","rel","notifier","element","range","createRange","selection","getSelection","selectNodeContents","collapse","removeAllRanges","addRange","tagName","classNames","attributes","el","attrName","DEFAULT_INITIAL_DATA","events","time","description","EventTimeline","timelineData","setTimelineData","updateTimelineData","newData","onDataChange","onContentChange","currentTarget","onBlur","fontSize","splice","onRemoveEvent","listStyle","Timeline","rootNode","ReactDOM","render","parseHeaderToMarkdown","blocks","level","parseMarkdownToHeader","headerData","depth","parseMarkdownToParagraph","paragraphData","caption","stretched","withBackground","withBorder","parseListToMarkdown","parseMarkdownToList","itemData","listItem","listEntry","ordered","parseImageToMarkdown","concat","parseCheckboxToMarkdown","join","parseQuoteToMarkdown","parseMarkdownToQuote","quoteData","alignment","parseCodeToMarkdown","fileDownloadHandler","fileName","endings","URL","createObjectURL","revokeObjectURL","removeChild","MarkdownParser","getContent","today","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","initialData","saver","save","editorData","MDParser","MDImporter","parseMarkdown","fileUpload","getElementById","onchange","reader","FileReader","readAsText","onload","readerEvent","result","remark","clear","keys","AlignmentBlockTune","settings","getAlignment","alignmentSettings","_CSS","center","default","DEFAULT_ALIGNMENT","blockContent","toggle","align","settingsButton","settingsButtonActive","elements","EDITOR_JS_TOOLS","codeBox","attaches","class","checkList","CheckList","delimiter","Delimiter","alignTune","marker","Marker","inlineCode","InlineCode","paragraph","Paragraph","inlineToolbar","list","List","header","tunes","Html","table","Table","alert","Alert","markdownParser","markdownImporter","timeline","ImageTool","endpoints","byFile","byUrl","EditorJS","editor","handleSave","savedData","updatedModule","instanceRef","instance","tools","onReady","Undo","DragDrop","heading","Heading","SuspendImage","lazy","SuspendHtml","SuspendVideo","SuspendCarousel","ModuleBuilder","setUnsavedWarning","Fallback","fallback","Module","setLayouts","addIntoLayouts","setShowToolbar","borderColor","setBorderColor","redirectPath","setRedirectPath","redirectTo","open","borderRadius","border","isException","onMouseEnter","onMouseLeave","monitorHeight","l","navigator","clipboard","writeText","newId","position_copy","NewModuleModal","addNewModule","hardCopy","setHardCopy","createCopy","readText","replaceAll","localModule","cols","addButton","w","h","y","getInitLayouts","initPage","initLayouts","findLastPosition","max","CustomPage","getUserPermission","newModule","setNewModule","setBreakpoint","module_id","last","lastPosition","newY","newX","AddButton","onLayoutChange","draggableHandle","onBreakpointChange","bp","WIDTH","autoLayout","last_x","last_y","mod","shiftLayout","isBounded","autoSize","display","Page404","UserInfoForm","ProfilePage","form","setForm","auth","ok","UserPassForm","EditableCell","originState","wordWrap","overflowX","onInput","PageRow","_page","fields","serErrorToast","editableFields","removePage","Cell","includes","isEditable","PageTable","columns","Map","responsive","head","useGetAxios","state","setState","isLoaded","FetchLoading","Spinner","animation","FetchError","UserRow","_user","setUser","date","avatar","reverse","UsersTable","users","NavSloth","_item","s","isMulti","MAX_SLOTHS","why","NavSloths","setLayout","exportData","setExportData","publishedId","setPublishedId","currentId","setCurrentId","navbarVersions","setNavbarVersions","loadNavbarData","load_items","load_layout","item_pages","processExportData","sortLayout","getPageTitle","titles","processImportData","import_items","import_layout","prevId","prevState","nav","cardStyle","backgroundImage","navCardStyle","flexDirection","Row","Col","xs","updatedItems","version","removeVersion","changeVersion","create_date","publishVersion","preventCollision","background","sloth","Routes","visiblePages","PrivateRoute","Component","component","onlyAdmin","hasAccess","exact","PagesContext","App","setPagesAuth","loaded","setLoaded","StrictMode"],"mappings":"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","file":"static/js/main.43b08af9.chunk.js","sourcesContent":["/** Setup config/headers and token */\nexport const tokenConfig = () => {\n  const token = getAuth()?.token;\n  const config = {\n    headers: { \"Content-type\": \"application/json\" },\n  };\n  if (token) {\n    config.headers[\"x-auth-token\"] = token;\n  }\n  return config;\n};\n\n/** two types of error message:\n * 1) from mongo schema e.g: \"page validation failed: path: Not valid url path\"\n * 2) from mongo routes e.g: \"New password is the same as the current\" */\nexport const getErrorMsg = (err) => {\n  try {\n    const msg = err.response.data.message;\n    const index = msg.lastIndexOf(\":\");\n    const isRouteError = index === -1;\n    return isRouteError ? msg : msg.substr(index + 1).trim();\n  } catch (err) {\n    return \"Error occurred\";\n  }\n};\n\nconst setLocaleStorage = (key, value) => localStorage.setItem(key, value);\nconst getLocaleStorage = (key) => JSON.parse(localStorage.getItem(key));\nconst delLocaleStorage = (key) => localStorage.removeItem(key);\n\nexport const setAuth = (a) => setLocaleStorage(\"auth\", JSON.stringify(a));\nexport const getAuth = () => getLocaleStorage(\"auth\");\nexport const delAuth = () => delLocaleStorage(\"auth\");\n\nexport const setEdit = () => setLocaleStorage(\"edit\", \"true\");\nexport const getEdit = () => getLocaleStorage(\"edit\");\nexport const delEdit = () => delLocaleStorage(\"edit\");\n\nexport const getUserPermission = (initPage) => {\n  return (\n    getAuth()?.user.isAdmin || initPage.created_by._id === getAuth()?.user.id\n  );\n};\n\nexport const upperFirst = (str) => {\n  if (typeof str !== \"string\") return \"\";\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nexport const cloneObj = (obj) => JSON.parse(JSON.stringify(obj));\n\nexport const formatDate = (date) => {\n  return date.substr(0, 10).split(\"-\").reverse().join(\".\");\n};\n\nexport const isEmptyObject = (obj) => {\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) return false;\n  }\n  return true;\n};\n\nexport const reloadPage = () => window.location.reload(false);\n\nexport const splitModules = (modules, activeModule) => {\n  const updatedModules = [];\n  const removeIds = [];\n\n  modules.forEach((module) => {\n    if (module.isRemoved) {\n      removeIds.push(module._id);\n    } else {\n      const isActive = activeModule?._id === module._id;\n      updatedModules.push(isActive ? activeModule : module);\n    }\n  });\n\n  return { updatedModules, removeIds };\n};\n\n// https://stackoverflow.com/questions/10593337/is-there-any-way-to-create-mongodb-like-id-strings-without-mongodb\nexport const objectId = () => {\n  function hex(value) {\n    return Math.floor(value).toString(16);\n  }\n\n  return (\n    hex(Date.now() / 1000) +\n    \" \".repeat(16).replace(/./g, () => hex(Math.random() * 16))\n  );\n};\n\n// https://stackoverflow.com/a/18358056/15440273\nexport const roundToTwo = (num) => {\n  return +(Math.round(num + \"e+2\") + \"e-2\");\n};\n\n// https://stackoverflow.com/a/38181008/15440273\nexport const insert = (arr, index, newItem) => [\n  // part of the array before the specified index\n  ...arr.slice(0, index),\n  // inserted item\n  newItem,\n  // part of the array after the specified index\n  ...arr.slice(index),\n];\n","import React, { useEffect } from \"react\";\nimport { BsExclamationTriangle } from \"react-icons/bs\";\nimport { useForm } from \"react-hook-form\";\nimport {\n  Button,\n  Form as F,\n  FormControl,\n  FormGroup,\n  FormLabel,\n  InputGroup,\n} from \"react-bootstrap\";\n\nimport { useYupResolver } from \"../../utils/hooks/useYupResolver\";\nimport * as Yup from \"yup\";\nimport { upperFirst } from \"../../utils/functions\";\n\nexport const Error = ({ error }) => {\n  if (!error) return null;\n  return (\n    <p style={{ color: \"red\" }}>\n      <BsExclamationTriangle /> {error}\n    </p>\n  );\n};\n\n// src: https://react-hook-form.com/advanced-usage/#SmartFormComponent\n// export const Forms = React.memo((props => ))\nexport function Form({\n  defaultValues,\n  children,\n  onSubmit,\n  handleChange,\n  validationSchema,\n  ...rest\n}) {\n  const resolver = useYupResolver(validationSchema || Yup.object({}));\n  const methods = useForm({\n    resolver,\n    defaultValues,\n  });\n\n  const {\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = methods;\n\n  useEffect(() => {\n    reset(defaultValues);\n  }, [defaultValues]);\n\n  const renderChild = (child) => {\n    if (!child) return null;\n\n    const childName = child.props?.name;\n    const onChange = child.props?.onChange || handleChange;\n    // const value = defaultValues ? defaultValues[childName] : undefined;\n    return (\n      <>\n        {childName\n          ? React.createElement(child.type, {\n              ...{\n                ...child.props,\n                onChange: onChange,\n                register: methods.register,\n                key: child.props.name,\n                // value: value,\n              },\n            })\n          : child}\n        {errors[childName] && <Error error={errors[childName].message} />}\n      </>\n    );\n  };\n\n  return (\n    <F onSubmit={handleSubmit(onSubmit)} {...rest}>\n      {Array.isArray(children) ? children.map(renderChild) : children}\n    </F>\n  );\n}\n\nexport function Input({\n  register,\n  label,\n  placeholder,\n  type = \"text\",\n  prepend,\n  ...rest\n}) {\n  label = label || rest.name;\n  placeholder = placeholder ? placeholder : `Enter ${label}`;\n\n  return (\n    <FormGroup>\n      <FormLabel>{upperFirst(label)}</FormLabel>\n      {prepend ? (\n        <InputGroup className=\"mb-2\">\n          <InputGroup.Prepend>\n            <InputGroup.Text>{prepend}</InputGroup.Text>\n          </InputGroup.Prepend>\n          <FormControl\n            type={type}\n            placeholder={placeholder}\n            ref={register}\n            {...rest}\n          />\n          {/*<Control />*/}\n        </InputGroup>\n      ) : (\n        <FormControl\n          type={type}\n          placeholder={placeholder}\n          ref={register}\n          {...rest}\n        />\n        // <Control />\n      )}\n    </FormGroup>\n  );\n}\n\nexport function Select({ register, options, label, ...rest }) {\n  label = label || rest.name;\n\n  const selectOptions = () => {\n    return (\n      <>\n        <option hidden value=\"\">\n          Select option ...\n        </option>\n        {options.map((value, i) => (\n          <option key={`${value}_${i}`} value={value}>\n            {value}\n          </option>\n        ))}\n      </>\n    );\n  };\n\n  return (\n    <FormGroup>\n      <FormLabel>{upperFirst(label)}</FormLabel>\n      <FormControl as=\"select\" label={label} ref={register} {...rest}>\n        {selectOptions()}\n      </FormControl>\n    </FormGroup>\n  );\n}\n\nexport function Switch({ register, label, ...rest }) {\n  label = label || rest.name;\n\n  return (\n    <FormGroup>\n      <F.Switch label={upperFirst(label)} ref={register} {...rest} />\n    </FormGroup>\n  );\n}\n\nexport function Check({ register, label, ...rest }) {\n  label = label || rest.name;\n\n  return (\n    <FormGroup>\n      <input ref={register} type=\"checkbox\" {...rest} />\n      <span className=\"px-2\">{label}</span>\n    </FormGroup>\n  );\n}\n\nexport function Submit({ register, variant = \"dark\", ...rest }) {\n  return (\n    <Button type=\"submit\" className=\"btn-block\" variant={variant} {...rest} />\n  );\n}\n","import { useCallback } from \"react\";\n\n// https://react-hook-form.com/advanced-usage/#CustomHookwithResolver\nexport const useYupResolver = (validationSchema) =>\n  useCallback(\n    async (data) => {\n      try {\n        const values = await validationSchema.validate(data, {\n          abortEarly: false,\n        });\n\n        return {\n          values,\n          errors: {},\n        };\n      } catch (errors) {\n        return {\n          values: {},\n          errors: errors.inner.reduce(\n            (allErrors, currentError) => ({\n              ...allErrors,\n              [currentError.path]: {\n                type: currentError.type ?? \"validation\",\n                message: currentError.message,\n              },\n            }),\n            {}\n          ),\n        };\n      }\n    },\n    [validationSchema]\n  );\n","import React from \"react\";\nimport { Form, Error, Input, Submit } from \"../../components/forms/MyForm\";\n\nconst LoginForm = ({ handleSubmit, authError }) => {\n  return (\n    <Form onSubmit={handleSubmit} className=\"my-form\">\n      <Input name=\"email\" required />\n      <Input name=\"password\" type=\"password\" required />\n      <Error error={authError} />\n      <Submit className=\"btn-block\">Login</Submit>\n    </Form>\n  );\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport { Form, Input, Submit, Error } from \"../../components/forms/MyForm\";\nimport * as Yup from \"yup\";\n\nconst validationSchema = Yup.object({\n  email: Yup.string().email(),\n  password: Yup.string().min(4, \"Use at least 4 characters\"),\n  confirmPassword: Yup.string().oneOf(\n    [Yup.ref(\"password\"), null],\n    \"Passwords must match\"\n  ),\n});\n\nconst RegisterForm = ({ handleSubmit, authError }) => {\n  return (\n    <Form onSubmit={handleSubmit} validationSchema={validationSchema}>\n      <Input name=\"name\" required />\n      {/*rules={{ minLength: { value: 5, message: \"error message\" } }}*/}\n      <Input name=\"email\" required />\n      <Input name=\"password\" type=\"password\" required />\n      <Input\n        name=\"confirmPassword\"\n        type=\"password\"\n        placeholder=\"Confirm password\"\n        required\n      />\n      <Error error={authError} />\n      <Submit className=\"btn-block\">Register</Submit>\n    </Form>\n  );\n};\n\nexport default RegisterForm;\n","export const URL_PREFIX = \"https://kempelen.dai.fmph.uniba.sk:4000/api\";\n\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  setAuth,\n  getErrorMsg,\n  upperFirst,\n  reloadPage,\n} from \"../utils/functions\";\nimport LoginForm from \"./forms/LoginForm.jsx\";\nimport RegisterForm from \"./forms/RegisterForm\";\nimport { Modal } from \"react-bootstrap\";\nimport { URL_PREFIX } from \"../config\";\nimport { Redirect } from \"react-router-dom\";\nimport { usePagesContext } from \"../App\";\n\n/** action: \"login\" or \"register\" */\nconst AuthModal = ({ action, onHide, setUsers, path }) => {\n  // const { setPagesAuth } = usePagesContext();\n\n  const [authError, setAuthError] = useState();\n  const [show, setShow] = useState(true);\n  const fallback = () => setShow(false);\n  // const [logged, setLogged] = useState(false);\n\n  const handleSubmit = (data) => {\n    axios\n      .post(`${URL_PREFIX}/auth/${action}`, data)\n      .then((res) => {\n        if (action === \"login\") {\n          // setPagesAuth(res.data);\n          // setLogged(true);\n          setAuth(res.data);\n          reloadPage();\n        } else {\n          setUsers((prev) => [\n            ...prev,\n            {\n              ...res.data.user,\n              _id: res.data.user.id,\n            },\n          ]);\n          onHide();\n        }\n      })\n      .catch((err) => {\n        setAuthError(getErrorMsg(err));\n      });\n  };\n\n  const props = { handleSubmit, authError };\n  const title = `${upperFirst(action)} form`;\n\n  // if (logged) {\n  //   return <Redirect to={`${path || \"/\"}`} />;\n  // }\n\n  return (\n    <Modal show={show} onHide={onHide || fallback} centered>\n      <Modal.Header closeButton>\n        <Modal.Title className=\"text-center mx-0\">{title}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        {action === \"login\" ? (\n          <LoginForm {...props} />\n        ) : (\n          <RegisterForm {...props} />\n        )}\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default AuthModal;\n","import React from \"react\";\nimport Button from \"react-bootstrap/Button\";\n\nconst SmallButton = ({ variant = \"dark\", className, ...rest }) => {\n  return <Button variant={variant} size=\"sm\" className={className} {...rest} />;\n};\n\nexport default SmallButton;\n","import React, { useState } from \"react\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { BsFiles, BsPeopleFill, BsPersonLinesFill } from \"react-icons/bs\";\nimport { BiLogOut } from \"react-icons/bi\";\nimport { IconContext } from \"react-icons\";\nimport { delAuth } from \"../utils/functions\";\n\nconst NavActionBtns = ({ onHide }) => {\n  const [loggedOut, setLoggedOut] = useState(false);\n\n  const logout = () => {\n    delAuth();\n    setLoggedOut(true);\n  };\n\n  const handleClick = () => {\n    if (onHide) onHide();\n  };\n\n  if (loggedOut) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <IconContext.Provider value={{ size: \"20\", color: \"white\" }}>\n      <ButtonGroup className=\"w-100\">\n        <SmallButton\n          onClick={() => handleClick()}\n          as={Link}\n          to=\"/pages\"\n          title=\"pages\"\n        >\n          <BsFiles />\n        </SmallButton>\n        {/*{user.admin && (*/}\n        <SmallButton\n          onClick={() => handleClick()}\n          as={Link}\n          to=\"/users\"\n          title=\"users\"\n        >\n          <BsPeopleFill />\n        </SmallButton>\n        {/*)}*/}\n        <SmallButton\n          onClick={() => handleClick()}\n          as={Link}\n          to=\"/profile\"\n          title=\"profile\"\n        >\n          <BsPersonLinesFill />\n        </SmallButton>\n        <SmallButton onClick={logout} title=\"logout\">\n          <BiLogOut style={{ transform: \"scaleX(-1)\" }} />\n        </SmallButton>\n      </ButtonGroup>\n    </IconContext.Provider>\n  );\n};\n\nexport default NavActionBtns;\n","import React from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport AuthModal from \"../../authorization/AuthModal\";\nimport { getAuth } from \"../../utils/functions\";\nimport NavActionBtns from \"../NavActionBtns\";\n\nconst UserModal = ({ onHide, showModal }) => {\n  const user = getAuth()?.user;\n\n  const style = {\n    marginTop: \"2.4em\",\n    width: \"15%\",\n    minWidth: \"300px\",\n    right: \"5px\",\n    left: \"unset\"\n  };\n\n  const LoginUser = () => (\n    <Modal show={showModal} onHide={onHide} style={style} backdropClassName=\"user-modal\" className=\"d-none d-lg-block\">\n      <Modal.Body style={{\n        backgroundColor: \"#eee\",\n        boxShadow: \"3px 3px 10px 0px gray\"\n      }}>\n        <h2>{user.name}</h2>\n        <p>{user.email}</p>\n        <NavActionBtns onHide={onHide}/>\n      </Modal.Body>\n    </Modal>\n  );\n\n  return <>{user ? <LoginUser /> : <AuthModal action=\"login\" />}</>;\n};\n\nexport default UserModal;\n","import React, { useState } from \"react\";\nimport Image from \"react-bootstrap/Image\";\nimport UserModal from \"./UserModal\";\nimport { getAuth } from \"../../utils/functions\";\nimport { BiLogIn } from \"react-icons/bi\";\nimport NavActionBtns from \"../NavActionBtns\";\n\nexport const UserIcon = () => {\n  const [showModal, setShowModal] = useState();\n  const toggleModal = () => setShowModal((prev) => !prev);\n\n  const LogoutIcon = () => {\n    return (\n      <div className=\"text-center\" onClick={toggleModal}>\n        <BiLogIn className=\"login-btn\" title=\"login\" />\n      </div>\n    );\n  };\n\n  const LoggedIcon = () => {\n    return (\n      <>\n        <div\n          className=\"d-none d-lg-block\"\n          dataBackdrop=\"false\"\n          onClick={toggleModal}\n        >\n          <Image\n            src={`/defaultAvatar.png`}\n            rounded\n            className=\"p-1\"\n            style={{\n              width: \"40px\",\n              height: \"40px\",\n            }}\n          />\n        </div>\n        <div className=\"d-lg-none\">\n          <NavActionBtns />\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <div>\n      {getAuth() ? <LoggedIcon /> : <LogoutIcon />}\n      {showModal && <UserModal onHide={toggleModal} showModal={showModal} />}\n    </div>\n  );\n};\n","import React from \"react\";\nimport Image from \"react-bootstrap/Image\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport { useHistory } from \"react-router\";\n\nconst NavBrand = () => {\n  const history = useHistory();\n\n  return (\n    <>\n      <Navbar.Brand\n        onClick={() => history.push(\"/\")}\n        className=\"mr-0 mr-lg-2\"\n        style={{ position: \"absolute\", left: \"5px\", top: \"0px\" }}\n      >\n        <Image\n          alt=\"logo\"\n          className=\"img-logo\"\n          src=\"/logo.png\"\n          width=\"90\"\n          height=\"90\"\n        />\n      </Navbar.Brand>\n    </>\n  );\n};\n\nexport default NavBrand;\n","import React, { useContext, useState, createContext } from \"react\";\nimport Toast from \"react-bootstrap/Toast\";\n\nconst ToastContext = createContext();\n\nexport const ToastProvider = ({ children }) => {\n  const [toast, setToast] = useState({\n    status: \"\", // \"succeeded\" | \"failed\"\n    message: \"\", // custom message\n  });\n\n  const setSuccessToast = (msg) => {\n    setToast({ status: \"succeeded\", message: msg });\n  };\n\n  const setErrorToast = (msg) => {\n    setToast({ status: \"error\", message: msg });\n  };\n\n  const MyToast = () => {\n    const backgroundColor =\n      toast.status === \"succeeded\" ? \"#aeffad\" : \"#ffabab\";\n\n    const color = toast.status === \"succeeded\" ? \"#29a224\" : \"#b12626\";\n\n    return (\n      <Toast\n        className=\"my-toast\"\n        onClose={() => setToast()}\n        show={toast}\n        delay={3000}\n        autohide\n        style={{ backgroundColor }}\n      >\n        <Toast.Header>\n          <strong className=\"mr-auto\">Notification</strong>\n          <small>just now</small>\n        </Toast.Header>\n        <Toast.Body>\n          <strong style={{ color }}>{toast.message}</strong>\n        </Toast.Body>\n      </Toast>\n    );\n  };\n\n  return (\n    <ToastContext.Provider value={{ toast, setSuccessToast, setErrorToast }}>\n      {toast?.message && <MyToast />}\n      {children}\n    </ToastContext.Provider>\n  );\n};\n\nexport const useToastContext = () => useContext(ToastContext);\n","import React, { useEffect, useState } from \"react\";\nimport Nav from \"react-bootstrap/Nav\";\nimport { Navbar as BsNavbar } from \"react-bootstrap\";\nimport { UserIcon } from \"./user-icon/UserIcon\";\nimport { useLocation } from \"react-router\";\nimport uuid from \"react-uuid\";\nimport NavBrand from \"./NavBrand\";\nimport axios from \"axios\";\nimport { NavDropdown } from \"react-bootstrap\";\nimport { getAuth } from \"../utils/functions\";\nimport { BsPencil } from \"react-icons/bs\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport { Link } from \"react-router-dom\";\nimport { URL_PREFIX } from \"../config\";\nimport { useToastContext } from \"../providers/ToastProvider\";\n\nconst Navbar = ({ pages }) => {\n  const location = useLocation();\n  const { setErrorToast } = useToastContext();\n\n  const [navItems, setNavItems] = useState([]);\n  const hasEditPermission = getAuth()?.user.isAdmin;\n\n  useEffect(() => {\n    axios\n      .get(`${URL_PREFIX}/navbars/published`)\n      .then((res) => {\n        const items = [];\n\n        res.data.items.forEach((item) => {\n          const itemPages = [];\n\n          item.pages.forEach((pageId) => {\n            const page = pages.find(\n              (p) => p._id === pageId && (p.published || hasEditPermission)\n            );\n            if (page) {\n              itemPages.push({\n                path: page.path,\n                title: page.title,\n              });\n            }\n          });\n\n          if (itemPages.length) {\n            item.pages = itemPages;\n            items.push(item);\n          }\n        });\n\n        items.sort((a, b) => a.x - b.x);\n        setNavItems(items);\n      })\n      .catch((e) => {\n        setErrorToast(\"Failed to load navigation\");\n      });\n  }, []);\n\n  const CustomNavs = () => {\n    return navItems.map((navItem) => {\n      return (\n        <div key={uuid()}>\n          {navItem.pages.length === 1 ? (\n            <SingleNavLink navItem={navItem} />\n          ) : (\n            <DropDown navItem={navItem} />\n          )}\n        </div>\n      );\n    });\n  };\n\n  const SingleNavLink = ({ navItem }) => {\n    const isActive = location.pathname === navItem.pages[0].path;\n\n    return (\n      <Nav.Link\n        as={Link}\n        to={navItem.pages[0].path}\n        className={`text-center ${isActive && \"active-link\"}`}\n      >\n        {navItem.pages[0].title}\n      </Nav.Link>\n    );\n  };\n\n  const DropDown = ({ navItem }) => {\n    const hasActive = navItem.pages.find((p) => p.path === location.pathname);\n\n    return (\n      <NavDropdown\n        title={navItem.name || \"Dropdown\"}\n        key={navItem._id}\n        id={navItem._id}\n        className={`text-center ${hasActive && \"active-link\"}`}\n      >\n        {navItem.pages.map((page) => {\n          const isActive = page.path === hasActive?.path;\n          return (\n            <NavDropdown.Item\n              as={Link}\n              to={page.path}\n              key={page.path}\n              className={`text-center ${isActive && \"active-drop-link\"}`}\n            >\n              {page.title}\n            </NavDropdown.Item>\n          );\n        })}\n      </NavDropdown>\n    );\n  };\n\n  return (\n    <>\n      <BsNavbar\n        collapseOnSelect\n        expand=\"lg\"\n        bg=\"dark\"\n        variant=\"dark\"\n        style={{ zIndex: 1001, justifyContent: \"flex-end\" }}\n      >\n        <NavBrand />\n        {/*<SearchBar />*/}\n        <h6\n          className=\"d-none d-xl-block\"\n          style={{\n            marginBottom: \"0\",\n            marginLeft: \"100px\",\n            color: \"white\",\n          }}\n        >\n          ROBOT GROUP, DAI FMFI UK\n        </h6>\n        <BsNavbar.Toggle />\n        <BsNavbar.Collapse>\n          <Nav className=\"ml-auto\" navbar activeKey={location.pathname}>\n            {hasEditPermission && (\n              <SmallButton\n                as={Link}\n                to=\"/nav\"\n                title=\"edit navbar\"\n                className=\"pt-2\"\n              >\n                <BsPencil size=\"15\" color=\"white\" />\n              </SmallButton>\n            )}\n            <CustomNavs />\n            <UserIcon />\n          </Nav>\n        </BsNavbar.Collapse>\n      </BsNavbar>\n    </>\n  );\n};\n\nexport default Navbar;\n","import React, { useState } from \"react\";\nimport CreatableSelect from \"react-select/creatable/dist/react-select.esm\";\nimport { usePagesContext } from \"../../../App\";\n\nconst ReferenceField = ({ activeModule, handleChange }) => {\n  const { pages } = usePagesContext();\n\n  const options = pages.map((page) => {\n    return { value: page._id, label: page.title };\n  });\n\n  const defaultSelected = () => {\n    const reference = activeModule?.body?.reference;\n    if (!reference) return;\n\n    const isExternalRef = reference.substr(0, 5) === \"https\";\n    if (isExternalRef) {\n      return {\n        value: reference,\n        label: reference, //.substr(8),\n      };\n    }\n\n    const refPage = options.find(\n      (ref) => ref.value === activeModule.body.reference\n    );\n\n    if (!refPage) return;\n    return {\n      value: refPage._id,\n      label: refPage.label,\n    };\n  };\n\n  const selectOption = (option) => {\n    console.log(\"ee\", option);\n    setSelected(option);\n    handleChange({\n      target: {\n        name: \"reference\",\n        value: option.value,\n      },\n    });\n  };\n\n  const [selected, setSelected] = useState(defaultSelected());\n\n  return (\n    <div style={{ marginBottom: \"16px\" }}>\n      <hr />\n      <label className=\"form-label\">Page reference</label>\n      <CreatableSelect\n        menuContainerStyle={{ top: \"auto\", bottom: \"100%\" }}\n        isClearable\n        value={selected}\n        onChange={selectOption}\n        options={options}\n      />\n    </div>\n  );\n};\n\nexport default ReferenceField;\n","import React from \"react\";\nimport { Form, Input, Select } from \"../../../components/forms/MyForm\";\nimport ReferenceField from \"./ReferenceField\";\n\nconst AlertForm = ({ activeModule, handleChange, onSubmit }) => {\n  const variants = [\n    \"primary\",\n    \"secondary\",\n    \"success\",\n    \"danger\",\n    \"warning\",\n    \"info\",\n    \"light\",\n    \"dark\",\n  ];\n\n  return (\n    <Form\n      defaultValues={activeModule.body}\n      handleChange={handleChange}\n      onSubmit={onSubmit}\n    >\n      <Input name=\"heading\" as=\"textarea\" />\n      <Input name=\"message\" as=\"textarea\" rows={10} />\n      <Select name=\"variant\" options={variants} />\n      <ReferenceField activeModule={activeModule} handleChange={handleChange} />\n    </Form>\n  );\n};\n\nexport default AlertForm;\n","import React from \"react\";\nimport axios from \"axios\";\nimport Form from \"react-bootstrap/Form\";\nimport { URL_PREFIX } from \"../../config\";\nimport { useToastContext } from \"../../providers/ToastProvider\";\nimport { getErrorMsg } from \"../../utils/functions\";\n\nconst UploadFileMultiple = ({ onUploadChange, setItems }) => {\n  const { setErrorToast } = useToastContext();\n\n  const onChange = async (e) => {\n    const files = e.target.files;\n    if (!files) return;\n\n    try {\n      const uploadFiles = [];\n      for (let i = 0; i < files.length; i++) {\n        const formData = new FormData();\n        formData.append(\"file\", files[i]);\n\n        const res = await axios.post(`${URL_PREFIX}/upload`, formData, {\n          headers: {\n            \"Content-Type\": \"image/*\",\n          },\n        });\n\n        uploadFiles.push(res.data.filePath);\n      }\n\n      setItems((prev) => {\n        prev = prev.filter((img) => img !== \"/img-placeholder.jpg\");\n        const items = [...prev, ...uploadFiles];\n\n        onUploadChange({\n          target: {\n            name: \"items\",\n            value: items,\n          },\n        });\n\n        return items;\n      });\n    } catch (err) {\n      setErrorToast(getErrorMsg(err));\n    }\n  };\n\n  return (\n    <Form.File\n      multiple\n      onChange={onChange}\n      label=\"Select local file\"\n      custom\n      accept=\"image/*\"\n    />\n  );\n};\n\nexport default UploadFileMultiple;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { Check, Form, Input, Select } from \"../../../components/forms/MyForm\";\nimport UploadFileMultiple from \"../../../components/upload/UploadFileMultiple\";\nimport { Image } from \"react-bootstrap\";\nimport SmallButton from \"../../../components/buttons/SmallButton\";\nimport ReferenceField from \"./ReferenceField\";\n\nconst CarouselForm = ({ activeModule, handleChange, onSubmit }) => {\n  const options = [\"fill\", \"contain\", \"cover\", \"none\", \"scale-down\"];\n  const defaultItem = \"/img-placeholder.jpg\";\n\n  const [items, setItems] = useState(activeModule.body.items);\n  useEffect(() => {\n    setItems(activeModule.body.items);\n  }, [activeModule.body.items]);\n\n  const checkValues = useRef({\n    indicators: activeModule.body.indicators,\n    controls: activeModule.body.controls,\n    allowPause: activeModule.body.allowPause,\n    fade: activeModule.body.fade,\n  });\n\n  const onCheckChange = (e) => {\n    const name = e.target.name;\n\n    const toggleEmbed = () => {\n      checkValues.current[name] = !checkValues.current[name];\n      return checkValues.current[name];\n    };\n\n    handleChange({\n      target: {\n        name: name,\n        value: toggleEmbed(),\n      },\n    });\n  };\n\n  const renderImage = (image) => {\n    const removeItem = () => {\n      setItems((prev) => {\n        let update = prev.filter((img) => img !== image);\n\n        if (!update.length) update = [defaultItem, defaultItem];\n\n        handleChange({\n          target: {\n            name: \"items\",\n            value: update,\n          },\n        });\n\n        return update;\n      });\n    };\n\n    return (\n      <div className=\"m-1 d-inline-block\">\n        <SmallButton\n          variant=\"light\"\n          className=\"position-absolute\"\n          onClick={removeItem}\n        >\n          &times;\n        </SmallButton>\n        <Image\n          alt={image}\n          src={image}\n          style={{\n            maxWidth: \"118px\",\n            maxHeight: \"118px\",\n          }}\n        />\n      </div>\n    );\n  };\n\n  return (\n    <Form\n      defaultValues={activeModule.body}\n      handleChange={handleChange}\n      onSubmit={onSubmit}\n    >\n      <Check name=\"indicators\" onChange={onCheckChange} />\n      <Check name=\"controls\" onChange={onCheckChange} />\n      <Check\n        name=\"allowPause\"\n        label=\"Pause on hover\"\n        onChange={onCheckChange}\n      />\n      <Check name=\"fade\" label=\"Fade animation\" onChange={onCheckChange} />\n      <hr />\n      <Select name=\"objectFit\" options={options} />\n      <Input name=\"interval\" prepend=\"in seconds\" type=\"number\" />\n      <Input name=\"backgroundColor\" />\n      <ReferenceField activeModule={activeModule} handleChange={handleChange} />\n      <hr />\n      <label className=\"form-label\">Upload images</label>\n      <UploadFileMultiple onUploadChange={handleChange} setItems={setItems} />\n      <div className=\"my-2\">{items.map(renderImage)}</div>\n    </Form>\n  );\n};\n\nexport default CarouselForm;\n","import React, { useRef } from \"react\";\nimport { Form, Input, Check } from \"../../../components/forms/MyForm\";\n\nconst HtmlForm = ({ activeModule, handleChange, onSubmit }) => {\n  const embed = useRef(activeModule.body.embed);\n\n  const toggleEmbed = () => {\n    embed.current = !embed.current;\n    return embed.current;\n  };\n\n  return (\n    <Form\n      defaultValues={activeModule.body}\n      handleChange={handleChange}\n      onSubmit={onSubmit}\n    >\n      <Check\n        name=\"embed\"\n        label=\"Embedded (iframe)\"\n        onChange={() =>\n          handleChange({\n            target: {\n              name: \"embed\",\n              value: toggleEmbed(),\n            },\n          })\n        }\n      />\n      <Input\n        name=\"html\"\n        label=\"Paste html code\"\n        required\n        as=\"textarea\"\n        rows={20}\n      />\n    </Form>\n  );\n};\n\nexport default HtmlForm;\n","import React, { useState } from \"react\";\nimport { Form as BsForm } from \"react-bootstrap\";\nimport { Form, Input, Select } from \"../../../components/forms/MyForm\";\nimport axios from \"axios\";\nimport { getErrorMsg } from \"../../../utils/functions\";\nimport { useToastContext } from \"../../../providers/ToastProvider\";\nimport { URL_PREFIX } from \"../../../config\";\nimport ReferenceField from \"./ReferenceField\";\n\nconst ImageForm = React.memo(({ activeModule, handleChange, onSubmit }) => {\n  const { setErrorToast } = useToastContext();\n\n  const [filename, setFilename] = useState(\"Select local file\");\n\n  const options = [\"fill\", \"contain\", \"cover\", \"none\", \"scale-down\"];\n\n  const onUploadChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    setFilename(file.name);\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      await axios\n        .post(`${URL_PREFIX}/upload`, formData, {\n          headers: {\n            \"Content-Type\": \"image/*\",\n          },\n        })\n        .then((res) => {\n          handleChange({\n            target: {\n              name: \"src\",\n              value: res.data.filePath,\n            },\n          });\n        })\n        .catch((err) => {\n          setErrorToast(getErrorMsg(err));\n        });\n    } catch (err) {\n      setErrorToast(\"Upload failed\");\n    }\n  };\n\n  return (\n    <Form\n      defaultValues={activeModule.body}\n      handleChange={handleChange}\n      onSubmit={onSubmit}\n    >\n      <BsForm.File\n        custom\n        label={filename}\n        onChange={onUploadChange}\n        className=\"mb-3\"\n        accept=\"image/*\"\n      />\n      <Input label=\"Image source\" name=\"src\" required />\n      <Input name=\"title\" />\n      <Input name=\"subtitle\" as=\"textarea\" />\n      <Select name=\"objectFit\" options={options} />\n      <Input name=\"backgroundColor\" label=\"Background color\" />\n      <ReferenceField activeModule={activeModule} handleChange={handleChange} />\n    </Form>\n  );\n});\n\nexport default ImageForm;\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\n\nconst ActiveModuleContext = createContext();\n\nexport const ActiveModuleProvider = ({ children, setModules, setWarning }) => {\n  const [activeModule, setActiveModule] = useState();\n  const [originModule, setOriginModule] = useState();\n\n  useEffect(() => {\n    if (activeModule && !originModule)\n      setOriginModule(JSON.stringify(activeModule));\n  }, [activeModule]);\n\n  const updateModules = (module) => {\n    setModules((prev) => {\n      return prev.map((m) => {\n        return m._id === module._id ? module : m;\n      });\n    });\n  };\n\n  const updateActiveModule = (module) => {\n    setWarning(originModule !== JSON.stringify(module));\n    setActiveModule(module);\n  };\n\n  const toggleActiveModule = (module) => {\n    setActiveModule((prev) => {\n      if (!prev) return module;\n\n      updateModules(prev);\n\n      return prev._id === module._id ? undefined : module;\n    });\n  };\n\n  const closeActiveModule = () => {\n    setActiveModule((prev) => {\n      updateModules(prev);\n      return undefined;\n    });\n  };\n\n  return (\n    <ActiveModuleContext.Provider\n      value={{\n        activeModule,\n        toggleActiveModule,\n        updateActiveModule,\n        closeActiveModule,\n      }}\n    >\n      {children}\n    </ActiveModuleContext.Provider>\n  );\n};\n\nexport const useActiveModuleContext = () => useContext(ActiveModuleContext);\n","import React, { useState } from \"react\";\nimport { Form as BsForm } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { Form, Input } from \"../../../components/forms/MyForm\";\nimport { getErrorMsg } from \"../../../utils/functions\";\nimport { useToastContext } from \"../../../providers/ToastProvider\";\nimport { URL_PREFIX } from \"../../../config\";\n\nconst VideoFrom = ({ activeModule, handleChange, onSubmit }) => {\n  const { setErrorToast } = useToastContext();\n\n  const [filename, setFilename] = useState(\n    activeModule.body.src || \"Select local file\"\n  );\n\n  const onUploadChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    setFilename(file.name);\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      await axios\n        .post(`${URL_PREFIX}/upload`, formData, {\n          headers: {\n            \"Content-Type\": \"video/*\",\n          },\n        })\n        .then((res) => {\n          handleChange({\n            target: {\n              name: \"src\",\n              value: res.data.filePath,\n            },\n          });\n        })\n        .catch((err) => {\n          setErrorToast(getErrorMsg(err));\n        });\n    } catch (err) {\n      setErrorToast(\"Upload failed\");\n    }\n  };\n\n  return (\n    <Form\n      defaultValues={activeModule.body}\n      handleChange={handleChange}\n      onSubmit={onSubmit}\n    >\n      <BsForm.File\n        custom\n        label={filename}\n        onChange={onUploadChange}\n        className=\"mb-3\"\n        // accept=\"video/mp4,video/x-m4v,video/*\"\n      />\n      <Input name=\"title\" />\n      <Input name=\"backgroundColor\" label=\"Background color\" />\n    </Form>\n  );\n};\n\nexport default VideoFrom;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport AlertForm from \"./AlertForm\";\nimport CarouselForm from \"./CarouselForm\";\nimport HtmlForm from \"./HtmlForm\";\nimport ImageForm from \"./ImageForm\";\nimport { useActiveModuleContext } from \"../../ActiveModuleProvider\";\nimport SmallButton from \"../../../components/buttons/SmallButton\";\nimport { useToastContext } from \"../../../providers/ToastProvider\";\nimport { getErrorMsg, upperFirst } from \"../../../utils/functions\";\nimport { URL_PREFIX } from \"../../../config\";\nimport VideoForm from \"./VideoForm\";\n\nconst EditForm = () => {\n  const { setSuccessToast, setErrorToast } = useToastContext();\n\n  const {\n    activeModule,\n    updateActiveModule,\n    closeActiveModule,\n  } = useActiveModuleContext();\n\n  const [origin] = useState(activeModule);\n  const resetActiveModule = () => updateActiveModule(origin);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    updateActiveModule({\n      ...activeModule,\n      body: { ...activeModule.body, [name]: value },\n    });\n  };\n\n  const onSubmit = () => {\n    axios\n      .patch(`${URL_PREFIX}/modules/${activeModule._id}`, {\n        body: activeModule.body,\n      })\n      .then((res) => {\n        setSuccessToast(\"Module saved successfully\");\n      })\n      .catch((err) => {\n        setErrorToast(getErrorMsg(err));\n      });\n  };\n\n  const props = {\n    activeModule,\n    handleChange,\n    onSubmit,\n  };\n\n  const ModuleForm = formFactory(activeModule);\n\n  if (!ModuleForm) {\n    return (\n      <div className=\"m-4\">\n        <h1 className=\"text-center\">{upperFirst(activeModule.type)}</h1>\n        <h4 className=\"text-center\">Form not found</h4>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"m-4\">\n      <h1 className=\"text-center\">{upperFirst(activeModule.type)}</h1>\n      <hr />\n      <ModuleForm {...props} />\n      <ButtonGroup className=\"space-children w-100\">\n        <SmallButton className=\"ml-0\" onClick={closeActiveModule}>\n          close\n        </SmallButton>\n        <SmallButton className=\"mr-0\" onClick={resetActiveModule}>\n          reset\n        </SmallButton>\n      </ButtonGroup>\n    </div>\n  );\n};\n\nconst formFactory = (activeModule) => {\n  switch (activeModule.type) {\n    case \"alert\":\n      return AlertForm;\n    case \"carousel\":\n      return CarouselForm;\n    case \"html\":\n      return HtmlForm;\n    case \"image\":\n      return ImageForm;\n    case \"video\":\n      return VideoForm;\n    default:\n      return null;\n  }\n};\n\nexport default EditForm;\n","import React, { useContext, useEffect, useState, createContext } from \"react\";\nimport { delEdit, getAuth, getEdit, setEdit } from \"../utils/functions\";\n\nconst ModeContext = createContext();\n\nexport const ModeProvider = ({ children }) => {\n  const [editMode, setEditMode] = useState(getAuth() && getEdit());\n\n  useEffect(() => {\n    editMode ? setEdit() : delEdit();\n  }, [editMode]);\n\n  return (\n    <ModeContext.Provider value={[editMode, setEditMode]}>\n      {children}\n    </ModeContext.Provider>\n  );\n};\n\nexport const useModeContext = () => useContext(ModeContext);\n","import React, { useState } from \"react\";\nimport EditForm from \"./module/forms/EditForm\";\nimport { useModeContext } from \"../providers/ModeProvider\";\nimport { BsArrowLeftRight } from \"react-icons/bs\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport { useActiveModuleContext } from \"./ActiveModuleProvider\";\n\nconst Sidebar = () => {\n  const [editMode] = useModeContext();\n  const { activeModule } = useActiveModuleContext();\n\n  const [side, setSide] = useState(\"right\");\n  const oppositeSide = side === \"right\" ? \"left\" : \"right\";\n\n  const openSidebar =\n    editMode && activeModule && activeModule.type !== \"editor-js\";\n\n  const style = {\n    position: \"fixed\",\n    top: \"0px\",\n    paddingTop: \"66px\",\n    right: side === \"right\" ? \"0\" : \"\",\n    left: side === \"left\" ? \"0\" : \"\",\n    width: openSidebar ? \"300px\" : \"0\",\n    minHeight: \"100vh\",\n    maxHeight: \"100vh\",\n    overflowY: \"scroll\",\n    transition: \"ease .3s\",\n    backgroundColor: \"#eee\",\n    zIndex: \"103\",\n    boxShadow: `${side === \"right\" ? \"-\" : \"\"}5px 0 10px #1C1C1C`,\n  };\n\n  const swapPosition = () => setSide(oppositeSide);\n\n  return (\n    <div style={style}>\n      {openSidebar ? (\n        <>\n          <SmallButton\n            onClick={swapPosition}\n            variant=\"link\"\n            title={`swap to ${oppositeSide}`}\n            className=\"position-absolute ml-2\"\n          >\n            <BsArrowLeftRight size=\"25\" />\n          </SmallButton>\n          <EditForm />\n        </>\n      ) : null}\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Modal } from \"react-bootstrap\";\nimport { Form, Error, Input, Submit, Switch } from \"../components/forms/MyForm\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport { getErrorMsg } from \"../utils/functions\";\nimport { useHistory } from \"react-router\";\nimport { usePagesContext } from \"../App\";\nimport { Redirect } from \"react-router-dom\";\nimport uuid from \"react-uuid\";\nimport { URL_PREFIX } from \"../config\";\n\nconst Settings = ({ page, setPage, onHide }) => {\n  const [error, setError] = useState();\n\n  const history = useHistory();\n\n  const { setPages } = usePagesContext();\n  const [addedPath, setAddedPath] = useState(\"\");\n\n  const onSubmit = (data) => {\n    return axios\n      .patch(`/pages/${page._id}`, data)\n      .then((res) => {\n        const updatedPage = { ...page, ...data };\n\n        setPage(updatedPage);\n\n        setPages((prev) => {\n          return prev.map((p) => {\n            if (p._id !== page._id) return p;\n            return updatedPage;\n          });\n        });\n\n        if (page.path !== data.path) {\n          console.log(\"here\");\n          setAddedPath(data.path);\n          history.push(data.path);\n        }\n\n        onHide();\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n      });\n  };\n\n  const removePage = () => {\n    axios\n      .delete(`${URL_PREFIX}/pages/${page._id}`)\n      .then((res) => {\n        setAddedPath(page.path);\n\n        setPages((prev) => {\n          return prev.filter((p) => p._id !== page._id);\n        });\n\n        setAddedPath(page.path);\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n      });\n  };\n\n  const handleChange = () => {\n    setPage((prev) => {\n      return { ...prev, published: !page.published };\n    });\n  };\n\n  if (addedPath) {\n    return <Redirect to={addedPath} />;\n  }\n\n  return (\n    <>\n      <Modal show={true} onHide={onHide} centered>\n        <Modal.Header closeButton className=\"px-5\">\n          <Modal.Title>Page settings</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className=\"px-5\">\n          <Form onSubmit={onSubmit} defaultValues={page}>\n            <Input name=\"title\" required />\n            <Input name=\"path\" required />\n            <Input name=\"description\" />\n            <Switch\n              id={uuid()}\n              name=\"published\"\n              checked={page.published}\n              onChange={handleChange}\n            />\n            <Error error={error} />\n            <Submit>save</Submit>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer className=\"px-5\">\n          <p className=\"d-flex mr-auto\">Author: {page.created_by.name}</p>\n          <SmallButton variant=\"outline-danger\" onClick={removePage}>\n            remove\n          </SmallButton>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default Settings;\n","import React from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\n\nconst MyModal = ({ title, body, footer, ...rest }) => {\n  return (\n    <Modal show={true} centered {...rest}>\n      {title && (\n        <Modal.Header closeButton>\n          <Modal.Title>{title}</Modal.Title>\n        </Modal.Header>\n      )}\n      {body && <Modal.Body>{body}</Modal.Body>}\n      {footer && <Modal.Footer>{footer}</Modal.Footer>}\n    </Modal>\n  );\n};\n\nexport default MyModal;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport MyModal from \"./MyModal\";\nimport { Form as F } from \"react-bootstrap\";\nimport { Error, Form, Input, Submit, Switch } from \"../forms/MyForm\";\nimport {\n  cloneObj,\n  getAuth,\n  getErrorMsg,\n  upperFirst,\n} from \"../../utils/functions\";\nimport * as Yup from \"yup\";\nimport { URL_PREFIX } from \"../../config\";\nimport { usePagesContext } from \"../../App\";\nimport uuid from \"react-uuid\";\n\nconst reservedPaths = [\"/users\", \"/profile\", \"/nav\", \"/pages\"];\n\nconst validationSchema = Yup.object({\n  path: Yup.string()\n    .notOneOf(reservedPaths, \"The path name is reserved\")\n    .matches(/^[/.a-zA-Z0-9-]*$/, \"Not valid url path.\"),\n});\n\nconst NewPageModal = ({ onHide, page, path, redirect = true }) => {\n  const { setPages } = usePagesContext();\n  const [error, setError] = useState();\n\n  const [filename, setFilename] = useState(\"Create from local file\");\n  const [addedPath, setAddedPath] = useState(\"\");\n\n  const handleSubmit = (data, e) => {\n    e.preventDefault();\n    console.log(\"data\", data);\n    // return;\n    let endPoint = `${URL_PREFIX}/pages`;\n\n    if (data.copy) {\n      endPoint += \"/with-layouts\";\n      data.layouts = page.layouts;\n    }\n\n    axios\n      .post(endPoint, {\n        ...data,\n        path: `/${data.path}`,\n        created_by: getAuth()?.user.id,\n      })\n      .then((res) => {\n        const { newPage, newModules } = res.data;\n        if (onHide && !redirect) onHide();\n        setAddedPath(newPage.path);\n\n        setPages((prev) => [\n          ...prev,\n          {\n            ...newPage,\n            modules: newModules || [],\n            created_by: {\n              _id: getAuth().user.id,\n              name: getAuth().user.name,\n            },\n          },\n        ]);\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n      });\n  };\n\n  const createFromImport = (rawPage) => {\n    return axios\n      .post(\"pages\", {\n        created_by: getAuth()?.user.id,\n      })\n      .then((res) => {\n        console.log(res);\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n      });\n\n    console.log(\"IMPORT RAW\", rawPage);\n    const importedPage = cloneObj(rawPage);\n    delete importedPage.modules;\n\n    console.log(\"IMPORTING PAGE\", importedPage);\n    // if (!rawPage._id) rawPage._id = objectId()\n    return rawPage;\n  };\n\n  const updateFromImport = (importData) => {\n    axios\n      .patch(`${URL_PREFIX}/pages/with-grid/${importData._id}`, {\n        // columns,\n        // modules,\n        // removeIds,\n      })\n      .then((res) => {\n        console.log(res);\n        // history.push(value.path);\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n        console.log(err);\n      });\n  };\n\n  const onUploadChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    setFilename(file.name);\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      await axios\n        .post(`${URL_PREFIX}/pages/import`, formData, {\n          headers: { \"Content-Type\": \"multipart/form-data\" },\n        })\n        .then((res) => {\n          const importData = res.data.readFile;\n          console.log(\"importData\", importData);\n\n          if (importData._id) {\n            updateFromImport(importData);\n          } else {\n            createFromImport(importData);\n          }\n        })\n        .catch((err) => {\n          console.log(\"err\", err);\n          setError(getErrorMsg(err));\n        });\n    } catch (err) {\n      console.log(\"err\", err);\n      setError(\"Upload failed\");\n    }\n  };\n\n  const defaultValues = {\n    title: path && upperFirst(path.substr(1)),\n    path: path && path.substr(1),\n    template: \"grid\",\n  };\n\n  const NewPageForm = () => {\n    return (\n      <>\n        <Form\n          onSubmit={handleSubmit}\n          validationSchema={validationSchema}\n          // defaultValues={defaultValues}\n        >\n          <Input name=\"title\" required defaultValue={defaultValues.title} />\n          <Input\n            name=\"path\"\n            label=\"url path\"\n            prepend=\"/\"\n            defaultValue={defaultValues.path || \"\"}\n          />\n          <Input name=\"description\" as=\"textarea\" />\n          {page && (\n            <Switch id={uuid()} name=\"copy\" label=\"copy current page layouts\" />\n          )}\n          <Error error={error} />\n          <Submit>Create</Submit>\n        </Form>\n        <hr />\n        <F.File custom label={filename} onChange={onUploadChange} />\n        <hr />\n      </>\n    );\n  };\n\n  if (addedPath) {\n    console.log(\"redirect\");\n    return <Redirect to={addedPath} />;\n  }\n\n  return (\n    <MyModal\n      onHide={onHide}\n      size=\"sm\"\n      title=\"Create new page\"\n      body={<NewPageForm />}\n    />\n  );\n};\n\nexport default NewPageModal;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport { useModeContext } from \"../providers/ModeProvider\";\nimport Settings from \"./Settings\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport { IconContext } from \"react-icons\";\nimport { MdSettings } from \"react-icons/md\";\nimport { BiSave } from \"react-icons/bi\";\nimport { GoEye } from \"react-icons/go\";\nimport { RiEditFill, RiDownloadFill } from \"react-icons/ri\";\nimport { BsFileEarmarkPlus } from \"react-icons/bs\";\nimport NewPageModal from \"../components/modals/NewPageModal\";\nimport { getErrorMsg, splitModules } from \"../utils/functions\";\nimport { useToastContext } from \"../providers/ToastProvider\";\nimport { useActiveModuleContext } from \"./ActiveModuleProvider\";\nimport { URL_PREFIX } from \"../config\";\n\nconst Toolbar = ({ page, setPage, warning, setWarning, layouts, modules }) => {\n  const { activeModule } = useActiveModuleContext();\n  const { setSuccessToast, setErrorToast } = useToastContext();\n  const [editMode, setEditMode] = useModeContext();\n  const toggleMode = () => setEditMode((prev) => !prev);\n\n  const [showModal, setShowModal] = useState();\n  const toggleModal = (modal) => setShowModal(modal);\n\n  const save = () => {\n    const layoutsWithoutAddBtn = {\n      lg: layouts.lg.filter((p) => p.i !== \"addButton\"),\n      md: layouts.md.filter((p) => p.i !== \"addButton\"),\n      sm: layouts.sm.filter((p) => p.i !== \"addButton\"),\n    };\n\n    const { updatedModules, removeIds } = splitModules(modules, activeModule);\n\n    // return;\n    axios\n      .patch(`${URL_PREFIX}/pages/with-grid/${page._id}`, {\n        layouts: layoutsWithoutAddBtn,\n        modules: updatedModules,\n        removeIds,\n      })\n      .then((res) => {\n        setSuccessToast(\"Page saved successfully\");\n        setWarning(false);\n      })\n      .catch((err) => {\n        setErrorToast(getErrorMsg(err));\n      });\n  };\n\n  const style = {\n    position: \"fixed\",\n    top: \"5px\",\n    left: \"5px\",\n    paddingTop: \"124px\",\n    zIndex: \"102\",\n  };\n\n  return (\n    <div className=\"page-toolbar\" style={style}>\n      <div>\n        <IconContext.Provider value={{ size: \"18\", color: \"white\" }}>\n          {editMode ? (\n            <>\n              <ButtonGroup vertical>\n                <SmallButton title=\"preview\" onClick={toggleMode}>\n                  <GoEye />\n                </SmallButton>\n                <SmallButton\n                  onClick={() => toggleModal(\"settings\")}\n                  title=\"settings\"\n                >\n                  <MdSettings />\n                </SmallButton>\n                <SmallButton\n                  onClick={() => toggleModal(\"newPage\")}\n                  title=\"create new page\"\n                >\n                  <BsFileEarmarkPlus />\n                </SmallButton>\n                <SmallButton\n                  title=\"export\"\n                  href={`data:text/json;charset=utf-8,${encodeURIComponent(\n                    JSON.stringify(page, null, 2)\n                  )}`}\n                  download=\"data.json\"\n                >\n                  <RiDownloadFill />\n                </SmallButton>\n                <SmallButton onClick={save} title=\"save\" disabled={!warning}>\n                  <BiSave />\n                </SmallButton>\n              </ButtonGroup>\n            </>\n          ) : (\n            <>\n              <SmallButton onClick={toggleMode} title=\"edit\">\n                <RiEditFill />\n              </SmallButton>\n            </>\n          )}\n        </IconContext.Provider>\n      </div>\n      {showModal === \"settings\" && (\n        <Settings page={page} setPage={setPage} onHide={toggleModal} />\n      )}\n      {showModal === \"newPage\" && (\n        <NewPageModal onHide={toggleModal} page={page} />\n      )}\n    </div>\n  );\n};\n\nexport default Toolbar;\n","import React, { useState } from \"react\";\nimport { useModeContext } from \"../providers/ModeProvider\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport SmallButton from \"./buttons/SmallButton\";\nimport { SizeMe } from \"react-sizeme\";\nlet ResponsiveGridLayout = WidthProvider(Responsive);\n\nexport const ROW_HEIGHT = 150;\nexport const ROW_WIDTH = 300;\n\nconst MyGridLayout = ({\n  children,\n  compactType = \"horizontal\",\n  animated = false,\n  isResizable = true,\n  margin,\n  isDraggable,\n  setWarning,\n  simulateBreakpoints,\n  hasEditPermission,\n  breakpoints,\n  ...rest\n}) => {\n  const [editMode] = useModeContext();\n  if (hasEditPermission) {\n    ResponsiveGridLayout = Responsive;\n  }\n\n  const [prevSize, setPrevSize] = useState({ width: 0 });\n  const [width, setWidth] = useState(breakpoints.lg + 1);\n\n  isDraggable =\n    isDraggable === undefined ? editMode && hasEditPermission : isDraggable;\n\n  isResizable = isResizable && editMode && hasEditPermission;\n\n  const isChanged = (oldItem, newItem) => {\n    if (oldItem.i === \"addButton\") return false;\n    return JSON.stringify(oldItem) !== JSON.stringify(newItem);\n  };\n\n  const onDragStop = (layout, oldItem, newItem) => {\n    if (!setWarning) return;\n    if (isChanged(oldItem, newItem)) {\n      setWarning(true);\n    }\n  };\n\n  const onResizeStop = (layout, oldItem, newItem) => {\n    if (!setWarning) return;\n    if (isChanged(oldItem, newItem)) {\n      setWarning(true);\n    }\n  };\n\n  const handleSizeChange = (size) => {\n    if (prevSize.width === size.width) return;\n\n    setWidth(size.width);\n    setPrevSize(size);\n  };\n\n  const ViewToolbar = () => {\n    // render one of the three buttons\n    const ViewButton = ({ breakpoint, active, disabled, children }) => (\n      <SmallButton\n        variant=\"outline-dark\"\n        active={active} // to mark pressed button\n        disabled={disabled} // disable button with smaller width that the current\n        onClick={() => setWidth(breakpoints[breakpoint] + 1)}\n      >\n        {children} {/* device name */}\n      </SmallButton>\n    );\n\n    return (\n      <div className=\"d-flex justify-content-center pb-4\">\n        {/* render group of three buttons for mobile, tablet and desktop  */}\n        <ButtonGroup>\n          <SmallButton style={{ fontWeight: \"bold\" }} variant=\"dark\" disabled>\n            Device views:\n          </SmallButton>\n          <ViewButton\n            breakpoint=\"sm\"\n            active={width <= breakpoints.md}\n            disabled={false}\n          >\n            Mobile\n          </ViewButton>\n          <ViewButton\n            breakpoint=\"md\"\n            active={breakpoints.md + 1 <= width && width <= breakpoints.lg}\n            disabled={prevSize.width < breakpoints.md}\n          >\n            Tablet\n          </ViewButton>\n          <ViewButton\n            breakpoint=\"lg\"\n            active={width >= breakpoints.lg + 1}\n            disabled={prevSize.width < breakpoints.lg}\n          >\n            Desktop\n          </ViewButton>\n        </ButtonGroup>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      {simulateBreakpoints && <ViewToolbar />}\n      <SizeMe>\n        {({ size }) => {\n          handleSizeChange(size);\n          return (\n            <ResponsiveGridLayout\n              width={width}\n              breakpoints={breakpoints}\n              compactType={compactType}\n              measureBeforeMount={!animated}\n              useCSSTransforms={animated}\n              isResizable={isResizable}\n              isDraggable={isDraggable}\n              onDragStop={onDragStop}\n              onResizeStop={onResizeStop}\n              rowHeight={ROW_HEIGHT}\n              {...rest}\n            >\n              {children}\n            </ResponsiveGridLayout>\n          );\n        }}\n      </SizeMe>\n    </div>\n  );\n};\n\nexport default MyGridLayout;\n","import React, { useState, useEffect } from \"react\";\nimport { Prompt as RrdPrompt } from \"react-router-dom\";\n\nconst useWarning = () => {\n  const [warning, setWarning] = useState(false);\n  const Prompt = (\n    <RrdPrompt when={warning} message=\"Changes you made may not be saved.\" />\n  );\n\n  useEffect(() => {\n    window.onbeforeunload = warning && (() => \"message\");\n    return () => (window.onbeforeunload = null);\n  }, [warning]);\n\n  return [warning, setWarning, Prompt];\n};\n\nexport default useWarning;\n","import React from \"react\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport SmallButton from \"../../components/buttons/SmallButton\";\nimport { IconContext } from \"react-icons\";\nimport { BiClipboard } from \"react-icons/bi\";\nimport { BsPencil, BsTrash } from \"react-icons/bs\";\nimport {\n  RiPushpin2Fill,\n  RiPushpin2Line,\n  RiDragMove2Fill,\n} from \"react-icons/ri\";\n\nconst ModuleToolbar = ({\n  module,\n  position,\n  onPin,\n  onRemove,\n  onShrink,\n  showToolbar,\n  copyCardToClipboard,\n  createCardCopy,\n  toggleActiveModule,\n}) => {\n  const isPinned = position.static;\n\n  const style = {\n    position: \"absolute\",\n    top: \"-30px\",\n    left: \"0\",\n    zIndex: \"101\",\n    width: \"100%\",\n  };\n\n  const styleDragButton = {\n    backgroundColor: \"#343a40\",\n    paddingTop: \".25rem\",\n    paddingBottom: \".25rem\",\n    marginLeft: \".5rem\",\n    marginRight: \".5rem\",\n    cursor: isPinned ? \"not-allowed\" : \"grab\",\n  };\n\n  return (\n    <div style={style}>\n      {showToolbar && (\n        <ButtonGroup\n          className=\"w-100\"\n          style={{\n            backgroundColor: \"#343a40\",\n          }}\n        >\n          <IconContext.Provider value={{ size: \"20\", color: \"white\" }}>\n            {/*<SmallButton onClick={onShrink}>S</SmallButton>*/}\n            <SmallButton\n              onClick={() => toggleActiveModule(module)}\n              title=\"edit\"\n            >\n              <BsPencil />\n            </SmallButton>\n            <SmallButton\n              onClick={() => copyCardToClipboard(module)}\n              onDoubleClick={() => createCardCopy(module, position)}\n              title=\"copy to clipboard\"\n            >\n              <BiClipboard />\n            </SmallButton>\n            <SmallButton onClick={onPin} title={isPinned ? \"unpin\" : \"pin\"}>\n              {isPinned ? <RiPushpin2Fill /> : <RiPushpin2Line />}\n            </SmallButton>\n            <RiDragMove2Fill\n              className={isPinned ? \"\" : \"handle\"}\n              size={32}\n              style={styleDragButton}\n              title=\"move\"\n            />\n            <SmallButton onClick={onRemove} title=\"remove\">\n              <BsTrash />\n            </SmallButton>\n          </IconContext.Provider>\n        </ButtonGroup>\n      )}\n    </div>\n  );\n};\n\nexport default ModuleToolbar;\n","/**\n * Build styles\n */\nrequire(\"./index.css\").toString();\n// import \"./index.css\";\n\n/**\n * CodeTool for Editor.js\n *\n * @author CodeX (team@ifmo.su)\n * @copyright CodeX 2018\n * @license MIT\n * @version 2.0.0\n */\n\n/* global PasteEvent */\n\n/**\n * Code Tool for the Editor.js allows to include code examples in your articles.\n */\nexport default class CodeBox {\n  /**\n   * Allow to press Enter inside the CodeTool textarea\n   *\n   * @returns {boolean}\n   * @public\n   */\n  static get enableLineBreaks() {\n    return true;\n  }\n\n  /**\n   * @typedef {object} CodeData  plugin saved data\n   * @property {string} code - previously saved plugin code\n   */\n\n  /**\n   * Render plugin`s main Element and fill it with saved data\n   *\n   * @param {object} options - tool constricting options\n   * @param {CodeData} options.data  previously saved plugin code\n   * @param {object} options.config - user config for Tool\n   * @param {object} options.api - Editor.js API\n   */\n  constructor({ data, config, api, readOnly }) {\n    this.api = api;\n\n    this.readOnly = readOnly;\n\n    this.placeholder = this.api.i18n.t(\n      config.placeholder || CodeBox.DEFAULT_PLACEHOLDER\n    );\n\n    this.CSS = {\n      baseClass: this.api.styles.block,\n      input: this.api.styles.input,\n      wrapper: \"ce-code\",\n      textarea: \"ce-code__textarea\",\n      select: \"ce-code__languagecode\",\n    };\n\n    this.languageList = [\n      { name: \"Select Language\", code: \"\" },\n      { name: \"HTML\", code: \"html\" },\n      { name: \"CSS\", code: \"css\" },\n      { name: \"JavaScript\", code: \"js\" },\n      { name: \"ABAP\", code: \"abap\" },\n      { name: \"Augmented Backus-Naur form\", code: \"abnf\" },\n      { name: \"ActionScript\", code: \"actionscript\" },\n      { name: \"Ada\", code: \"ada\" },\n      { name: \"AL\", code: \"al\" },\n      { name: \"ANTLR4\", code: \"antlr4\" },\n      { name: \"Apache Configuration\", code: \"apacheconf\" },\n      { name: \"APL\", code: \"apl\" },\n      { name: \"AppleScript\", code: \"applescript\" },\n      { name: \"AQL\", code: \"aql\" },\n      { name: \"Arduino\", code: \"arduino\" },\n      { name: \"ARFF\", code: \"arff\" },\n      { name: \"AsciiDoc\", code: \"asciidoc\" },\n      { name: \"6502 Assembly\", code: \"asm6502\" },\n      { name: \"ASP.NET (C#)\", code: \"aspnet\" },\n      { name: \"AutoHotkey\", code: \"autohotkey\" },\n      { name: \"AutoIt\", code: \"autoit\" },\n      { name: \"Bash\", code: \"bash\" },\n      { name: \"BASIC\", code: \"basic\" },\n      { name: \"Batch\", code: \"batch\" },\n      { name: \"BBcode\", code: \"bbcode\" },\n      { name: \"Bison\", code: \"bison\" },\n      { name: \"BackusNaur form\", code: \"bnf\" },\n      { name: \"Brainfuck\", code: \"brainfuck\" },\n      { name: \"BrightScript\", code: \"brightscript\" },\n      { name: \"Bro\", code: \"bro\" },\n      { name: \"C\", code: \"c\" },\n      { name: \"Concurnas\", code: \"concurnas\" },\n      { name: \"C#\", code: \"csharp\" },\n      { name: \"C++\", code: \"cpp\" },\n      { name: \"CIL\", code: \"cil\" },\n      { name: \"CoffeeScript\", code: \"coffeescript\" },\n      { name: \"CMake\", code: \"cmake\" },\n      { name: \"Clojure\", code: \"clojure\" },\n      { name: \"Crystal\", code: \"crystal\" },\n      { name: \"Content-Security-Policy\", code: \"csp\" },\n      { name: \"CSS Extras\", code: \"css-extras\" },\n      { name: \"D\", code: \"d\" },\n      { name: \"Dart\", code: \"dart\" },\n      { name: \"DAX\", code: \"dax\" },\n      { name: \"Diff\", code: \"diff\" },\n      { name: \"DNS zone file\", code: \"dns-zone-file\" },\n      { name: \"Docker\", code: \"docker\" },\n      { name: \"Extended BackusNaur form\", code: \"ebnf\" },\n      { name: \"Eiffel\", code: \"eiffel\" },\n      { name: \"EJS\", code: \"ejs\" },\n      { name: \"Elixir\", code: \"elixir\" },\n      { name: \"Elm\", code: \"elm\" },\n      { name: \"Embedded Lua templating\", code: \"etlua\" },\n      { name: \"ERB\", code: \"erb\" },\n      { name: \"Erlang\", code: \"erlang\" },\n      { name: \"Excel Formula\", code: \"xlsx\" },\n      { name: \"F#\", code: \"fsharp\" },\n      { name: \"Factor\", code: \"factor\" },\n      { name: \"Firestore security rules\", code: \"firestore-security-rules\" },\n      { name: \"Flow\", code: \"flow\" },\n      { name: \"Fortran\", code: \"fortran\" },\n      { name: \"FreeMarker Template Language\", code: \"ftl\" },\n      { name: \"G-code\", code: \"gcode\" },\n      { name: \"GDScript\", code: \"gdscript\" },\n      { name: \"GEDCOM\", code: \"gedcom\" },\n      { name: \"Gherkin\", code: \"gherkin\" },\n      { name: \"Git\", code: \"git\" },\n      { name: \"GLSL\", code: \"glsl\" },\n      { name: \"GameMaker Language\", code: \"gml\" },\n      { name: \"Go\", code: \"go\" },\n      { name: \"GraphQL\", code: \"graphql\" },\n      { name: \"Groovy\", code: \"groovy\" },\n      { name: \"Haml\", code: \"haml\" },\n      { name: \"Handlebars\", code: \"handlebars\" },\n      { name: \"Haskell\", code: \"haskell\" },\n      { name: \"Haxe\", code: \"haxe\" },\n      { name: \"HCL\", code: \"hcl\" },\n      { name: \"HLSL\", code: \"hlsl\" },\n      { name: \"HTTP\", code: \"http\" },\n      { name: \"HTTP Public-Key-Pins\", code: \"hpkp\" },\n      { name: \"HTTP Strict-Transport-Security\", code: \"hsts\" },\n      { name: \"IchigoJam\", code: \"ichigojam\" },\n      { name: \"Icon\", code: \"icon\" },\n      { name: \"Structured Text (IEC 61131-3)\", code: \"iecst\" },\n      { name: \"Inform 7\", code: \"inform7\" },\n      { name: \"Ini\", code: \"ini\" },\n      { name: \"Io\", code: \"io\" },\n      { name: \"J\", code: \"j\" },\n      { name: \"Java\", code: \"java\" },\n      { name: \"JavaDoc\", code: \"javadoc\" },\n      { name: \"JavaDoc-like\", code: \"javadoclike\" },\n      { name: \"Java stack trace\", code: \"javastacktrace\" },\n      { name: \"Jinja2\", code: \"jinja2\" },\n      { name: \"Jolie\", code: \"jolie\" },\n      { name: \"JQ\", code: \"jq\" },\n      { name: \"JSDoc\", code: \"jsdoc\" },\n      { name: \"JS Extras\", code: \"js-extras\" },\n      { name: \"JS Templates\", code: \"js-templates\" },\n      { name: \"JSON\", code: \"json\" },\n      { name: \"JSONP\", code: \"jsonp\" },\n      { name: \"JSON5\", code: \"json5\" },\n      { name: \"Julia\", code: \"julia\" },\n      { name: \"Keyman\", code: \"keyman\" },\n      { name: \"Kotlin\", code: \"kotlin\" },\n      { name: \"LaTeX\", code: \"latex\" },\n      { name: \"Latte\", code: \"latte\" },\n      { name: \"Less\", code: \"less\" },\n      { name: \"LilyPond\", code: \"lilypond\" },\n      { name: \"Liquid\", code: \"liquid\" },\n      { name: \"Lisp\", code: \"lisp\" },\n      { name: \"LiveScript\", code: \"livescript\" },\n      { name: \"LLVM IR\", code: \"llvm\" },\n      { name: \"LOLCODE\", code: \"lolcode\" },\n      { name: \"Lua\", code: \"lua\" },\n      { name: \"Makefile\", code: \"makefile\" },\n      { name: \"Markdown\", code: \"markdown\" },\n      { name: \"Markup templating\", code: \"markup-templating\" },\n      { name: \"MATLAB\", code: \"matlab\" },\n      { name: \"MEL\", code: \"mel\" },\n      { name: \"Mizar\", code: \"mizar\" },\n      { name: \"Monkey\", code: \"monkey\" },\n      { name: \"MoonScript\", code: \"moonscript\" },\n      { name: \"N1QL\", code: \"n1ql\" },\n      { name: \"N4JS\", code: \"n4js\" },\n      { name: \"Nand To Tetris HDL\", code: \"nand2tetris-hdl\" },\n      { name: \"NASM\", code: \"nasm\" },\n      { name: \"NEON\", code: \"neon\" },\n      { name: \"nginx\", code: \"nginx\" },\n      { name: \"Nim\", code: \"nim\" },\n      { name: \"Nix\", code: \"nix\" },\n      { name: \"NSIS\", code: \"nsis\" },\n      { name: \"Objective-C\", code: \"objectivec\" },\n      { name: \"OCaml\", code: \"ocaml\" },\n      { name: \"OpenCL\", code: \"opencl\" },\n      { name: \"Oz\", code: \"oz\" },\n      { name: \"PARI/GP\", code: \"parigp\" },\n      { name: \"Parser\", code: \"parser\" },\n      { name: \"Pascal\", code: \"pascal\" },\n      { name: \"Pascaligo\", code: \"pascaligo\" },\n      { name: \"PC-Axis\", code: \"pcaxis\" },\n      { name: \"PeopleCode\", code: \"peoplecode\" },\n      { name: \"Perl\", code: \"perl\" },\n      { name: \"PHP\", code: \"php\" },\n      { name: \"PHPDoc\", code: \"phpdoc\" },\n      { name: \"PHP Extras\", code: \"php-extras\" },\n      { name: \"PL/SQL\", code: \"plsql\" },\n      { name: \"PowerQuery\", code: \"powerquery\" },\n      { name: \"PowerShell\", code: \"powershell\" },\n      { name: \"Processing\", code: \"processing\" },\n      { name: \"Prolog\", code: \"prolog\" },\n      { name: \".properties\", code: \"properties\" },\n      { name: \"Protocol Buffers\", code: \"protobuf\" },\n      { name: \"Pug\", code: \"pug\" },\n      { name: \"Puppet\", code: \"puppet\" },\n      { name: \"Pure\", code: \"pure\" },\n      { name: \"PureBasic\", code: \"purebasic\" },\n      { name: \"Python\", code: \"python\" },\n      { name: \"Q (kdb+ database)\", code: \"q\" },\n      { name: \"QML\", code: \"qml\" },\n      { name: \"Qore\", code: \"qore\" },\n      { name: \"R\", code: \"r\" },\n      { name: \"Racket\", code: \"racket\" },\n      { name: \"React JSX\", code: \"jsx\" },\n      { name: \"React TSX\", code: \"tsx\" },\n      { name: \"Ren'py\", code: \"renpy\" },\n      { name: \"Reason\", code: \"reason\" },\n      { name: \"Regex\", code: \"regex\" },\n      { name: \"reST (reStructuredText)\", code: \"rest\" },\n      { name: \"Rip\", code: \"rip\" },\n      { name: \"Roboconf\", code: \"roboconf\" },\n      { name: \"Robot Framework\", code: \"robotframework\" },\n      { name: \"Ruby\", code: \"ruby\" },\n      { name: \"Rust\", code: \"rust\" },\n      { name: \"SAS\", code: \"sas\" },\n      { name: \"Sass (Sass)\", code: \"sass\" },\n      { name: \"Sass (Scss)\", code: \"scss\" },\n      { name: \"Scala\", code: \"scala\" },\n      { name: \"Scheme\", code: \"scheme\" },\n      { name: \"Shell session\", code: \"shell-session\" },\n      { name: \"Smalltalk\", code: \"smalltalk\" },\n      { name: \"Smarty\", code: \"smarty\" },\n      { name: \"Solidity (Ethereum)\", code: \"solidity\" },\n      { name: \"Solution file\", code: \"solution-file\" },\n      { name: \"Soy (Closure Template)\", code: \"soy\" },\n      { name: \"SPARQL\", code: \"sparql\" },\n      { name: \"Splunk SPL\", code: \"splunk-spl\" },\n      { name: \"SQF: Status Quo Function (Arma 3)\", code: \"sqf\" },\n      { name: \"SQL\", code: \"sql\" },\n      { name: \"Stylus\", code: \"stylus\" },\n      { name: \"Swift\", code: \"swift\" },\n      { name: \"TAP\", code: \"tap\" },\n      { name: \"Tcl\", code: \"tcl\" },\n      { name: \"Textile\", code: \"textile\" },\n      { name: \"TOML\", code: \"toml\" },\n      { name: \"Template Toolkit 2\", code: \"tt2\" },\n      { name: \"Turtle\", code: \"turtle\" },\n      { name: \"Twig\", code: \"twig\" },\n      { name: \"TypeScript\", code: \"typescript\" },\n      { name: \"T4 Text Templates (C#)\", code: \"t4-cs\" },\n      { name: \"T4 Text Templates (VB)\", code: \"t4-vb\" },\n      { name: \"T4 templating\", code: \"t4-templating\" },\n      { name: \"UnrealScript\", code: \"unrealscript\" },\n      { name: \"Vala\", code: \"vala\" },\n      { name: \"VB.Net\", code: \"vbnet\" },\n      { name: \"Velocity\", code: \"velocity\" },\n      { name: \"Verilog\", code: \"verilog\" },\n      { name: \"VHDL\", code: \"vhdl\" },\n      { name: \"vim\", code: \"vim\" },\n      { name: \"Visual Basic\", code: \"visual-basic\" },\n      { name: \"WarpScript\", code: \"warpscript\" },\n      { name: \"WebAssembly\", code: \"wasm\" },\n      { name: \"Wiki markup\", code: \"wiki\" },\n      { name: \"Xeora\", code: \"xeora\" },\n      { name: \"XML doc (.net)\", code: \"xml-doc\" },\n      { name: \"Xojo (REALbasic)\", code: \"xojo\" },\n      { name: \"XQuery\", code: \"xquery\" },\n      { name: \"YAML\", code: \"yaml\" },\n      { name: \"Zig\", code: \"zig\" },\n    ];\n\n    this.nodes = {\n      holder: null,\n      textarea: null,\n      picker: null,\n    };\n\n    this.data = {\n      code: data.code || \"\",\n      languageCode: data.languageCode || \"\",\n    };\n\n    this.nodes.holder = this.drawView();\n  }\n\n  static get isReadOnlySupported() {\n    return true;\n  }\n\n  /**\n   * Create Tool's view\n   *\n   * @returns {HTMLElement}\n   * @private\n   */\n  drawView() {\n    let wrapper = document.createElement(\"div\"),\n      textarea = document.createElement(\"textarea\"),\n      picker = document.createElement(\"select\");\n\n    for (const language in this.languageList) {\n      if (this.languageList.hasOwnProperty(language)) {\n        let option = document.createElement(\"option\");\n        option.text = this.languageList[language].name;\n        option.value = this.languageList[language].code;\n        picker.appendChild(option);\n      }\n    }\n\n    wrapper.classList.add(this.CSS.baseClass, this.CSS.wrapper);\n    picker.classList.add(this.CSS.select);\n    textarea.classList.add(this.CSS.textarea, this.CSS.input);\n    textarea.textContent = this.data.code;\n    picker.value = this.data.languageCode;\n\n    textarea.placeholder = this.placeholder;\n\n    textarea.disabled = this.readOnly;\n    picker.disabled = this.readOnly;\n\n    wrapper.appendChild(picker);\n    wrapper.appendChild(textarea);\n\n    this.nodes.textarea = textarea;\n    this.nodes.picker = picker;\n\n    return wrapper;\n  }\n\n  /**\n   * Return Tool's view\n   *\n   * @returns {HTMLDivElement} this.nodes.holder - Code's wrapper\n   * @public\n   */\n  render() {\n    return this.nodes.holder;\n  }\n\n  /**\n   * Extract Tool's data from the view\n   *\n   * @param {HTMLDivElement} codeWrapper - CodeBox's wrapper, containing textarea with code\n   * @returns {CodeData} - saved plugin code\n   * @public\n   */\n  save(codeWrapper) {\n    return {\n      code: codeWrapper.querySelector(\"textarea\").value,\n      languageCode: codeWrapper.querySelector(\"select\").value,\n    };\n  }\n\n  /**\n   * onPaste callback fired from Editor`s core\n   *\n   * @param {PasteEvent} event - event with pasted content\n   */\n  onPaste(event) {\n    const content = event.detail.data;\n\n    this.data = {\n      code: content.textContent,\n    };\n  }\n\n  /**\n   * Returns Tool`s data from private property\n   *\n   * @returns {CodeData}\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Set Tool`s data to private property and update view\n   *\n   * @param {CodeData} data - saved tool data\n   */\n  set data(data) {\n    this._data = data;\n\n    if (this.nodes.textarea) {\n      this.nodes.textarea.textContent = data.code;\n    }\n\n    if (this.nodes.picker) {\n      this.nodes.picker.value = data.languageCode;\n    }\n  }\n\n  /**\n   * Get Tool toolbox settings\n   * icon - Tool icon's SVG\n   * title - title to show in toolbox\n   *\n   * @returns {{icon: string, title: string}}\n   */\n  static get toolbox() {\n    return {\n      icon:\n        '<svg width=\"14\" height=\"14\" viewBox=\"0 -1 14 14\" xmlns=\"http://www.w3.org/2000/svg\" > <path d=\"M3.177 6.852c.205.253.347.572.427.954.078.372.117.844.117 1.417 0 .418.01.725.03.92.02.18.057.314.107.396.046.075.093.117.14.134.075.027.218.056.42.083a.855.855 0 0 1 .56.297c.145.167.215.38.215.636 0 .612-.432.934-1.216.934-.457 0-.87-.087-1.233-.262a1.995 1.995 0 0 1-.853-.751 2.09 2.09 0 0 1-.305-1.097c-.014-.648-.029-1.168-.043-1.56-.013-.383-.034-.631-.06-.733-.064-.263-.158-.455-.276-.578a2.163 2.163 0 0 0-.505-.376c-.238-.134-.41-.256-.519-.371C.058 6.76 0 6.567 0 6.315c0-.37.166-.657.493-.846.329-.186.56-.342.693-.466a.942.942 0 0 0 .26-.447c.056-.2.088-.42.097-.658.01-.25.024-.85.043-1.802.015-.629.239-1.14.672-1.522C2.691.19 3.268 0 3.977 0c.783 0 1.216.317 1.216.921 0 .264-.069.48-.211.643a.858.858 0 0 1-.563.29c-.249.03-.417.076-.498.126-.062.04-.112.134-.139.291-.031.187-.052.562-.061 1.119a8.828 8.828 0 0 1-.112 1.378 2.24 2.24 0 0 1-.404.963c-.159.212-.373.406-.64.583.25.163.454.342.612.538zm7.34 0c.157-.196.362-.375.612-.538a2.544 2.544 0 0 1-.641-.583 2.24 2.24 0 0 1-.404-.963 8.828 8.828 0 0 1-.112-1.378c-.009-.557-.03-.932-.061-1.119-.027-.157-.077-.251-.14-.29-.08-.051-.248-.096-.496-.127a.858.858 0 0 1-.564-.29C8.57 1.401 8.5 1.185 8.5.921 8.5.317 8.933 0 9.716 0c.71 0 1.286.19 1.72.574.432.382.656.893.671 1.522.02.952.033 1.553.043 1.802.009.238.041.458.097.658a.942.942 0 0 0 .26.447c.133.124.364.28.693.466a.926.926 0 0 1 .493.846c0 .252-.058.446-.183.58-.109.115-.281.237-.52.371-.21.118-.377.244-.504.376-.118.123-.212.315-.277.578-.025.102-.045.35-.06.733-.013.392-.027.912-.042 1.56a2.09 2.09 0 0 1-.305 1.097c-.2.323-.486.574-.853.75a2.811 2.811 0 0 1-1.233.263c-.784 0-1.216-.322-1.216-.934 0-.256.07-.47.214-.636a.855.855 0 0 1 .562-.297c.201-.027.344-.056.418-.083.048-.017.096-.06.14-.134a.996.996 0 0 0 .107-.396c.02-.195.031-.502.031-.92 0-.573.039-1.045.117-1.417.08-.382.222-.701.427-.954z\" /> </svg>',\n      title: \"Code\",\n    };\n  }\n\n  /**\n   * Default placeholder for CodeBox's textarea\n   *\n   * @public\n   * @returns {string}\n   */\n  static get DEFAULT_PLACEHOLDER() {\n    return \"Write or Paste Code here\";\n  }\n\n  /**\n   *  Used by Editor.js paste handling API.\n   *  Provides configuration to handle CODE tag.\n   *\n   * @static\n   * @returns {{tags: string[]}}\n   */\n  static get pasteConfig() {\n    return {\n      tags: [\"pre\"],\n    };\n  }\n\n  /**\n   * Automatic sanitize config\n   *\n   * @returns {{code: boolean}}\n   */\n  static get sanitize() {\n    return {\n      code: true, // Allow HTML tags\n    };\n  }\n}\n\n// module.exports = CodeBox;\n","import ajax from '@codexteam/ajax';\n\n/**\n * Module for file uploading.\n */\nexport default class Uploader {\n  /**\n   * @param {Object} config\n   * @param {function} onUpload - callback for successful file upload\n   * @param {function} onError - callback for uploading errors\n   */\n  constructor({ config, onUpload, onError }) {\n    this.config = config;\n    this.onUpload = onUpload;\n    this.onError = onError;\n  }\n\n  /**\n   * Handle clicks on the upload file button\n   * @fires ajax.transport()\n   * @param {function} onPreview - callback fired when preview is ready\n   */\n  uploadSelectedFile({ onPreview }) {\n    ajax.transport({\n      url: this.config.endpoint,\n      accept: this.config.types,\n      beforeSend: () => onPreview(),\n      fieldName: this.config.field\n    }).then((response) => {\n      this.onUpload(response);\n    }).catch((error) => {\n      const message = (error && error.message) ? error.message : this.config.errorMessage;\n\n      this.onError(message);\n    });\n  }\n}\n","import Uploader from \"./uploader\";\nimport \"./index.css\";\n// require(\"./index.css\").toString();\n\nconst LOADER_TIMEOUT = 500;\n\nconst Icon =\n  '<svg width=\"12\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.109 2.08H2.942a.862.862 0 0 0-.862.862v8.116c0 .476.386.862.862.862h5.529a.862.862 0 0 0 .862-.862V7.695H4.11V2.08zm1.905.497v3.29h3.312l-3.312-3.29zM2.942 0h2.74c.326.02.566.076.719.165.153.09.484.413.992.973l3.21 3.346c.347.413.557.683.631.811.111.193.179.446.179.579v5.184A2.942 2.942 0 0 1 8.471 14H2.942A2.942 2.942 0 0 1 0 11.058V2.942A2.942 2.942 0 0 1 2.942 0z\" fill-rule=\"nonzero\"/></svg>';\nconst FileIcon =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"40\">\\n' +\n  '  <g fill=\"#A8ACB8\" fill-rule=\"evenodd\">\\n' +\n  '    <path fill-rule=\"nonzero\" d=\"M17 0l15 14V3v34a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h20-6zm0 2H3a1 1 0 0 0-1 1v34a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V14H17V2zm2 10h7.926L19 4.602V12z\"/>\\n' +\n  '    <path d=\"M7 22h18v2H7zm0 4h18v2H7zm0 4h18v2H7z\"/>\\n' +\n  \"  </g>\\n\" +\n  \"</svg>\";\nconst CustomFileIcon =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"40\">\\n' +\n  '  <path d=\"M17 0l15 14V3v34a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h20-6zm0 2H3a1 1 0 0 0-1 1v34a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V14H17V2zm2 10h7.926L19 4.602V12z\"/>\\n' +\n  \"</svg>\";\nconst DownloadIcon =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"17pt\" height=\"17pt\" viewBox=\"0 0 17 17\">\\n' +\n  '  <path d=\"M9.457 8.945V2.848A.959.959 0 0 0 8.5 1.89a.959.959 0 0 0-.957.957v6.097L4.488 5.891a.952.952 0 0 0-1.351 0 .952.952 0 0 0 0 1.351l4.687 4.688a.955.955 0 0 0 1.352 0l4.687-4.688a.952.952 0 0 0 0-1.351.952.952 0 0 0-1.351 0zM3.59 14.937h9.82a.953.953 0 0 0 .953-.957.952.952 0 0 0-.953-.953H3.59a.952.952 0 0 0-.953.953c0 .532.425.957.953.957zm0 0\" fill-rule=\"evenodd\"/>\\n' +\n  \"</svg>\";\n\n/**\n * @typedef {object} AttachesToolData\n * @description Attaches Tool's output data format\n * @property {AttachesFileData} file - object containing information about the file\n * @property {string} title - file's title\n */\n\n/**\n * @typedef {object} AttachesFileData\n * @description Attaches Tool's file format\n * @property {string} [url] - file's upload url\n * @property {string} [size] - file's size\n * @property {string} [extension] - file's extension\n * @property {string} [name] - file's name\n */\n\n/**\n * @typedef {object} FileData\n * @description Attaches Tool's response from backend\n * @property {string} url - file's url\n * @property {string} name - file's name with extension\n * @property {string} extension - file's extension\n */\n\n/**\n * @typedef {object} UploadResponseFormat\n * @description This format expected from backend on file upload\n * @property {number} success  - 1 for successful uploading, 0 for failure\n * @property {FileData} file - backend response with uploaded file data.\n */\n\n/**\n * @typedef {object} AttachesToolConfig\n * @description Config supported by Tool\n * @property {string} endpoint - file upload url\n * @property {string} field - field name for uploaded file\n * @property {string} types - available mime-types\n * @property {string} placeholder\n * @property {string} errorMessage\n */\n\n/**\n * @class AttachesTool\n * @classdesc AttachesTool for Editor.js 2.0\n *\n * @property {API} api - Editor.js API\n * @property {AttachesToolData} data\n * @property {AttachesToolConfig} config\n */\nexport default class AttachesTool {\n  /**\n   * @param {AttachesToolData} data\n   * @param {Object} config\n   * @param {API} api\n   */\n  constructor({ data, config, api, readOnly }) {\n    this.api = api;\n\n    this.readOnly = readOnly;\n\n    this.nodes = {\n      wrapper: null,\n      button: null,\n      title: null,\n    };\n\n    this._data = {\n      file: {},\n      title: \"\",\n    };\n\n    this.config = {\n      endpoint: config.endpoint || \"\",\n      field: config.field || \"file\",\n      types: config.types || \"*\",\n      buttonText: config.buttonText || \"Select file to upload\",\n      errorMessage: config.errorMessage || \"File upload failed\",\n    };\n\n    this.data = data;\n\n    /**\n     * Module for files uploading\n     */\n    this.uploader = new Uploader({\n      config: this.config,\n      onUpload: (response) => this.onUpload(response),\n      onError: (error) => this.uploadingFailed(error),\n    });\n\n    this.enableFileUpload = this.enableFileUpload.bind(this);\n  }\n\n  /**\n   * Get Tool toolbox settings\n   * icon - Tool icon's SVG\n   * title - title to show in toolbox\n   */\n  static get toolbox() {\n    return {\n      icon: Icon,\n      title: \"Attaches\",\n    };\n  }\n\n  static get isReadOnlySupported() {\n    return true;\n  }\n\n  /**\n   * Tool's CSS classes\n   */\n  get CSS() {\n    return {\n      baseClass: this.api.styles.block,\n      apiButton: this.api.styles.button,\n      loader: this.api.styles.loader,\n      /**\n       * Tool's classes\n       */\n      wrapper: \"cdx-attaches\",\n      wrapperWithFile: \"cdx-attaches--with-file\",\n      wrapperLoading: \"cdx-attaches--loading\",\n      button: \"cdx-attaches__button\",\n      title: \"cdx-attaches__title\",\n      size: \"cdx-attaches__size\",\n      downloadButton: \"cdx-attaches__download-button\",\n      fileInfo: \"cdx-attaches__file-info\",\n      fileIcon: \"cdx-attaches__file-icon\",\n    };\n  }\n\n  /**\n   * Possible files' extension colors\n   */\n  get EXTENSIONS() {\n    return {\n      doc: \"#3e74da\",\n      docx: \"#3e74da\",\n      odt: \"#3e74da\",\n      pdf: \"#d47373\",\n      rtf: \"#656ecd\",\n      tex: \"#5a5a5b\",\n      txt: \"#5a5a5b\",\n      pptx: \"#e07066\",\n      ppt: \"#e07066\",\n      mp3: \"#eab456\",\n      mp4: \"#f676a6\",\n      xls: \"#3f9e64\",\n      html: \"#2988f0\",\n      htm: \"#2988f0\",\n      png: \"#f676a6\",\n      jpg: \"#f67676\",\n      jpeg: \"#f67676\",\n      gif: \"#f6af76\",\n      zip: \"#4f566f\",\n      rar: \"#4f566f\",\n      exe: \"#e26f6f\",\n      svg: \"#bf5252\",\n      key: \"#e07066\",\n      sketch: \"#df821c\",\n      ai: \"#df821c\",\n      psd: \"#388ae5\",\n      dmg: \"#e26f6f\",\n      json: \"#2988f0\",\n      csv: \"#3f9e64\",\n    };\n  }\n\n  /**\n   * Return Block data\n   * @param {HTMLElement} toolsContent\n   * @return {AttachesToolData}\n   */\n  save(toolsContent) {\n    /**\n     * If file was uploaded\n     */\n    if (this.pluginHasData()) {\n      const title = toolsContent.querySelector(`.${this.CSS.title}`).innerHTML;\n\n      Object.assign(this.data, { title });\n    }\n\n    return this.data;\n  }\n\n  /**\n   * Renders Block content\n   * @return {HTMLDivElement}\n   */\n  render() {\n    const holder = this.make(\"div\", this.CSS.baseClass);\n\n    this.nodes.wrapper = this.make(\"div\", this.CSS.wrapper);\n\n    if (this.pluginHasData()) {\n      this.showFileData();\n    } else {\n      this.prepareUploadButton();\n    }\n\n    holder.appendChild(this.nodes.wrapper);\n\n    return holder;\n  }\n\n  /**\n   * Prepares button for file uploading\n   */\n  prepareUploadButton() {\n    this.nodes.button = this.make(\"div\", [this.CSS.apiButton, this.CSS.button]);\n    this.nodes.button.innerHTML = `${Icon} ${this.config.buttonText}`;\n    this.nodes.button.addEventListener(\"click\", this.enableFileUpload);\n    this.nodes.wrapper.appendChild(this.nodes.button);\n  }\n\n  /**\n   * Fires after clicks on the Toolbox AttachesTool Icon\n   * Initiates click on the Select File button\n   * @public\n   */\n  appendCallback() {\n    this.nodes.button.click();\n  }\n\n  /**\n   * Checks if any of Tool's fields have data\n   * @return {boolean}\n   */\n  pluginHasData() {\n    return (\n      this.data.title !== \"\" ||\n      Object.values(this.data.file).some((item) => item !== undefined)\n    );\n  }\n\n  /**\n   * Allow to upload files on button click\n   */\n  enableFileUpload() {\n    this.uploader.uploadSelectedFile({\n      onPreview: () => {\n        this.nodes.wrapper.classList.add(\n          this.CSS.wrapperLoading,\n          this.CSS.loader\n        );\n      },\n    });\n  }\n\n  /**\n   * File uploading callback\n   * @param {UploadResponseFormat} response\n   */\n  onUpload(response) {\n    const body = response.body;\n\n    if (body.success && body.file) {\n      const { url, name, size } = body.file;\n\n      this.data = {\n        file: {\n          url,\n          extension: name.split(\".\").pop(),\n          name,\n          size,\n        },\n        title: name,\n      };\n\n      this.nodes.button.remove();\n      this.showFileData();\n      this.moveCaretToEnd(this.nodes.title);\n      this.nodes.title.focus();\n      this.removeLoader();\n    } else {\n      this.uploadingFailed(this.config.errorMessage);\n    }\n  }\n\n  /**\n   * Handles uploaded file's extension and appends corresponding icon\n   */\n  appendFileIcon() {\n    const extension = this.data.file.extension || \"\";\n    const extensionColor = this.EXTENSIONS[extension];\n\n    const fileIcon = this.make(\"div\", this.CSS.fileIcon, {\n      innerHTML: extensionColor ? CustomFileIcon : FileIcon,\n    });\n\n    if (extensionColor) {\n      fileIcon.style.color = extensionColor;\n      fileIcon.setAttribute(\"data-extension\", extension);\n    }\n\n    this.nodes.wrapper.appendChild(fileIcon);\n  }\n\n  /**\n   * Removes tool's loader\n   */\n  removeLoader() {\n    setTimeout(\n      () =>\n        this.nodes.wrapper.classList.remove(\n          this.CSS.wrapperLoading,\n          this.CSS.loader\n        ),\n      LOADER_TIMEOUT\n    );\n  }\n\n  /**\n   * If upload is successful, show info about the file\n   */\n  showFileData() {\n    this.nodes.wrapper.classList.add(this.CSS.wrapperWithFile);\n\n    const {\n      file: { size, url },\n      title,\n    } = this.data;\n\n    this.appendFileIcon();\n\n    const fileInfo = this.make(\"div\", this.CSS.fileInfo);\n\n    if (title) {\n      this.nodes.title = this.make(\"div\", this.CSS.title, {\n        contentEditable: !this.readOnly,\n      });\n\n      this.nodes.title.textContent = title;\n      fileInfo.appendChild(this.nodes.title);\n    }\n\n    if (size) {\n      let sizePrefix;\n      let formattedSize;\n      const fileSize = this.make(\"div\", this.CSS.size);\n\n      if (Math.log10(+size) >= 6) {\n        sizePrefix = \"MB\";\n        formattedSize = size / Math.pow(2, 20);\n      } else {\n        sizePrefix = \"KB\";\n        formattedSize = size / Math.pow(2, 10);\n      }\n\n      fileSize.textContent = formattedSize.toFixed(1) + sizePrefix;\n      fileSize.setAttribute(\"data-size\", sizePrefix);\n      fileInfo.appendChild(fileSize);\n    }\n\n    this.nodes.wrapper.appendChild(fileInfo);\n    const downloadIcon = this.make(\"a\", this.CSS.downloadButton, {\n      innerHTML: DownloadIcon,\n      href: url,\n      target: \"_blank\",\n      rel: \"nofollow noindex noreferrer\",\n    });\n\n    this.nodes.wrapper.appendChild(downloadIcon);\n  }\n\n  /**\n   * If file uploading failed, remove loader and show notification\n   * @param {string} errorMessage -  error message\n   */\n  uploadingFailed(errorMessage) {\n    this.api.notifier.show({\n      message: errorMessage,\n      style: \"error\",\n    });\n\n    this.removeLoader();\n  }\n\n  /**\n   * Return Attaches Tool's data\n   * @return {AttachesToolData}\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Stores all Tool's data\n   * @param {AttachesToolData} data\n   */\n  set data({ file, title }) {\n    this._data = Object.assign(\n      {},\n      {\n        file: {\n          url: (file && file.url) || this._data.file.url,\n          name: (file && file.name) || this._data.file.name,\n          extension: (file && file.extension) || this._data.file.extension,\n          size: (file && file.size) || this._data.file.size,\n        },\n        title: title || this._data.title,\n      }\n    );\n  }\n\n  /**\n   * Moves caret to the end of contentEditable element\n   * @param {HTMLElement} element - contentEditable element\n   */\n  moveCaretToEnd(element) {\n    const range = document.createRange();\n    const selection = window.getSelection();\n\n    range.selectNodeContents(element);\n    range.collapse(false);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  /**\n   * Helper method for elements creation\n   * @param tagName\n   * @param classNames\n   * @param attributes\n   * @return {HTMLElement}\n   */\n  make(tagName, classNames = null, attributes = {}) {\n    const el = document.createElement(tagName);\n\n    if (Array.isArray(classNames)) {\n      el.classList.add(...classNames);\n    } else if (classNames) {\n      el.classList.add(classNames);\n    }\n\n    for (const attrName in attributes) {\n      el[attrName] = attributes[attrName];\n    }\n\n    return el;\n  }\n}\n","import React from \"react\";\nimport { MdAddCircle } from \"react-icons/md\";\n\nimport \"./style.css\";\nimport SmallButton from \"../../../../../components/buttons/SmallButton\";\n\nconst EventTimeline = (props) => {\n  const [timelineData, setTimelineData] = React.useState(\n    props.data.events.length > 0 ? props.data : DEFAULT_INITIAL_DATA\n  );\n\n  const updateTimelineData = (newData) => {\n    setTimelineData(newData);\n    if (props.onDataChange) {\n      // Inform editorjs about data change\n      props.onDataChange(newData);\n    }\n  };\n\n  const onAddEvent = (e) => {\n    const newData = {\n      ...timelineData,\n    };\n    newData.events.push({\n      time: \"Time\",\n      description: \"Description\",\n    });\n    updateTimelineData(newData);\n  };\n\n  const onRemoveEvent = (index) => {\n    const newData = {\n      ...timelineData,\n    };\n    newData.events.splice(index, 1);\n    updateTimelineData(newData);\n  };\n\n  const onContentChange = (index, fieldName) => {\n    return (e) => {\n      const newData = {\n        ...timelineData,\n      };\n      newData.events[index][fieldName] = e.currentTarget.textContent;\n      updateTimelineData(newData);\n    };\n  };\n\n  return (\n    <div className=\"container mb-2\">\n      <div className=\"row\">\n        <div className=\"col\">\n          <ul className=\"timeline\">\n            {timelineData.events.map((event, index) => (\n              <>\n                <li>\n                  <p\n                    onBlur={onContentChange(index, \"time\")}\n                    contentEditable={!props.readOnly}\n                  >\n                    {event.time}\n                  </p>\n                  <p\n                    onBlur={onContentChange(index, \"description\")}\n                    contentEditable={!props.readOnly}\n                  >\n                    {event.description}\n                  </p>\n                </li>\n                {!props.readOnly && (\n                  <SmallButton\n                    style={{\n                      position: \"relative\",\n                      left: \"-50px\",\n                      top: \"-100px\",\n                      // listStyle: \"none\",\n                      // marginLeft: \"18px\",\n                      fontSize: \"25px\",\n                    }}\n                    variant=\"link\"\n                    color=\"#0088a9\"\n                    onClick={() => onRemoveEvent(index)}\n                  >\n                    &times;\n                  </SmallButton>\n                )}\n              </>\n            ))}\n          </ul>\n          {!props.readOnly && (\n            <li\n              style={{\n                position: \"relative\",\n                top: \"-29px\",\n                zIndex: \"2\",\n                listStyle: \"none\",\n                marginLeft: \"18px\",\n                fontSize: \"25px\",\n              }}\n            >\n              <MdAddCircle color=\"#0088a9\" onClick={onAddEvent} />\n            </li>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst DEFAULT_INITIAL_DATA = () => {\n  return {\n    events: [\n      {\n        time: \"Time\",\n        description: \"Description\",\n      },\n    ],\n  };\n};\n\nexport default EventTimeline;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport EventTimeline from \"./eventTimeline\";\n\nexport default class Timeline {\n  static get toolbox() {\n    return {\n      icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 18.5c-.82 0-1.5-.67-1.5-1.5s.68-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM19 5v4H5V5h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 8.5c-.82 0-1.5-.67-1.5-1.5S6.18 5.5 7 5.5s1.5.68 1.5 1.5S7.83 8.5 7 8.5z\"/></svg>`,\n      title: \"Timeline\",\n    };\n  }\n\n  static get isReadOnlySupported() {\n    return true;\n  }\n\n  constructor({ data, config, api, readOnly }) {\n    this.api = api;\n    this.readOnly = readOnly;\n    this.data = {\n      events: data.events || [],\n    };\n\n    this.CSS = {\n      wrapper: \"walkthrough-custom-timeline\",\n    };\n\n    this.nodes = {\n      holder: null,\n    };\n  }\n\n  render() {\n    const rootNode = document.createElement(\"div\");\n    rootNode.setAttribute(\"class\", this.CSS.wrapper);\n    this.nodes.holder = rootNode;\n\n    const onDataChange = (newData) => {\n      this.data = {\n        ...newData,\n      };\n    };\n\n    ReactDOM.render(\n      <EventTimeline\n        onDataChange={onDataChange}\n        readOnly={this.readOnly}\n        data={this.data}\n      />,\n      rootNode\n    );\n\n    return this.nodes.holder;\n  }\n\n  save() {\n    return this.data;\n  }\n}\n","export function parseHeaderToMarkdown(blocks) {\n  switch (blocks.level) {\n    case 1:\n      return `# ${blocks.text}\\n`;\n    case 2:\n      return `## ${blocks.text}\\n`;\n    case 3:\n      return `### ${blocks.text}\\n`;\n    case 4:\n      return `#### ${blocks.text}\\n`;\n    case 5:\n      return `##### ${blocks.text}\\n`;\n    case 6:\n      return `###### ${blocks.text}\\n`;\n    default:\n      break;\n  }\n}\n\nexport function parseMarkdownToHeader(blocks) {\n  let headerData = {};\n\n  switch (blocks.depth) {\n    case 1:\n      blocks.children.forEach((item) => {\n        headerData = {\n          data: {\n            level: 1,\n            text: item.value,\n          },\n          type: 'header',\n        };\n      });\n\n      return headerData;\n    case 2:\n      blocks.children.forEach((item) => {\n        headerData = {\n          data: {\n            level: 2,\n            text: item.value,\n          },\n          type: 'header',\n        };\n      });\n\n      return headerData;\n    case 3:\n      blocks.children.forEach((item) => {\n        headerData = {\n          data: {\n            level: 3,\n            text: item.value,\n          },\n          type: 'header',\n        };\n      });\n\n      return headerData;\n    case 4:\n      blocks.children.forEach((item) => {\n        headerData = {\n          data: {\n            level: 4,\n            text: item.value,\n          },\n          type: 'header',\n        };\n      });\n\n      return headerData;\n    case 5:\n      blocks.children.forEach((item) => {\n        headerData = {\n          data: {\n            level: 5,\n            text: item.value,\n          },\n          type: 'header',\n        };\n      });\n\n      return headerData;\n    case 6:\n      blocks.children.forEach((item) => {\n        headerData = {\n          data: {\n            level: 6,\n            text: item.value,\n          },\n          type: 'header',\n        };\n      });\n\n      return headerData;\n    default:\n      break;\n  }\n}\n","export function parseParagraphToMarkdown(blocks) {\n  return `${blocks.text}\\n`;\n}\n\nexport function parseMarkdownToParagraph(blocks) {\n  let paragraphData = {};\n\n  if (blocks.type === 'paragraph') {\n    blocks.children.forEach((item) => {\n      if (item.type === 'text') {\n        paragraphData = {\n          data: {\n            text: item.value,\n          },\n          type: 'paragraph',\n        };\n      }\n      if (item.type === 'image') {\n        paragraphData = {\n          data: {\n            caption: item.title,\n            stretched: false,\n            url: item.url,\n            withBackground: false,\n            withBorder: false,\n          },\n          type: 'image',\n        };\n      }\n    });\n  }\n  return paragraphData;\n}\n","export function parseListToMarkdown(blocks) {\n  let items = {};\n  switch (blocks.style) {\n    case 'unordered':\n      items = blocks.items.map((item) => (`* ${item}`));\n\n      return items;\n    case 'ordered':\n      items = blocks.items.map((item, index) => (`${index + 1} ${item}`));\n\n      return items;\n    default:\n      break;\n  }\n}\n\nexport function parseMarkdownToList(blocks) {\n  let listData = {};\n  const itemData = [];\n\n  blocks.children.forEach((items) => {\n    items.children.forEach((listItem) => {\n      listItem.children.forEach((listEntry) => {\n        itemData.push(listEntry.value);\n      });\n    });\n  });\n\n  listData = {\n    data: {\n      items: itemData,\n      style: blocks.ordered ? 'ordered' : 'unordered',\n    },\n    type: 'list',\n  };\n\n  return listData;\n}\n","export function parseImageToMarkdown(blocks) {\n  return `![${blocks.caption}](${blocks.url} \"${blocks.caption}\")`.concat('\\n');\n}\n","export function parseCheckboxToMarkdown(blocks) {\n  let items = {};\n\n  items = blocks.items.map((item) => {\n    if (item.checked === true) {\n      return `- [x] ${item.text}`;\n    }\n    return `- [ ] ${item.text}`;\n  });\n\n  return items.join('\\n');\n}\n","export function parseQuoteToMarkdown(blocks) {\n  return `> ${blocks.text}\\n`;\n}\n\nexport function parseMarkdownToQuote(blocks) {\n  let quoteData = {};\n\n  blocks.children\n    .forEach((items) => {\n      items.children.forEach((listItem) => {\n        if (listItem.type === 'text') {\n          quoteData = {\n            data: {\n              alignment: 'left',\n              caption: '',\n              text: listItem.value,\n            },\n            type: 'quote',\n          };\n        }\n      });\n    });\n\n  return quoteData;\n}\n","export function parseCodeToMarkdown(blocks) {\n  return `\\`\\`\\`\\n${blocks.code}\\n\\`\\`\\`\\n`;\n}\n\nexport function parseMarkdownToCode(blocks) {\n  const codeData = {\n    data: {\n      code: blocks.value,\n    },\n    type: 'code',\n  };\n\n  return codeData;\n}\n","/**\n * Function which takes data and creates a markdown file\n * @param content of the file\n * @param fileName\n *\n */\nexport function fileDownloadHandler(content, fileName) {\n  const file = new File([content], {\n    type: \"text/markdown\",\n    endings: \"transparent\",\n  });\n  const url = URL.createObjectURL(file);\n\n  const element = document.createElement(\"a\");\n  document.body.appendChild(element);\n  element.href = url;\n  element.download = fileName;\n  element.click();\n  window.URL.revokeObjectURL(url);\n  document.body.removeChild(element);\n}\n","import { parseHeaderToMarkdown } from \"./BlockTypeParsers/HeaderTypeParser\";\nimport { parseParagraphToMarkdown } from \"./BlockTypeParsers/ParagraphTypeParser\";\nimport { parseListToMarkdown } from \"./BlockTypeParsers/ListTypeParser\";\nimport { parseDelimiterToMarkdown } from \"./BlockTypeParsers/DelimiterTypeParser\";\nimport { parseImageToMarkdown } from \"./BlockTypeParsers/ImageTypeParser\";\nimport { parseCheckboxToMarkdown } from \"./BlockTypeParsers/CheckboxTypeParser\";\nimport { parseQuoteToMarkdown } from \"./BlockTypeParsers/QuoteTypeParser\";\nimport { parseCodeToMarkdown } from \"./BlockTypeParsers/CodeTypeParser\";\nimport { fileDownloadHandler } from \"./FileHandler\";\n\n/**\n * Markdown Parsing class\n */\nexport default class MarkdownParser {\n  /**\n   * creates the Parser plugin\n   * {editorData, api functions} - necessary to interact with the editor\n   */\n  constructor({ data, api, readOnly }) {\n    this.data = data;\n    this.api = api;\n    this.readOnly = readOnly;\n  }\n\n  /**\n   * @return Plugin data such as title and icon\n   */\n  static get toolbox() {\n    return {\n      title: \"Download Markdown\",\n      icon:\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"rgb(112, 118, 132)\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-download\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"7 10 12 15 17 10\"></polyline><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line></svg>',\n    };\n  }\n\n  /**\n   * Notify core that read-only mode is supported\n   * @returns {boolean}\n   */\n  static get isReadOnlySupported() {\n    return true;\n  }\n\n  /**\n   * @return empty div and run the export function\n   */\n  render() {\n    const doc = document.createElement(\"div\");\n\n    this.getContent();\n    return doc;\n  }\n\n  /**\n   * Function which takes saved editor data and runs the different parsing helper functions\n   * @return Markdown file download\n   */\n  async getContent() {\n    const today = new Date();\n    const dd = String(today.getDate()).padStart(2, \"0\");\n    const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // January is 0!\n    const yyyy = today.getFullYear();\n\n    const initialData = {};\n    const data = await this.api.saver.save();\n\n    initialData.content = data.blocks;\n\n    const parsedData = initialData.content.map((item) => {\n      // iterate through editor data and parse the single blocks to markdown syntax\n      switch (item.type) {\n        case \"header\":\n          return parseHeaderToMarkdown(item.data);\n        case \"paragraph\":\n          return parseParagraphToMarkdown(item.data);\n        case \"list\":\n          return parseListToMarkdown(item.data);\n        case \"delimiter\":\n          return parseDelimiterToMarkdown(item);\n        case \"image\":\n          return parseImageToMarkdown(item.data);\n        case \"quote\":\n          return parseQuoteToMarkdown(item.data);\n        case \"checkbox\":\n          return parseCheckboxToMarkdown(item.data);\n        case \"code\":\n          return parseCodeToMarkdown(item.data);\n        case \"checklist\":\n          return parseCheckboxToMarkdown(item.data);\n        default:\n          break;\n      }\n    });\n\n    // take parsed data and create a markdown file\n    fileDownloadHandler(parsedData.join(\"\\n\"), `entry_${dd}-${mm}-${yyyy}.md`);\n  }\n\n  save() {\n    return {\n      message: \"Downloading Markdown\",\n    };\n  }\n}\n","export function parseDelimiterToMarkdown() {\n  const delimiter = '---';\n\n  return delimiter.concat('\\n');\n}\n\nexport function parseMarkdownToDelimiter() {\n  let delimiterData = {};\n\n  delimiterData = {\n    data: {\n      items: [],\n    },\n    type: 'delimiter',\n  };\n\n  return delimiterData;\n}\n","import * as remark from \"remark\";\nimport { parseMarkdownToHeader } from \"./BlockTypeParsers/HeaderTypeParser\";\nimport { parseMarkdownToParagraph } from \"./BlockTypeParsers/ParagraphTypeParser\";\nimport { parseMarkdownToList } from \"./BlockTypeParsers/ListTypeParser\";\nimport { parseMarkdownToDelimiter } from \"./BlockTypeParsers/DelimiterTypeParser\";\nimport { parseMarkdownToCode } from \"./BlockTypeParsers/CodeTypeParser\";\nimport { parseMarkdownToQuote } from \"./BlockTypeParsers/QuoteTypeParser\";\n\nexport const editorData = [];\n\n/**\n * Markdown Import class\n */\nexport default class MarkdownImporter {\n  /**\n   * creates the Importer plugin\n   * {editorData, api functions} - necessary to interact with the editor\n   */\n  constructor({ data, api, readOnly }) {\n    this.data = data;\n    this.api = api;\n    this.readOnly = readOnly;\n  }\n\n  /**\n   * @return Plugin data such as title and icon\n   */\n  static get toolbox() {\n    return {\n      title: \"Import Markdown\",\n      icon:\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"rgb(112, 118, 132)\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-fileUpload\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg>',\n    };\n  }\n\n  static get isReadOnlySupported() {\n    return true;\n  }\n\n  /**\n   * @return invisible file upload form\n   */\n  render() {\n    const doc = document.createElement(\"input\");\n    doc.setAttribute(\"id\", \"file-upload\");\n    doc.setAttribute(\"type\", \"file\");\n    doc.setAttribute(\"style\", \"display: none\");\n    doc.setAttribute(\"name\", \"files[]\");\n    doc.setAttribute(\"onload\", this.parseMarkdown());\n\n    return doc;\n  }\n\n  /**\n   * Function which parses markdown file to JSON which corresponds the the editor structure\n   * @return Parsed markdown in JSON format\n   */\n  async parseMarkdown() {\n    // empty the array before running the function again\n    editorData.length = 0;\n\n    const a = {};\n    const data = await this.api.saver.save();\n    a.content = data.blocks;\n\n    const fileUpload = document.getElementById(\"file-upload\");\n\n    fileUpload.onchange = (e) => {\n      const file = e.target.files[0];\n\n      const reader = new FileReader();\n      reader.readAsText(file, \"UTF-8\");\n\n      reader.onload = (readerEvent) => {\n        const content = readerEvent.target.result;\n\n        const parsedMarkdown = remark().parse(content);\n        // iterating over the pared remarkjs syntax tree and executing the json parsers\n        parsedMarkdown.children.forEach((item, index) => {\n          switch (item.type) {\n            case \"heading\":\n              return editorData.push(parseMarkdownToHeader(item));\n            case \"paragraph\":\n              return editorData.push(parseMarkdownToParagraph(item));\n            case \"list\":\n              return editorData.push(parseMarkdownToList(item));\n            case \"thematicBreak\":\n              return editorData.push(parseMarkdownToDelimiter());\n            case \"code\":\n              return editorData.push(parseMarkdownToCode(item));\n            case \"blockquote\":\n              return editorData.push(parseMarkdownToQuote(item));\n            default:\n              break;\n          }\n        });\n        // clear the editor\n        this.api.blocks.clear();\n        // render the editor with imported markdown data\n        this.api.blocks.render({\n          blocks: editorData.filter((value) => Object.keys(value).length !== 0), // filter through array and remove empty objects\n        });\n\n        return remark().parse(content);\n      };\n    };\n\n    fileUpload.click();\n  }\n\n  save() {\n    return {\n      message: \"Uploading Markdown\",\n    };\n  }\n}\n","import MarkdownParser from \"./MarkdownParser\";\nimport MarkdownImporter from \"./MarkdownImporter\";\n\nexport const MDParser = MarkdownParser;\nexport const MDImporter = MarkdownImporter;\n","/**\n * node \n * @param tagName\n * @param classNames\n * @param attributes\n * @returns {*}\n */\nexport function make(tagName, classNames = null, attributes = {}) {\n  const el = document.createElement(tagName);\n\n  if (Array.isArray(classNames)) {\n    el.classList.add(...classNames);\n  } else if (classNames) {\n    el.classList.add(classNames);\n  }\n\n  for (const attrName in attributes) {\n    el[attrName] = attributes[attrName];\n  }\n  return el;\n}\n","/**\n * Build styles\n */\nimport \"./index.css\";\nimport { make } from \"./utils\";\n\nexport class AlignmentBlockTune {\n  /**\n   * Default alignment\n   *\n   * @public\n   * @returns {string}\n   */\n  static get DEFAULT_ALIGNMENT() {\n    return \"left\";\n  }\n\n  static get isTune() {\n    return true;\n  }\n\n  getAlignment() {\n    if (\n      !!this.settings?.blocks &&\n      this.settings.blocks.hasOwnProperty(this.block.name)\n    ) {\n      return this.settings.blocks[this.block.name];\n    }\n    if (!!this.settings?.default) {\n      return this.settings.default;\n    }\n    return AlignmentBlockTune.DEFAULT_ALIGNMENT;\n  }\n  /**\n   *\n   * @param api\n   * @param data \n   * @param settings tune\n   * @param block tuneblock\n   */\n  constructor({ api, data, settings, block }) {\n    this.api = api;\n    this.block = block;\n    /**\n     config:{\n            default: \"right\",\n            blocks: {\n              header: 'center',\n              list: 'right'\n            }\n          },\n     */\n    this.settings = settings;\n    this.data = data || { alignment: this.getAlignment() };\n    this.alignmentSettings = [\n      {\n        name: \"left\",\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer\" enable-background=\"new 0 0 64 64\" height=\"20\" viewBox=\"0 0 64 64\" width=\"20\"><path d=\"m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z\"/><path d=\"m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z\"/></svg>`,\n      },\n      {\n        name: \"center\",\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer\" enable-background=\"new 0 0 64 64\" height=\"20\" viewBox=\"0 0 64 64\" width=\"20\"><path d=\"m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z\"/><path d=\"m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z\"/></svg>`,\n      },\n      {\n        name: \"right\",\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer\" enable-background=\"new 0 0 64 64\" height=\"20\" viewBox=\"0 0 64 64\" width=\"20\"><path d=\"m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z\"/><path d=\"m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z\"/></svg>`,\n      },\n    ];\n    this._CSS = {\n      alignment: {\n        left: \"ce-tune-alignment--left\",\n        center: \"ce-tune-alignment--center\",\n        right: \"ce-tune-alignment--right\",\n      },\n    };\n  }\n\n  /**\n   * blockwrap\n   * constructoralignmentholder\n   * rendertune\n   * @param blockContent\n   */\n  wrap(blockContent) {\n    this.wrapper = make(\"div\");\n    this.wrapper.classList.toggle(this._CSS.alignment[this.data.alignment]);\n    this.wrapper.append(blockContent);\n    return this.wrapper;\n  }\n\n  /**\n   * rendering block tune\n   * @returns {*}\n   */\n  render() {\n    const wrapper = make(\"div\");\n    this.alignmentSettings\n      .map((align) => {\n        const button = document.createElement(\"button\");\n        button.classList.add(this.api.styles.settingsButton);\n        button.innerHTML = align.icon;\n\n        button.classList.toggle(\n          this.api.styles.settingsButtonActive,\n          align.name === this.data.alignment\n        );\n        wrapper.appendChild(button);\n        return button;\n      })\n      .forEach((element, index, elements) => {\n        element.addEventListener(\"click\", () => {\n          this.data = {\n            alignment: this.alignmentSettings[index].name,\n          };\n          elements.forEach((el, i) => {\n            const { name } = this.alignmentSettings[i];\n            el.classList.toggle(\n              this.api.styles.settingsButtonActive,\n              name === this.data.alignment\n            );\n            //toggle alignment style class for block\n            this.wrapper.classList.toggle(\n              this._CSS.alignment[name],\n              name === this.data.alignment\n            );\n          });\n        });\n      });\n    return wrapper;\n  }\n  /**\n   * save\n   * @returns {*}\n   */\n  save() {\n    return this.data;\n  }\n}\n\nexport default AlignmentBlockTune;\n\n// module.exports = AlignmentBlockTune;\n","// src: https://github.com/editor-js/awesome-editorjs\n\n// TEXT\n// import Paragraph from \"@editorjs/paragraph\";\n// import Header from \"@editorjs/header\";\nimport Paragraph from \"editorjs-paragraph-with-alignment\"; // https://github.com/kaaaaaaaaaaai/paragraph-with-alignment\nimport Header from \"editorjs-header-with-anchor\"; // https://github.com/Aleksst95/header-with-anchor\nimport CheckList from \"@editorjs/checklist\";\nimport CodeBox from \"./codebox\";\nimport Delimiter from \"@editorjs/delimiter\";\n\n// LIST\nimport List from \"@editorjs/list\";\n// import NestedList from \"@editorjs/nested-list\"; // https://github.com/editor-js/nested-list\n\n// TABLE\nimport Table from \"@editorjs/table\";\n// import Table from \"editorjs-table\"; // https://github.com/editor-js/table NOT WORK ON READONLY\n// import Table from \"./table/plugin\";\n\n// MEDIA / EMBED\nimport Alert from \"editorjs-alert\"; // https://github.com/vishaltelangre/editorjs-alert\nimport Html from \"@editorjs/embed\"; // https://github.com/editor-js/embed\nimport AttachesTool from \"./attaches\"; // https://github.com/editor-js/attaches\n// import LinkTool from \"@editorjs/link\"; // https://github.com/editor-js/link\n// import Image from \"@editorjs/custom-image\";\n// import Gist from \"editorjs-github-gist-plugin\"; // https://github.com/ranemihir/editorjs-github-gist-plugin\n// import SocialPost from \"editorjs-social-post-plugin\"; // https://github.com/ranemihir/editorjs-social-post-plugin\n// import SimpleImage from \"@editorjs/simple-custom-image\";\n\n// INLINE TOOLS\nimport Marker from \"@editorjs/marker\";\nimport InlineCode from \"@editorjs/inline-code\"; // https://github.com/editor-js/inline-code\n// import { StyleInlineTool } from \"editorjs-style\"; // https://github.com/hata6502/editorjs-style\n// https://github.com/natterstefan/editorjs-inline-tool\n\nimport SimpleImage from \"@editorjs/simple-image\";\n\n// CUSTOM\nimport Image from \"./custom-image/tool\";\nimport ImageTool from \"@editorjs/image\";\nimport Timeline from \"./custom-timeline/tool\";\nimport { MDImporter, MDParser } from \"./markdown\";\n\n// TUNES\nimport AlignmentBlockTune from \"./align-tune\";\n\nexport const EDITOR_JS_TOOLS = {\n  codeBox: CodeBox,\n\n  attaches: {\n    class: AttachesTool,\n    config: {\n      endpoint: \"http://localhost:4000/upload\",\n    },\n  },\n  checkList: CheckList,\n  delimiter: Delimiter,\n\n  alignTune: AlignmentBlockTune,\n  // social: SocialPost,\n\n  marker: Marker,\n  inlineCode: InlineCode,\n\n  paragraph: {\n    class: Paragraph,\n    inlineToolbar: true,\n    // tunes: [\"alignTune\"],\n  },\n  list: {\n    class: List,\n    inlineToolbar: true,\n  },\n  header: {\n    class: Header,\n    inlineToolbar: true,\n    tunes: [\"alignTune\"],\n  },\n  embed: Html,\n  table: Table,\n  alert: Alert,\n\n  // image: Image,\n  markdownParser: MDParser,\n  markdownImporter: MDImporter,\n  timeline: Timeline,\n\n  // linkTool: LinkTool,\n  image: {\n    class: ImageTool,\n    config: {\n      endpoints: {\n        byFile: \"http://localhost:4000/upload\", // Your backend file uploader endpoint\n        byUrl: \"http://localhost:8008/fetchUrl\", // Your endpoint that provides uploading by Url\n      },\n    },\n  },\n  // gist: Gist,\n};\n","import React, { useEffect, useRef } from \"react\";\nimport EditorJs from \"react-editor-js\";\nimport DragDrop from \"editorjs-drag-drop\";\nimport Undo from \"editorjs-undo\";\nimport { EDITOR_JS_TOOLS } from \"./tools\";\nimport { useModeContext } from \"../../../../providers/ModeProvider\";\nimport { useActiveModuleContext } from \"../../../ActiveModuleProvider\";\n\nconst EditorJS = ({ module, hasEditPermission }) => {\n  const [editMode] = useModeContext();\n\n  const editor = useRef();\n  const { activeModule, updateActiveModule, toggleActiveModule } =\n    useActiveModuleContext();\n\n  useEffect(() => {\n    console.log(\"Editor REF\", editor);\n  }, [editor]);\n\n  const handleSave = async () => {\n    const savedData = await editor.current.save();\n    const updatedModule = { ...module, body: savedData };\n    console.log(\"saved data\", savedData);\n    if (!activeModule || activeModule._id !== module._id) {\n      toggleActiveModule(updatedModule);\n    }\n    updateActiveModule(updatedModule);\n  };\n\n  const readOnly = !editMode || !hasEditPermission;\n\n  return (\n    <EditorJs\n      placeholder=\"Let`s write an awesome story!\"\n      instanceRef={(instance) => (editor.current = instance)}\n      data={module.body}\n      tools={EDITOR_JS_TOOLS}\n      readOnly={readOnly}\n      onChange={handleSave}\n      onReady={() => {\n        if (!readOnly && editor && editMode.current) {\n          new Undo({ editor: editor.current });\n          new DragDrop(editor.current);\n        }\n      }}\n    />\n  );\n};\n\nexport default EditorJS;\n","import React from \"react\";\nimport { Alert as BsAlert } from \"react-bootstrap\";\n\nconst Alert = ({ module }) => {\n  if (!module.body) module.body = placeholder;\n  const { heading, message, variant } = module.body;\n\n  const style = {\n    // overflowY: \"auto\",\n    // height: \"inherit\",\n    height: \"100%\",\n    marginBottom: \"0\",\n  };\n\n  return (\n    <BsAlert style={style} variant={variant}>\n      <BsAlert.Heading>{heading}</BsAlert.Heading>\n      <p>{message}</p>\n    </BsAlert>\n  );\n};\n\nconst placeholder = {\n  heading: \"Alert header!\",\n  message: \"A long text message of the alert\",\n  variant: \"warning\",\n};\n\nexport default Alert;\n","import React, { Suspense, lazy } from \"react\";\nimport EditorJS from \"./types/editor-js/EditorJS\";\nimport Alert from \"./types/Alert\";\n\nconst SuspendImage = lazy(() => import(\"./types/Image\"));\nconst SuspendHtml = lazy(() => import(\"./types/Html\"));\nconst SuspendVideo = lazy(() => import(\"./types/Video\"));\nconst SuspendCarousel = lazy(() => import(\"./types/Carousel\"));\n\nexport const ModuleBuilder = ({\n  module,\n  setUnsavedWarning,\n  hasEditPermission,\n}) => {\n  const Fallback = () => {\n    return <div>Loading...</div>;\n  };\n\n  switch (module.type) {\n    case \"alert\":\n      return <Alert module={module} />;\n    case \"editor-js\":\n      return (\n        <EditorJS\n          module={module}\n          setUnsavedWarning={setUnsavedWarning}\n          hasEditPermission={hasEditPermission}\n        />\n      );\n    case \"carousel\":\n      return (\n        <Suspense fallback={<Fallback />}>\n          <SuspendCarousel module={module} />\n        </Suspense>\n      );\n    case \"html\":\n      return (\n        <Suspense fallback={<Fallback />}>\n          <SuspendHtml module={module} />\n        </Suspense>\n      );\n    case \"image\":\n      return (\n        <Suspense fallback={<Fallback />}>\n          <SuspendImage module={module} />\n        </Suspense>\n      );\n    case \"video\":\n      return (\n        <Suspense fallback={<Fallback />}>\n          <SuspendVideo module={module} />\n        </Suspense>\n      );\n    default:\n      return <Alert module={{ body: { heading: \"Module was not found.\" } }} />;\n  }\n};\n\n// import React from \"react\";\n// import EditorJS from \"./types/editor-js/EditorJS\";\n// import Alert from \"./types/Alert\";\n// import \"./modules.css\";\n// import Image from \"./types/Image\";\n// import Html from \"./types/Html\";\n// import Video from \"./types/Video\";\n// import Carousel from \"./types/Carousel\";\n//\n// export const ModuleBuilder = ({ module, hasEditPermission }) => {\n//   const factory = () => {\n//     switch (module.type) {\n//       case \"alert\":\n//         return Alert;\n//       case \"carousel\":\n//         return Carousel;\n//       case \"editor-js\":\n//         return EditorJS;\n//       case \"html\":\n//         return Html;\n//       case \"image\":\n//         return Image;\n//       case \"video\":\n//         return Video;\n//       default:\n//         return null;\n//     }\n//   };\n//\n//   const Module = factory();\n//\n//   if (!Module) {\n//     return <h3>Module not found</h3>;\n//   }\n//   return <Module module={module} hasEditPermission={hasEditPermission} />;\n// };\n","import React, { useState } from \"react\";\nimport ModuleToolbar from \"./ModuleToolbar\";\nimport { ModuleBuilder } from \"./ModuleBuilder\";\nimport { useModeContext } from \"../../providers/ModeProvider\";\nimport { cloneObj, objectId, roundToTwo } from \"../../utils/functions\";\nimport { SizeMe } from \"react-sizeme\";\nimport { ROW_HEIGHT } from \"../../components/MyGridLayout\";\nimport { usePagesContext } from \"../../App\";\nimport { useActiveModuleContext } from \"../ActiveModuleProvider\";\nimport { Redirect } from \"react-router-dom\";\n\nexport const Module = ({\n  module,\n  setModules,\n  position,\n  setLayouts,\n  addIntoLayouts,\n  warning,\n  setWarning,\n  breakpoint,\n  hasEditPermission,\n}) => {\n  const { pages } = usePagesContext();\n  const { activeModule, toggleActiveModule } = useActiveModuleContext();\n  const [editMode] = useModeContext();\n  const [showToolbar, setShowToolbar] = useState();\n  const [borderColor, setBorderColor] = useState(\"#fff\");\n  const [redirectPath, setRedirectPath] = useState();\n\n  if (!module) return null;\n  const isActive = module._id === activeModule?._id;\n\n  const calcH = (currHeightPx) => {\n    return;\n\n    if (!currHeightPx || !calcTypes.includes(module.type) || !editMode) return;\n    currHeightPx = Math.round(currHeightPx);\n\n    const prevHeightPx = position.h * ROW_HEIGHT;\n    // console.log(`prevPX: ${prevHeightPx} vs currPX: ${currHeightPx}`);\n\n    const currH = roundToTwo(currHeightPx / ROW_HEIGHT);\n    console.log(`${module.type}: prevH: ${position.h} vs currH: ${currH}`);\n\n    if (position.h !== currH) return;\n    // if (position.h >= currH) return;\n\n    setLayouts((prev) => {\n      return {\n        ...prev,\n        [breakpoint]: prev[breakpoint].map((l) => {\n          if (l.i !== position.i) return l;\n          return { ...l, h: currH };\n        }),\n      };\n    });\n  };\n\n  const handleClick = (e) => {\n    if (editMode && hasEditPermission) {\n      toggleActiveModule(module);\n      return;\n    }\n\n    const reference = module?.body?.reference;\n    if (reference && !warning) {\n      redirectTo(reference);\n    }\n  };\n\n  const redirectTo = (reference) => {\n    const isExternalRef = reference.substr(0, 5) === \"https\";\n\n    if (isExternalRef) {\n      window.open(reference, \"_blank\"); // open in new tab\n      return;\n    }\n\n    const path = pages.find((page) => page._id === reference)?.path;\n    if (path) {\n      setRedirectPath(path);\n    }\n  };\n\n  const onPin = () => {\n    setWarning(true);\n    setLayouts((prev) => {\n      return {\n        ...prev,\n        [breakpoint]: prev[breakpoint].map((l) => {\n          if (l.i !== module._id) return l;\n          return { ...l, static: !position.static };\n        }),\n      };\n    });\n  };\n\n  const onRemove = () => {\n    setModules((prev) => {\n      return prev.map((m) => {\n        if (m._id !== module._id) return m;\n        return { ...m, isRemoved: true };\n      });\n    });\n\n    setWarning(true);\n    setLayouts((prev) => {\n      return {\n        lg: prev.lg.filter(({ i }) => i !== module._id),\n        md: prev.md.filter(({ i }) => i !== module._id),\n        sm: prev.sm.filter(({ i }) => i !== module._id),\n      };\n    });\n  };\n\n  const copyCardToClipboard = (module) => {\n    navigator.clipboard.writeText(JSON.stringify(module._id));\n  };\n\n  const createCardCopy = (module, position) => {\n    const newId = objectId();\n\n    const position_copy = cloneObj(position);\n    position_copy.i = newId;\n\n    addIntoLayouts(position_copy, true);\n    setModules((prev) => [...prev, { ...module, _id: newId }]);\n    setWarning(true);\n  };\n\n  const style = {\n    height: \"100%\",\n    borderRadius: \"4px\",\n    border: `1px solid ${\n      isActive && editMode && hasEditPermission ? \"red\" : borderColor\n    }`,\n  };\n\n  const isException = module && module.type === \"editor-js\";\n\n  if (redirectPath) {\n    return <Redirect to={redirectPath} />;\n  }\n\n  return (\n    <div\n      style={style}\n      className={`div-card ${editMode && !isException && \"handle\"}`}\n      onMouseEnter={() => {\n        if (editMode && hasEditPermission) {\n          setShowToolbar(true);\n          setBorderColor(\"#cce5ff\");\n        }\n      }}\n      onMouseLeave={() => {\n        setShowToolbar(false);\n        setBorderColor(\"#fff\");\n      }}\n    >\n      <div onClick={handleClick} style={style}>\n        {editMode && !isException && (\n          <div\n            style={{\n              position: \"absolute\",\n              zIndex: 100,\n              width: \"100%\",\n              height: \"100%\",\n              cursor: \"pointer\",\n            }}\n          />\n        )}\n        <SizeMe monitorHeight>\n          {({ size }) => {\n            calcH(size.height);\n            return (\n              <ModuleBuilder\n                module={isActive ? activeModule : module}\n                hasEditPermission={hasEditPermission}\n              />\n            );\n          }}\n        </SizeMe>\n      </div>\n      <ModuleToolbar\n        position={position}\n        module={module}\n        onPin={onPin}\n        onRemove={onRemove}\n        showToolbar={showToolbar}\n        copyCardToClipboard={copyCardToClipboard}\n        createCardCopy={createCardCopy}\n        toggleActiveModule={toggleActiveModule}\n      />\n    </div>\n  );\n};\n\nconst calcTypes = [\"editor-js\", \"alert\"];\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { getErrorMsg } from \"../../utils/functions\";\nimport { Form as F, FormControl, FormGroup } from \"react-bootstrap\";\nimport SmallButton from \"../../components/buttons/SmallButton\";\nimport { URL_PREFIX } from \"../../config\";\nimport { BsExclamationTriangle } from \"react-icons/bs\";\nimport Modal from \"react-bootstrap/Modal\";\n\nconst NewModuleModal = ({ showModal, modules, addNewModule, toggleModal }) => {\n  const [error, setError] = useState();\n  const [hardCopy, setHardCopy] = useState(false);\n  const toggleHardCopy = () => setHardCopy((prev) => !prev);\n\n  const createType = (e) => {\n    addNewModule({ type: e.target.value });\n    toggleModal();\n  };\n\n  const createCopy = async () => {\n    let _id = await navigator.clipboard.readText();\n\n    if (!_id) {\n      setError(\"Your clipboard is empty\");\n      return;\n    }\n\n    _id = _id.replaceAll('\"', \"\");\n\n    const localModule = modules.find((m) => m._id === _id);\n\n    if (localModule) {\n      if (hardCopy) {\n        setError(\"Cannot create hard copy, module is already at the page\");\n        return;\n      }\n      addNewModule(localModule, hardCopy);\n      toggleModal();\n      return;\n    }\n\n    // find in db\n    axios\n      .get(`${URL_PREFIX}/modules/${_id}`)\n      .then((res) => {\n        addNewModule(res.data, hardCopy);\n        toggleModal();\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n      });\n  };\n\n  const options = [\"alert\", \"carousel\", \"editor-js\", \"html\", \"image\", \"video\"];\n\n  const Delimiter = () => {\n    return (\n      <>\n        <hr />\n        <p className=\"pl-5\">\n          {error ? (\n            <span style={{ color: \"red\" }}>\n              <BsExclamationTriangle /> {error}\n            </span>\n          ) : (\n            <em>or</em>\n          )}\n        </p>\n        <hr />\n      </>\n    );\n  };\n\n  return (\n    <Modal show={showModal} centered onHide={toggleModal}>\n      <Modal.Header closeButton>\n        <Modal.Title>New Module</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <FormGroup>\n          <FormControl as=\"select\" onChange={createType}>\n            <>\n              <option hidden value=\"\">\n                Select type to create empty module\n              </option>\n              {options.map((value, i) => (\n                <option key={`${value}_${i}`} value={value}>\n                  {value}\n                </option>\n              ))}\n            </>\n          </FormControl>\n        </FormGroup>\n        <Delimiter />\n        <FormGroup>\n          <F.Check\n            checked={hardCopy}\n            onChange={toggleHardCopy}\n            label={\"hard copy of module (with same id)\"}\n            type=\"checkbox\"\n          />\n        </FormGroup>\n        <SmallButton\n          className=\"btn-block p-2 mb-2 pl-3 text-left\"\n          onClick={createCopy}\n        >\n          Click to paste id of module from clipboard\n        </SmallButton>\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default NewModuleModal;\n","import React, { useEffect, useState } from \"react\";\nimport Sidebar from \"./Sidebar\";\nimport Toolbar from \"./Toolbar\";\nimport MyGridLayout from \"../components/MyGridLayout\";\nimport {\n  cloneObj,\n  getAuth,\n  getUserPermission,\n  objectId,\n} from \"../utils/functions\";\nimport useWarning from \"../utils/hooks/useWarning\";\nimport { Module } from \"./module/Module\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport NewModuleModal from \"./module/NewModuleModal\";\nimport { useModeContext } from \"../providers/ModeProvider\";\nimport { ActiveModuleProvider } from \"./ActiveModuleProvider\";\n\nconst CustomPage = ({ initPage }) => {\n  document.title = `RG | ${initPage.title}`;\n\n  // ------------ INITIALIZATION ------------\n  const [editMode] = useModeContext();\n  const hasEditPermission = getUserPermission(initPage);\n\n  const [page, setPage] = useState(initPage);\n  const [modules, setModules] = useState(initPage.modules);\n  const [newModule, setNewModule] = useState();\n\n  const [warning, setWarning, Prompt] = useWarning();\n\n  const [showModal, setShowModal] = useState();\n  const toggleModal = () => setShowModal((prev) => !prev);\n\n  const [breakpoint, setBreakpoint] = useState(\"lg\");\n  const [layouts, setLayouts] = useState(() => getInitLayouts(initPage));\n  // ------------ INITIALIZATION ------------\n  console.log(layouts);\n  // ------------ EVENTS HANDLERS ------------\n  useEffect(() => {\n    if (!newModule) return;\n    setModules((prev) => [...prev, newModule]);\n    setWarning(true);\n    setNewModule();\n  }, [newModule]);\n\n  const onLayoutChange = (layout, layouts) => {\n    setLayouts(layouts);\n  };\n\n  const onBreakpointChange = (bp) => {\n    console.log(\"BREAKPOINT\", bp);\n    if (!layouts[bp]) shiftLayout(bp);\n    setBreakpoint(bp);\n  };\n  // ------------ EVENTS HANDLERS ------------\n\n  // ------------ FUNCTIONS ------------\n  function shiftLayout(bp, layout) {\n    const WIDTH = cols[bp];\n\n    if (!layout) {\n      // layout = layouts[bp].sort((a, b) => {\n      layout = layouts.lg.sort((a, b) => {\n        if (a.y === b.y) {\n          return a.x - b.x; // same row, compare X\n        }\n        return a.y - b.y; // different row, compare Y\n      });\n    }\n\n    console.log(`---- START (${bp}) ---- `);\n\n    const autoLayout = [];\n    let [last_x, last_y] = [0, 0];\n\n    for (let l = 0; l < layout.length; l++) {\n      let { w, h, i } = layout[l];\n\n      if (w > WIDTH) w = WIDTH;\n\n      let mod = (last_x + w) % WIDTH;\n      if (mod <= last_x) {\n        if (mod === 0) {\n          console.log(i, \">> FIT TO THE END\");\n          autoLayout.push({ x: last_x, y: last_y, w, h, i });\n          mod = 0;\n        } else {\n          console.log(i, \">> SHIFT TO NEW ROW\");\n          autoLayout.push({ x: 0, y: last_y, w, h, i });\n        }\n        last_y += 1;\n      } else {\n        console.log(i, \">> SHIFT TO LEFT\");\n        autoLayout.push({ x: last_x, y: last_y, w, h, i });\n      }\n      last_x = mod;\n    }\n\n    autoLayout.forEach(({ i, x, y, w }) =>\n      console.log(`${i}. [${x}, ${y}]: ${w}`)\n    );\n    console.log(`---- END (${bp}) ----`);\n\n    setLayouts({ ...layouts, [bp]: autoLayout });\n  }\n\n  async function addNewModule(module, hardCopy) {\n    const module_id = hardCopy ? module._id : objectId();\n\n    const position = cloneObj(addButton);\n    position.i = module_id;\n\n    setNewModule({ ...module, _id: module_id });\n    addIntoLayouts(position, hardCopy !== undefined);\n  }\n\n  function addIntoLayouts(position, last = false) {\n    let lastPosition = layouts[breakpoint].find((l) => l.i === addButton.i);\n\n    if (last) {\n      let newY = lastPosition.y;\n      const newX = (lastPosition.x + 1) % cols[breakpoint];\n      if (newX < lastPosition.x) {\n        newY += 1;\n      }\n      position.x = newX;\n      position.y = newY;\n      lastPosition.x = newX;\n      lastPosition.y = newY;\n    }\n\n    let newY = lastPosition.y;\n    const newX = (lastPosition.x + 1) % cols[breakpoint];\n    if (newX < lastPosition.x) {\n      newY += 1;\n    }\n\n    addButton.x = newX;\n    addButton.y = newY;\n\n    setLayouts((prev) => {\n      // const index = prev.lg.length - 2;\n      // prev.sm.splice(index, 0, position);\n      // prev.md.splice(index, 0, position);\n      // prev.lg.splice(0, 0, position);\n      // console.log(prev.lg);\n\n      // return prev;\n      return {\n        // ...prev,\n        sm: [position, ...prev.sm],\n        md: [position, ...prev.md],\n        lg: [position, ...prev.lg],\n      };\n    });\n\n    return position;\n  }\n\n  const createGridBoxItem = (position) => {\n    const module = modules.find((module) => module._id === position.i);\n    return (\n      <div key={position.i}>\n        <Module\n          module={module}\n          setModules={setModules}\n          position={position}\n          layouts={layouts}\n          addIntoLayouts={(position, last) => addIntoLayouts(position, last)}\n          setLayouts={setLayouts}\n          warning={warning}\n          setWarning={setWarning}\n          breakpoint={breakpoint}\n          hasEditPermission={hasEditPermission}\n        />\n      </div>\n    );\n  };\n  // ------------ FUNCTIONS ------------\n\n  const AddButton = () => (\n    <SmallButton className=\"add-item-button\" onClick={toggleModal}>\n      <span>+</span>\n    </SmallButton>\n  );\n\n  if (!layouts) return null;\n  console.log(\"render PAGE\");\n\n  return (\n    <>\n      <ActiveModuleProvider setModules={setModules} setWarning={setWarning}>\n        {getAuth() && hasEditPermission && (\n          <Toolbar\n            page={page}\n            setPage={setPage}\n            modules={modules}\n            layouts={layouts}\n            warning={warning}\n            setWarning={setWarning}\n          />\n        )}\n        <MyGridLayout\n          breakpoints={breakpoints}\n          cols={cols}\n          layouts={layouts}\n          compactType=\"vertical\"\n          onLayoutChange={onLayoutChange}\n          draggableHandle=\".handle\"\n          onBreakpointChange={onBreakpointChange}\n          setWarning={setWarning}\n          isBounded={true}\n          simulateBreakpoints={hasEditPermission}\n          hasEditPermission={hasEditPermission}\n          style={{ backgroundColor: \"#eee\" }}\n          autoSize={true}\n        >\n          {layouts[breakpoint].slice(0, -1).map(createGridBoxItem)}\n          <div\n            key={addButton.i}\n            style={{\n              display: editMode && hasEditPermission ? \"inline\" : \"none\",\n            }}\n          >\n            <AddButton />\n          </div>\n        </MyGridLayout>\n        <Sidebar />\n        <NewModuleModal\n          showModal={showModal}\n          modules={modules}\n          addNewModule={addNewModule}\n          toggleModal={toggleModal}\n        />\n        {Prompt}\n      </ActiveModuleProvider>\n    </>\n  );\n};\n\n// -----------------------------------------------------------\n\nconst cols = {\n  lg: 3,\n  md: 2,\n  sm: 1,\n};\nconst BREAKPOINTS = [\"lg\", \"md\", \"sm\"];\nconst breakpoints = {\n  lg: 1199,\n  md: 799,\n  sm: 599,\n};\nconst restrictions = {\n  // maxW: 3,\n  // maxH: 2,\n};\nconst addButton = {\n  i: \"addButton\",\n  w: 1,\n  h: 1,\n  x: 0,\n  y: 0,\n  // static: true,\n  ...restrictions,\n};\nconst getInitLayouts = (initPage) => {\n  const initLayouts = cloneObj(initPage.layouts);\n\n  findLastPosition(initLayouts.lg);\n\n  return { ...initLayouts, lg: [...initLayouts.lg, addButton] };\n};\nconst findLastPosition = (layout) => {\n  let w = 0;\n  let x = 0;\n  let y = Math.max(0, ...layout.map((l) => l.y));\n\n  layout\n    .filter((l) => l.y === y)\n    .forEach((l) => {\n      if (l.x >= x) {\n        x = l.x;\n        w = l.w;\n      }\n    });\n\n  x += w;\n  if (x % 3 < x) {\n    y += 1;\n  }\n  x %= 3;\n\n  addButton.x = x;\n  addButton.y = y;\n};\n\nexport default CustomPage;\n","import React, { useState } from \"react\";\nimport { useLocation } from \"react-router\";\nimport { getAuth } from \"./utils/functions\";\nimport SmallButton from \"./components/buttons/SmallButton\";\nimport NewPageModal from \"./components/modals/NewPageModal\";\nimport { usePagesContext } from \"./App\";\n\nconst Page404 = () => {\n  const { pathname } = useLocation();\n  const { pages } = usePagesContext();\n\n  const [showModal, setShowModal] = useState();\n  const toggleModal = () => setShowModal((prev) => !prev);\n\n  if (pages.find((page) => page.path === pathname)) {\n    // path is freshly created\n    // so we don't want to render Page404\n    return null;\n  }\n\n  return (\n    <>\n      <h2 className=\"pt-5\">Page not found</h2>\n      <h5 className=\"pb-3\">\n        Not match for <code>{pathname}</code>\n      </h5>\n      {getAuth() && (\n        <SmallButton onClick={toggleModal}>\n          Create new page with the path\n        </SmallButton>\n      )}\n      {showModal && <NewPageModal onHide={toggleModal} path={pathname} />}\n    </>\n  );\n};\n\nexport default Page404;\n","import React from \"react\";\nimport { Error, Submit } from \"../../components/forms/MyForm\";\nimport { FormControl, FormGroup, FormLabel } from \"react-bootstrap\";\nimport { useForm } from \"react-hook-form\";\n\nconst UserInfoForm = (props) => {\n  const { register, handleSubmit } = useForm({\n    defaultValues: props.defaultValues,\n  });\n\n  return (\n    <form onSubmit={handleSubmit(props.onSubmit)}>\n      <FormGroup>\n        <FormLabel>Current password</FormLabel>\n        <FormControl\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Enter current password\"\n          ref={register}\n          required\n        />\n      </FormGroup>\n      <FormGroup>\n        <FormLabel>New password</FormLabel>\n        <FormControl\n          type=\"password\"\n          name=\"newPassword\"\n          placeholder=\"Enter new password\"\n          ref={register}\n          required\n        />\n      </FormGroup>\n      <FormGroup>\n        <FormLabel>Confirm new password</FormLabel>\n        <FormControl\n          type=\"password\"\n          name=\"confirmPassword\"\n          placeholder=\"Confirm new password\"\n          ref={register}\n          required\n        />\n      </FormGroup>\n\n      <Error error={props.error} />\n      <Submit className=\"btn-block\">Save</Submit>\n    </form>\n  );\n};\n\nexport default UserInfoForm;\n","import React from \"react\";\nimport { Error, Submit } from \"../../components/forms/MyForm\";\nimport { useForm } from \"react-hook-form\";\nimport { FormControl, FormGroup, FormLabel } from \"react-bootstrap\";\n\nconst UserInfoForm = (props) => {\n  const { register, handleSubmit } = useForm({\n    defaultValues: props.defaultValues,\n  });\n\n  return (\n    <form onSubmit={handleSubmit(props.onSubmit)}>\n      <FormGroup>\n        <FormLabel>Name</FormLabel>\n        <FormControl\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Enter name\"\n          ref={register}\n          required\n        />\n      </FormGroup>\n      <FormGroup>\n        <FormLabel>Email</FormLabel>\n        <FormControl\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Enter email\"\n          ref={register}\n          required\n        />\n      </FormGroup>\n      <Error error={props.error} />\n      <Submit className=\"btn-block\">Save</Submit>\n    </form>\n  );\n};\n\nexport default UserInfoForm;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport UserPassForm from \"./forms/UserPassForm\";\nimport { getAuth, getErrorMsg, setAuth } from \"../utils/functions\";\nimport SmallButton from \"../components/buttons/SmallButton\";\nimport { useToastContext } from \"../providers/ToastProvider\";\nimport { URL_PREFIX } from \"../config\";\nimport UserInfoForm from \"./forms/UserInfoForm\";\n\nconst ProfilePage = () => {\n  const [form, setForm] = useState(\"profile\");\n  const [error, setError] = useState();\n  const { setSuccessToast } = useToastContext();\n\n  const auth = getAuth();\n  const user = auth.user;\n\n  const changeForm = (e) => {\n    setError(null);\n    setForm(e.target.id);\n  };\n\n  const saveProfile = (data) => {\n    onSubmit(\"users\", data).then((res) => {\n      if (res.ok) setAuth({ ...auth, user: { ...user, ...data } });\n    });\n  };\n\n  const savePassword = (data) => {\n    onSubmit(\"users/password\", data).then();\n  };\n\n  const onSubmit = (url, data) => {\n    return axios\n      .patch(`${URL_PREFIX}/${url}/${user.id}`, data)\n      .then((res) => {\n        setError(null);\n        setSuccessToast(\"Update succeed\");\n        return {\n          ok: true,\n          data: res,\n        };\n      })\n      .catch((err) => {\n        setError(getErrorMsg(err));\n        return {\n          ok: false,\n          data: err,\n        };\n      });\n  };\n\n  const props = {\n    defaultValues: user,\n    onSubmit: form === \"profile\" ? saveProfile : savePassword,\n    error,\n  };\n\n  const active = (id) => (form === id ? \"active\" : \"\");\n\n  return (\n    <div className=\"d-flex align-items-end justify-content-center mt-5\">\n      <div>\n        <h1>Profile settings</h1>\n        <ButtonGroup className=\"my-3 btn-block\" onClick={changeForm}>\n          <SmallButton id=\"profile\" className={active(\"profile\")}>\n            Change name\n          </SmallButton>\n          <SmallButton id=\"passwd\" className={active(\"passwd\")}>\n            Change pass\n          </SmallButton>\n        </ButtonGroup>\n        {form === \"profile\" ? (\n          <UserInfoForm {...props} />\n        ) : (\n          <UserPassForm {...props} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilePage;\n","import React, { useRef, useState } from \"react\";\nimport uuid from \"react-uuid\";\nimport axios from \"axios\";\nimport { useToastContext } from \"../../providers/ToastProvider\";\nimport { getErrorMsg } from \"../../utils/functions\";\nimport { URL_PREFIX } from \"../../config\";\n\nconst EditableCell = ({ field, page, setPage }) => {\n  const { setErrorToast, setSuccessToast } = useToastContext();\n  const [originState] = useState(page[field]);\n  const ref = useRef(page[field]);\n\n  const handleChange = (e) => {\n    ref.current = e.currentTarget.textContent;\n  };\n\n  const submitChange = (e) => {\n    const textContent = e.currentTarget.textContent;\n\n    axios\n      .patch(`${URL_PREFIX}/pages/${page._id}`, { [field]: textContent })\n      .then((res) => {\n        setSuccessToast(`${field} successfully updated`);\n        setPage((prev) => {\n          return { ...prev, [field]: textContent };\n        });\n      })\n      .catch((err) => {\n        setErrorToast(getErrorMsg(err));\n        ref.current = originState;\n      });\n  };\n\n  return (\n    <td\n      style={{\n        maxWidth: \"200px\",\n        wordWrap: \"normal\",\n        overflowX: \"auto\",\n      }}\n      key={uuid()}\n      id={field}\n      onInput={handleChange}\n      onBlur={submitChange}\n      contentEditable\n    >\n      {ref.current}\n    </td>\n  );\n};\n\nexport default EditableCell;\n","import React, { useEffect, useState } from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport uuid from \"react-uuid\";\nimport SmallButton from \"../../components/buttons/SmallButton\";\nimport axios from \"axios\";\nimport EditableCell from \"./EditableCell\";\nimport { URL_PREFIX } from \"../../config\";\nimport { Link } from \"react-router-dom\";\nimport { useToastContext } from \"../../providers/ToastProvider\";\nimport { getAuth, getErrorMsg } from \"../../utils/functions\";\n\nconst PageRow = ({ page: _page, setPages, fields }) => {\n  const [page, setPage] = useState(_page);\n  const { serErrorToast } = useToastContext();\n\n  const isAdmin = getAuth()?.user.isAdmin;\n  const hasEditPermission =\n    isAdmin || getAuth().user.id === _page.created_by._id;\n\n  const editableFields = [\"title\", \"path\", \"description\"];\n  const isEditable = (field) => editableFields.includes(field);\n\n  useEffect(() => {\n    if (JSON.stringify(_page) === JSON.stringify(page)) return;\n\n    setPages((prev) => prev.map((p) => (p._id !== page._id ? p : page)));\n  }, [page]);\n\n  const removePage = () => {\n    axios\n      .delete(`${URL_PREFIX}/pages/${page._id}`)\n      .then((res) => {\n        setPages((prev) => prev.filter(({ _id }) => _id !== page._id));\n      })\n      .catch((err) => {\n        if (serErrorToast) serErrorToast(getErrorMsg(err));\n      });\n  };\n\n  const Toggle = () => {\n    const { published } = page;\n\n    const handleChange = () => {\n      axios\n        .patch(`${URL_PREFIX}/pages/${page._id}`, { published: !published })\n        .then((res) => {\n          setPage((prev) => {\n            return { ...prev, published: !published };\n          });\n        })\n        .catch((err) => {\n          serErrorToast(getErrorMsg(err));\n        });\n    };\n\n    return (\n      <Form.Switch\n        id={uuid()}\n        checked={published}\n        label={`${published}`}\n        disabled={!isAdmin}\n        onChange={handleChange}\n      />\n    );\n  };\n\n  const Cell = ({ field }) => {\n    let body = page[field];\n\n    if (isEditable(field) && hasEditPermission)\n      return <EditableCell field={field} page={page} setPage={setPage} />;\n\n    if (field === \"published\") {\n      body = <Toggle />;\n    }\n    if (field === \"created_by\") {\n      body = <span>{body?.name || \"unknown\"}</span>;\n    }\n    if (field === \"export\") {\n      body = (\n        <SmallButton\n          id=\"export\"\n          variant=\"outline-primary\"\n          href={`data:text/json;charset=utf-8,${encodeURIComponent(\n            JSON.stringify(page, null, 2)\n          )}`}\n          download=\"data.json\"\n        >\n          Export\n        </SmallButton>\n      );\n    }\n    if (field === \"remove\") {\n      body = (\n        <SmallButton\n          id=\"remove\"\n          variant=\"outline-danger\"\n          onClick={removePage}\n          disabled={!hasEditPermission}\n        >\n          remove\n        </SmallButton>\n      );\n    }\n    if (field === \"open\") {\n      body = (\n        <SmallButton as={Link} to={page.path} variant=\"link\">\n          open\n        </SmallButton>\n      );\n    }\n\n    return (\n      <td key={`${field}_${page._id}`} id={`${field}_${page._id}`}>\n        {body}\n      </td>\n    );\n  };\n\n  return (\n    <tr\n      key={page.title}\n      style={{\n        maxWidth: \"200px\",\n        wordWrap: \"normal\",\n        overflowX: \"auto\",\n      }}\n    >\n      {fields.map((field) => (\n        <Cell field={field} />\n      ))}\n    </tr>\n  );\n};\n\nexport default PageRow;\n","import React, { useState } from \"react\";\nimport Table from \"react-bootstrap/Table\";\nimport PageRow from \"./PageRow\";\nimport SmallButton from \"../../components/buttons/SmallButton\";\nimport NewPageModal from \"../../components/modals/NewPageModal\";\nimport { usePagesContext } from \"../../App\";\nimport { getAuth } from \"../../utils/functions\";\n\nconst PageTable = () => {\n  const { pages, setPages } = usePagesContext();\n  const [showModal, setShowModal] = useState(false);\n  const toggleModal = () => setShowModal((prev) => !prev);\n\n  const columns = new Map([\n    // field: heading\n    [\"title\", \"Title\"],\n    [\"path\", \"Path\"],\n    [\"description\", \"Description\"],\n    [\"created_by\", \"Author\"],\n    [\"published\", \"Published\"],\n    // [\"history\", \"History\"],\n    [\"remove\", \"Remove\"],\n    [\"export\", \"Export\"],\n    [\"open\", \"\"],\n  ]);\n\n  // const hasEditPermission = getAuth()?.user.isAdmin;\n\n  // if (!hasEditPermission) {\n  //   columns.delete(\"published\");\n  //   columns.delete(\"remove\");\n  // }\n\n  const headers = [...columns.values()];\n  const fields = [...columns.keys()];\n\n  return (\n    <div style={{ margin: \"16px\" }}>\n      <h1 className=\"d-inline-block\">Pages table</h1>\n      <SmallButton className=\"mb-3 mx-3\" onClick={toggleModal}>\n        Create new Page\n      </SmallButton>\n\n      <Table responsive>\n        <thead>\n          <tr>\n            {headers.map((head) => (\n              <th key={head}>{head}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {pages.map((page) => (\n            <PageRow\n              page={page}\n              setPages={setPages}\n              fields={fields}\n              // hasEditPermission={hasEditPermission}\n            />\n          ))}\n        </tbody>\n      </Table>\n      <SmallButton onClick={toggleModal}>Create new Page</SmallButton>\n      {showModal && (\n        <NewPageModal\n          onHide={toggleModal}\n          setPages={setPages}\n          redirect={false}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default PageTable;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { URL_PREFIX } from \"../../config\";\n\nconst useGetAxios = (url) => {\n  const [state, setState] = useState({});\n\n  useEffect(() => {\n    console.log(\"url\", url);\n    axios\n      .get(`${URL_PREFIX}${url}`)\n      .then((res) => {\n        setState({\n          isLoaded: true,\n          data: res.data,\n        });\n      })\n      .catch((err) => {\n        setState({\n          isLoaded: false,\n          error: err,\n        });\n      });\n  }, [url]);\n\n  return state;\n};\n\nexport default useGetAxios;\n","import React from \"react\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nexport const FetchLoading = () => {\n  return <Spinner animation=\"border\" className=\"m-5\"/>\n}\n\nexport const FetchError = ({e}) => {\n  return <h6 className=\"p-5\">{`Error: ${e}`}</h6>\n}","import React, { useState } from \"react\";\nimport Image from \"react-bootstrap/Image\";\nimport { formatDate, getAuth, getErrorMsg } from \"../../utils/functions\";\nimport axios from \"axios\";\nimport { Form } from \"react-bootstrap\";\nimport uuid from \"react-uuid\";\nimport NewPageModal from \"../../components/modals/NewPageModal\";\nimport SmallButton from \"../../components/buttons/SmallButton\";\nimport { URL_PREFIX } from \"../../config\";\nimport { useToastContext } from \"../../providers/ToastProvider\";\n\nconst UserRow = ({ user: _user, setUsers, fields }) => {\n  const [user, setUser] = useState(_user);\n  const { isAdmin } = user;\n\n  const { serErrorToast } = useToastContext();\n\n  const [showModal, setShowModal] = useState(false);\n  const toggleModal = () => setShowModal((prev) => !prev);\n\n  const Toggle = () => {\n    const handleChange = () => {\n      axios\n        .patch(`${URL_PREFIX}/users/${user._id}`, { isAdmin: !isAdmin })\n        .then((res) => {\n          setUser((prev) => {\n            return { ...prev, isAdmin: !isAdmin };\n          });\n        })\n        .catch((err) => {\n          serErrorToast(getErrorMsg(err));\n        });\n    };\n\n    return (\n      <Form.Switch\n        id={uuid()}\n        checked={isAdmin}\n        label={`${isAdmin}`}\n        disabled={!getAuth()?.user.isAdmin}\n        onChange={handleChange}\n      />\n    );\n  };\n\n  const removePage = () => {\n    axios\n      .delete(`${URL_PREFIX}/users/${user._id}`)\n      .then((res) => {\n        setUsers((prev) => prev.filter(({ _id }) => _id !== user._id));\n      })\n      .catch((err) => {\n        serErrorToast(getErrorMsg(err));\n      });\n  };\n\n  const Cell = ({ field }) => {\n    let body = user[field];\n\n    if (field === \"pages\") {\n      body = (\n        <SmallButton variant=\"outline-primary\" onClick={toggleModal} disabled>\n          pages\n        </SmallButton>\n      );\n    }\n    if (field === \"isAdmin\") body = <Toggle />;\n    if (field === \"avatar\")\n      body = (\n        <Image\n          // alt=\"avatar\"\n          src={`/${user.avatar}.png`}\n          width=\"30\"\n          height=\"30\"\n        />\n      );\n    if (field === \"register_date\") body = <p>{formatDate(body)}</p>;\n    if (field === \"remove\") {\n      body = (\n        <SmallButton id=\"remove\" variant=\"outline-danger\" onClick={removePage}>\n          remove\n        </SmallButton>\n      );\n    }\n\n    return <td key={field}>{body}</td>;\n  };\n\n  return (\n    <>\n      <tr key={user._id}>\n        {fields.map((field) => (\n          <Cell field={field} />\n        ))}\n      </tr>\n      {showModal && <NewPageModal onHide={toggleModal} />}\n    </>\n  );\n};\n\nexport default UserRow;\n","import React, { useEffect, useState } from \"react\";\nimport Table from \"react-bootstrap/Table\";\nimport useGetAxios from \"../../utils/hooks/useGetAxios\";\nimport { FetchError, FetchLoading } from \"../../components/Fetchers\";\nimport UserRow from \"./UserRow\";\nimport SmallButton from \"../../components/buttons/SmallButton\";\nimport AuthModal from \"../../authorization/AuthModal\";\nimport { getAuth } from \"../../utils/functions\";\n\nconst UsersTable = () => {\n  const { data, isLoaded, error } = useGetAxios(\"/users\");\n\n  const [showModal, setShowModal] = useState(false);\n  const toggleModal = () => setShowModal((prev) => !prev);\n\n  const [users, setUsers] = useState([]);\n\n  useEffect(() => {\n    if (data) setUsers(data);\n  }, [data]);\n\n  if (error) return <FetchError e={error.message} />;\n  if (!isLoaded || !data) return <FetchLoading />;\n\n  const columns = new Map([\n    // field: heading\n    [\"avatar\", \"\"],\n    [\"name\", \"Name\"],\n    [\"email\", \"email\"],\n    [\"isAdmin\", \"Admin\"],\n    [\"register_date\", \"Register\"],\n    [\"remove\", \"Remove\"],\n  ]);\n\n  const hasEditPermission = getAuth()?.user.isAdmin;\n\n  if (!hasEditPermission) {\n    // columns.delete(\"isAdmin\");\n    columns.delete(\"remove\");\n  }\n\n  const headers = [...columns.values()];\n  const fields = [...columns.keys()];\n\n  return (\n    <div style={{ margin: \"16px\" }}>\n      <h1>Users table</h1>\n      <Table responsive>\n        <thead>\n          <tr>\n            {headers.map((head) => (\n              <th key={head}>{head}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {users.map((user) => (\n            <UserRow\n              user={user}\n              fields={fields}\n              setUsers={setUsers}\n              hasEditPermission={hasEditPermission}\n            />\n          ))}\n        </tbody>\n      </Table>\n      {hasEditPermission && (\n        <SmallButton onClick={toggleModal}>Create new user</SmallButton>\n      )}\n      {showModal && (\n        <AuthModal action=\"register\" onHide={toggleModal} setUsers={setUsers} />\n      )}\n    </div>\n  );\n};\n\nexport default UsersTable;\n","import { BsArrowLeftRight } from \"react-icons/bs\";\nimport Select from \"react-select\";\nimport React, { useState } from \"react\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport \"./sloth.css\";\n\nexport const NavSloth = ({ item: _item, setNavItems, options, setWarning }) => {\n  const [item, setItem] = useState(_item);\n\n  const handleSelect = (pages) => {\n    setNavItems((prev) => {\n      return prev.map((s) => {\n        if (s._id !== item._id) return s;\n        return { ...s, pages };\n      });\n    });\n\n    setItem((prev) => {\n      return { ...prev, pages };\n    });\n\n    setWarning(true);\n  };\n\n  const handleChange = (e) => {\n    setWarning(true);\n  };\n\n  const handleBlur = (e) => {\n    const name = e.target.value;\n\n    setNavItems((prev) => {\n      return prev.map((s) => {\n        if (s._id !== item._id) return s;\n        return { ...s, name };\n      });\n    });\n\n    setItem((prev) => {\n      return { ...prev, name };\n    });\n\n    setWarning(true);\n  };\n\n  return (\n    <div>\n      <div className=\"text-center\">\n        <BsArrowLeftRight color=\"black\" className=\"handle\" size=\"20\" />\n      </div>\n      {item?.pages.length > 1 && (\n        <FormControl\n          onBlur={handleBlur}\n          onChange={handleChange}\n          defaultValue={item.name}\n          placeholder=\"Enter dropdown name\"\n        />\n      )}\n      <Select\n        isMulti\n        isClearable={false}\n        value={item?.pages}\n        options={options}\n        onChange={handleSelect}\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport SmallButton from \"../components/buttons/SmallButton\";\n\nimport axios from \"axios\";\nimport { NavSloth } from \"./NavSloth\";\nimport { getAuth, getErrorMsg, objectId } from \"../utils/functions\";\nimport { usePagesContext } from \"../App\";\nimport MyGridLayout from \"../components/MyGridLayout\";\nimport { RiDownloadFill } from \"react-icons/ri\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport { useToastContext } from \"../providers/ToastProvider\";\nimport useWarning from \"../utils/hooks/useWarning\";\nimport Form from \"react-bootstrap/Form\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { URL_PREFIX } from \"../config\";\nimport { Prompt } from \"react-router-dom\";\n\nconst NavSloths = () => {\n  const { setSuccessToast, setErrorToast } = useToastContext();\n  const [warning, setWarning] = useWarning();\n\n  const { pages } = usePagesContext();\n  const options = pages.map((page) => {\n    return {\n      value: page._id,\n      label: page.title,\n    };\n  });\n\n  const [layout, setLayout] = useState({ lg: [] });\n  const [items, setItems] = useState();\n\n  const [exportData, setExportData] = useState();\n  const [filename, setFilename] = useState(\"Import local file\");\n\n  const [publishedId, setPublishedId] = useState();\n  const [currentId, setCurrentId] = useState();\n  const [navbarVersions, setNavbarVersions] = useState([]);\n\n  const loadNavbarData = (data) => {\n    console.log(\"data\", data);\n    const load_items = [];\n    const load_layout = [];\n\n    data.items.forEach((item) => {\n      const item_pages = [];\n      item.pages.forEach((pageId) => {\n        const page = pages.find((p) => p._id === pageId);\n        if (page) {\n          item_pages.push({\n            value: page._id,\n            label: page.title,\n          });\n        }\n      });\n\n      load_items.push({\n        ...item,\n        pages: item_pages,\n      });\n\n      load_layout.push({\n        i: item._id,\n        x: item.x,\n        ...why,\n      });\n    });\n\n    load_items.sort((a, b) => a.x - b.x);\n\n    console.log(\"load_items\", load_items);\n    console.log(\"load_layout\", load_layout);\n    setCurrentId(data._id);\n\n    setItems(load_items);\n    setLayout({ lg: load_layout });\n  };\n\n  useEffect(() => {\n    axios\n      .get(`${URL_PREFIX}/navbars`)\n      .then((res) => {\n        setNavbarVersions(res.data);\n      })\n      .catch((e) => {\n        console.log(\"error\", e);\n      });\n\n    axios\n      .get(`${URL_PREFIX}/navbars/published`)\n      .then((res) => {\n        loadNavbarData(res.data);\n        setPublishedId(res.data._id);\n      })\n      .catch((e) => {\n        console.log(\"error\", e);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (layout.lg.length && items) {\n      setExportData(processExportData());\n    }\n  }, [layout, items]);\n\n  const onLayoutChange = (layout, layouts) => {\n    setLayout(layouts);\n  };\n\n  const processExportData = () => {\n    let sortLayout = layout.lg;\n    sortLayout.sort((a, b) => a.x - b.x);\n\n    const arr = sortLayout.map((position) => {\n      const item = getItem(position.i);\n      if (!item) return \"\";\n      if (item.pages.length === 0) {\n        return \"\";\n      }\n      if (item.pages.length === 1) {\n        return getPageTitle(item.pages[0].value);\n      }\n      const titles = item.pages.map((page) => getPageTitle(page.value));\n      return [item.name, ...titles];\n    });\n\n    // console.log(\"arr\", arr);\n    return arr.filter((a) => a);\n  };\n\n  const save = () => {\n    let sortLayout = layout.lg;\n    sortLayout.sort((a, b) => a.x - b.x);\n\n    const updatedItems = sortLayout.map((position) => {\n      const item = getItem(position.i);\n      return {\n        // _id: sloth.i,\n        x: position.x,\n        pages: item?.pages?.map((page) => page.value) || [],\n        name: item?.name,\n      };\n    });\n\n    console.log(\"updatedItems\", updatedItems);\n    // return;\n\n    axios\n      .post(`${URL_PREFIX}/navbars`, {\n        created_by: getAuth()?.user._id,\n        items: updatedItems,\n      })\n      .then((res) => {\n        setSuccessToast(\"Navbar saved successfully\");\n        setNavbarVersions((prev) => [...prev, res.data]);\n        setWarning(false);\n        setCurrentId(res.data._id);\n        console.log(res);\n      })\n      .catch((err) => {\n        setErrorToast(getErrorMsg(err));\n      });\n  };\n\n  const getItem = (i) => {\n    return items.find((item) => item._id === i);\n  };\n\n  const getPageTitle = (i) => {\n    return pages.find((page) => page._id === i).title;\n  };\n\n  const processImportData = (importData) => {\n    console.log(importData);\n\n    setLayout({ lg: [] });\n\n    const import_items = [];\n    const import_layout = [];\n\n    for (let x = 0; x < MAX_SLOTHS; x++) {\n      if (x > importData.length - 1) {\n        const newId = objectId();\n\n        import_items.push({\n          _id: newId,\n          name: \"\",\n          pages: [],\n        });\n\n        import_layout.push({\n          i: newId,\n          x: x,\n          ...why,\n        });\n        continue;\n      }\n\n      const item = importData[x];\n\n      if (typeof item === \"string\") {\n        const page = pages.find((page) => page.title === item);\n        const item_pages = [\n          {\n            value: page._id,\n            label: page.title,\n          },\n        ];\n\n        const newId = objectId();\n\n        import_items.push({\n          _id: newId,\n          name: \"\",\n          pages: item_pages,\n        });\n\n        import_layout.push({\n          i: newId,\n          x: x,\n          ...why,\n        });\n      } else {\n        const item_pages = [];\n        for (let i = 1; i < item.length; i++) {\n          const page = pages.find((page) => page.title === item[i]);\n          item_pages.push({\n            value: page._id,\n            label: page.title,\n          });\n        }\n\n        const newId = objectId();\n\n        import_items.push({\n          _id: newId,\n          name: item[0],\n          pages: item_pages,\n        });\n\n        import_layout.push({\n          i: newId,\n          x: x,\n          ...why,\n        });\n      }\n    }\n\n    console.log(\"import_items\", import_items);\n    console.log(\"import_layout\", import_layout);\n\n    setItems(import_items);\n    setLayout({ lg: import_layout });\n    setWarning(true);\n  };\n\n  const onUploadChange = async (e) => {\n    const file = e.target.files[0];\n    console.log(\"file\", file);\n    if (!file) return;\n\n    setFilename(file.name);\n    // e.preventDefault();\n    // return;\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      await axios\n        .post(`${URL_PREFIX}/navbars/import`, formData, {\n          headers: { \"Content-Type\": \"multipart/form-data\" },\n        })\n        .then((res) => {\n          processImportData(res.data.readFile);\n        })\n        .catch((err) => {\n          console.log(\"err\", err);\n          setErrorToast(getErrorMsg(err));\n        });\n    } catch (err) {\n      console.log(\"err\", err);\n      setErrorToast(\"Upload failed\");\n    }\n  };\n\n  async function publishVersion(data) {\n    loadNavbarData(data);\n    setWarning(false);\n    setPublishedId(data._id);\n\n    await axios\n      .patch(`${URL_PREFIX}/navbars`, {\n        currentId: data._id,\n        prevId: publishedId,\n      })\n      .then((res) => {\n        setSuccessToast(\"change published navbar\");\n      })\n      .catch((err) => {\n        console.log(\"err\", err);\n        setErrorToast(getErrorMsg(err));\n      });\n  }\n\n  async function changeVersion(data) {\n    loadNavbarData(data);\n    setWarning(false);\n  }\n\n  async function removeVersion(data) {\n    if (data._id === publishedId) {\n      setErrorToast(\"cannot remove current version\");\n      return;\n    }\n\n    await axios\n      .delete(`${URL_PREFIX}/navbars/` + data._id)\n      .then((res) => {\n        setSuccessToast(\"remove versions succeeded\");\n        setNavbarVersions((prevState) => {\n          return prevState.filter((nav) => nav._id !== data._id);\n        });\n      })\n      .catch((err) => {\n        setErrorToast(getErrorMsg(err));\n      });\n  }\n\n  const cardStyle = {\n    borderRadius: \"4px\",\n    backgroundImage: \"linear-gradient( 180deg, rgb(238, 238, 238), white)\",\n  };\n\n  const navCardStyle = {\n    backgroundColor: \"#fff\",\n    flexDirection: \"column\",\n    margin: \"20px\",\n    border: \"1px solid rgb(33, 37, 41, 30%)\",\n    borderRadius: \"4px\",\n  };\n\n  return (\n    <div className=\"\">\n      <div className=\"d-xl-none ml-3\">\n        <h6>\n          You have to use larger display to be able to modify content of\n          navigation bar\n        </h6>\n      </div>\n      <Row\n        style={{\n          minWidth: \"800px\",\n          // maxHeight: \"66px\",\n          // height: \"300px\",\n        }}\n        className=\"d-none d-xl-block\"\n      >\n        <Col>\n          <Row className=\"mb-5\">\n            <Col className=\"p-5\" xs={4} style={cardStyle}>\n              {/*IMPORT EXPORT part*/}\n              <Row className=\"mb-4\">\n                <Col>\n                  <ButtonGroup style={{ width: \"100%\" }}>\n                    <SmallButton\n                      onClick={save}\n                      disabled={!warning}\n                      className=\"mr-4 text-black\"\n                      variant=\"success\"\n                    >\n                      Save navbar\n                    </SmallButton>\n                    <SmallButton\n                      title=\"export\"\n                      href={`data:text/json;charset=utf-8,${encodeURIComponent(\n                        JSON.stringify(exportData)\n                      )}`}\n                      download=\"data.json\"\n                    >\n                      <RiDownloadFill size={\"18\"} color={\"white\"} />\n                    </SmallButton>\n                  </ButtonGroup>\n                </Col>\n              </Row>\n              <Row>\n                <Col>\n                  <Form.File\n                    className=\"d-inline-block \"\n                    custom\n                    label={filename}\n                    onChange={onUploadChange}\n                  />\n                </Col>\n              </Row>\n            </Col>\n            <Col xs={1}></Col>\n            <Col className=\"p-2\" xs={7} style={cardStyle}>\n              {/*ACTIVE NAVBAR PICKER*/}\n              <Row>\n                {navbarVersions.map((version, i) => (\n                  <ButtonGroup className=\"d-flex\" style={navCardStyle}>\n                    <SmallButton\n                      onClick={() => removeVersion(version)}\n                      variant=\"link\"\n                    >\n                      <span>&times;</span>\n                    </SmallButton>\n\n                    <SmallButton\n                      onClick={() => changeVersion(version)}\n                      variant=\"link\"\n                    >\n                      <span\n                        style={{\n                          color: version._id === currentId ? \"red\" : \"blue\",\n                        }}\n                      >\n                        {version.create_date.substr(0, 16).replace(\"T\", \", \")}\n                      </span>\n                    </SmallButton>\n\n                    {version._id === publishedId ? (\n                      <SmallButton variant=\"danger\" disabled>\n                        ACTIVE\n                      </SmallButton>\n                    ) : (\n                      <SmallButton\n                        onClick={() => publishVersion(version)}\n                        variant=\"primary\"\n                      >\n                        Publish\n                      </SmallButton>\n                    )}\n                  </ButtonGroup>\n                ))}\n              </Row>\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n\n      <Row\n        style={{\n          minWidth: \"800px\",\n          // maxHeight: \"66px\",\n          // height: \"300px\",\n        }}\n        className=\"d-none d-xl-block\"\n      >\n        <Col style={cardStyle} className=\"h-100\">\n          <MyGridLayout\n            setWarning={setWarning}\n            breakpoints={{ lg: 1200 }}\n            cols={{ lg: 8 }}\n            layouts={layout}\n            onLayoutChange={onLayoutChange}\n            compactType={compactType}\n            preventCollision={!compactType}\n            measureBeforeMount={!animated}\n            useCSSTransforms={animated}\n            draggableHandle=\".handle\"\n            isBounded={true}\n            isResizable={false}\n            isDraggable={true}\n            style={{ background: \"transparent\" }}\n          >\n            {layout.lg.map((sloth) => (\n              <div key={sloth.i} style={{ background: \"transparent\" }}>\n                <NavSloth\n                  setWarning={setWarning}\n                  item={getItem(sloth.i)}\n                  setNavItems={setItems}\n                  options={options}\n                />\n              </div>\n            ))}\n          </MyGridLayout>\n        </Col>\n      </Row>\n      <Prompt when={warning} message={\"Changes you made may not be saved.\"} />\n    </div>\n  );\n};\n\nconst compactType = \"horizontal\";\nconst animated = true;\n\nconst MAX_SLOTHS = 8;\nconst why = { w: 1, h: 1, y: 0 };\n\n// const getPlaceholder = () => {\n//   const placeholder = [];\n//   for (let x = 0; x < MAX_SLOTHS; x++) {\n//     placeholder.push({ _id: objectId(), name: \"\", pages: [], x });\n//   }\n//   return placeholder;\n// };\n//\n// const placeholder = getPlaceholder();\n\nexport default NavSloths;\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport uuid from \"react-uuid\";\n\nimport CustomPage from \"./custom-page/CustomPage.jsx\";\nimport Page404 from \"./Page404\";\nimport ProfilePage from \"./profile-settings/ProfilePage\";\nimport PageTable from \"./administration/pages/PagesTable\";\nimport UsersTable from \"./administration/users/UsersTable\";\nimport AuthModal from \"./authorization/AuthModal\";\nimport NavSloths from \"./navigation/NavSloths\";\n\nfunction Routes({ pages, auth }) {\n  const visiblePages = auth ? pages : pages.filter((page) => page.published);\n\n  const PrivateRoute = ({ component: Component, onlyAdmin, path, ...rest }) => {\n    let hasAccess = auth;\n    if (onlyAdmin) hasAccess = auth?.user.isAdmin;\n\n    return (\n      <Route\n        render={(props) =>\n          hasAccess ? (\n            <Component {...props} />\n          ) : (\n            <AuthModal action=\"login\" path={path} />\n          )\n        }\n        {...rest}\n      />\n    );\n  };\n\n  const createRoute = (page) => {\n    const props = {\n      exact: true,\n      path: page.path,\n      key: uuid(),\n      component: () => <CustomPage initPage={page} />,\n    };\n    return page.published ? <Route {...props} /> : <PrivateRoute {...props} />;\n  };\n\n  return (\n    <Switch>\n      <PrivateRoute exact path=\"/profile\" component={ProfilePage} />\n      <PrivateRoute exact path=\"/pages\" component={PageTable} />\n      <PrivateRoute exact path=\"/users\" component={UsersTable} />\n      <PrivateRoute exact path=\"/nav\" component={NavSloths} onlyAdmin={true} />\n      {visiblePages.map(createRoute)}\n      <Route path=\"*\" component={Page404} />\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./main.css\";\n\nimport Navbar from \"./navigation/Navbar.jsx\";\nimport Routes from \"./Routes.jsx\";\nimport { FetchError, FetchLoading } from \"./components/Fetchers\";\nimport { ModeProvider } from \"./providers/ModeProvider\";\nimport { ToastProvider } from \"./providers/ToastProvider\";\nimport { URL_PREFIX } from \"./config\";\nimport { getAuth } from \"./utils/functions\";\n\nconst PagesContext = createContext();\n\nfunction App() {\n  const [auth, setPagesAuth] = useState(getAuth());\n  const [pages, setPages] = useState();\n  const [error, setError] = useState();\n  const [loaded, setLoaded] = useState();\n\n  useEffect(() => {\n    axios\n      .get(`${URL_PREFIX}/pages`)\n      .then((res) => {\n        setLoaded(true);\n        setPages(res.data);\n      })\n      .catch((err) => {\n        setLoaded(true);\n        setError(err);\n      });\n  }, []);\n\n  if (error) return <FetchError e={error.message} />;\n  if (!loaded || !pages) return <FetchLoading />;\n\n  return (\n    <PagesContext.Provider value={{ pages, setPages, setPagesAuth, auth }}>\n      <ModeProvider>\n        <ToastProvider>\n          <BrowserRouter>\n            <Navbar pages={pages} />\n            <div className=\"main-container\">\n              <Routes pages={pages} auth={auth} />\n            </div>\n          </BrowserRouter>\n        </ToastProvider>\n      </ModeProvider>\n    </PagesContext.Provider>\n  );\n}\n\nexport const usePagesContext = () => useContext(PagesContext);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />,\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}